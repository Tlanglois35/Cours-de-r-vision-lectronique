<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ElecMath ‚Äî R√©seau √âlectrique FISA3</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Space+Mono:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0a0a0f;
  --bg2: #12121a;
  --bg3: #1a1a26;
  --accent: #e8f428;
  --accent2: #ff5e3a;
  --accent3: #3af4c8;
  --text: #e8e8f0;
  --text2: #8888aa;
  --border: #2a2a3a;
  --card: #16161f;
}
*{margin:0;padding:0;box-sizing:border-box;}
html{scroll-behavior:smooth;}
body{background:var(--bg);color:var(--text);font-family:'Inter',sans-serif;min-height:100vh;overflow-x:hidden;}

/* ‚îÄ‚îÄ BACKGROUND ‚îÄ‚îÄ */
.bg-noise{position:fixed;top:0;left:0;width:100%;height:100%;opacity:.03;pointer-events:none;z-index:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");background-size:200px;}
.bg-glow{position:fixed;width:600px;height:600px;border-radius:50%;background:radial-gradient(circle,rgba(232,244,40,.06) 0%,transparent 70%);pointer-events:none;z-index:0;top:-100px;left:-100px;animation:glowMove 8s ease-in-out infinite alternate;}
@keyframes glowMove{to{transform:translate(200px,150px);}}

/* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
nav{position:fixed;top:0;left:0;right:0;z-index:100;background:rgba(10,10,15,.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;display:flex;align-items:center;height:60px;gap:1rem;}
.nav-logo{font-family:'Syne',sans-serif;font-weight:800;font-size:1.2rem;color:var(--accent);letter-spacing:-0.02em;margin-right:auto;}
.nav-logo span{color:var(--text2);font-weight:400;}
.nav-btn{background:none;border:none;color:var(--text2);font-family:'Inter',sans-serif;font-size:.8rem;padding:.4rem .8rem;border-radius:4px;cursor:pointer;transition:all .2s;letter-spacing:.05em;text-transform:uppercase;}
.nav-btn:hover,.nav-btn.active{color:var(--accent);background:rgba(232,244,40,.08);}
.progress-bar{position:fixed;top:60px;left:0;height:2px;background:var(--accent);z-index:99;transition:width .3s;}

/* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
.hero{min-height:100vh;display:flex;flex-direction:column;justify-content:center;padding:8rem 4rem 4rem;position:relative;z-index:1;}
.hero-badge{display:inline-flex;align-items:center;gap:.5rem;background:rgba(232,244,40,.1);border:1px solid rgba(232,244,40,.3);color:var(--accent);font-family:'Space Mono',monospace;font-size:.75rem;padding:.4rem .8rem;border-radius:2px;margin-bottom:2rem;letter-spacing:.1em;}
.hero h1{font-family:'Syne',sans-serif;font-weight:800;font-size:clamp(3rem,8vw,7rem);line-height:.95;color:var(--text);margin-bottom:1.5rem;}
.hero h1 em{font-style:normal;color:var(--accent);}
.hero p{font-size:1.1rem;color:var(--text2);max-width:560px;line-height:1.7;margin-bottom:3rem;}
.hero-stats{display:flex;gap:3rem;margin-bottom:3rem;}
.stat{display:flex;flex-direction:column;gap:.25rem;}
.stat-num{font-family:'Syne',sans-serif;font-weight:800;font-size:2rem;color:var(--accent);}
.stat-label{font-size:.8rem;color:var(--text2);text-transform:uppercase;letter-spacing:.1em;}
.hero-cta{display:inline-flex;align-items:center;gap:.75rem;background:var(--accent);color:var(--bg);font-family:'Syne',sans-serif;font-weight:700;padding:1rem 2rem;border-radius:4px;cursor:pointer;border:none;font-size:1rem;transition:all .2s;letter-spacing:.02em;}
.hero-cta:hover{background:#fff;transform:translateY(-2px);box-shadow:0 20px 40px rgba(232,244,40,.2);}

/* ‚îÄ‚îÄ SECTION WRAPPER ‚îÄ‚îÄ */
.section{padding:6rem 4rem;position:relative;z-index:1;display:none;}
.section.active{display:block;}
.section-header{margin-bottom:4rem;}
.section-tag{font-family:'Space Mono',monospace;font-size:.75rem;color:var(--accent);letter-spacing:.15em;text-transform:uppercase;margin-bottom:1rem;display:block;}
.section-title{font-family:'Syne',sans-serif;font-weight:800;font-size:clamp(2rem,5vw,4rem);line-height:1;color:var(--text);}
.section-sub{font-size:1rem;color:var(--text2);margin-top:1rem;max-width:600px;line-height:1.6;}

/* ‚îÄ‚îÄ MODULES GRID ‚îÄ‚îÄ */
.modules-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem;}
.module-card{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:2rem;cursor:pointer;transition:all .3s;position:relative;overflow:hidden;}
.module-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--accent);transform:scaleX(0);transform-origin:left;transition:transform .3s;}
.module-card:hover::before{transform:scaleX(1);}
.module-card:hover{border-color:rgba(232,244,40,.3);transform:translateY(-4px);box-shadow:0 20px 40px rgba(0,0,0,.4);}
.module-num{font-family:'Space Mono',monospace;font-size:.75rem;color:var(--text2);margin-bottom:1rem;letter-spacing:.1em;}
.module-title{font-family:'Syne',sans-serif;font-weight:700;font-size:1.3rem;color:var(--text);margin-bottom:.75rem;}
.module-desc{font-size:.875rem;color:var(--text2);line-height:1.6;}
.module-tags{display:flex;gap:.5rem;margin-top:1.5rem;flex-wrap:wrap;}
.tag{font-size:.7rem;padding:.25rem .6rem;border-radius:2px;font-family:'Space Mono',monospace;letter-spacing:.05em;}
.tag-math{background:rgba(58,244,200,.1);color:var(--accent3);border:1px solid rgba(58,244,200,.2);}
.tag-circuit{background:rgba(255,94,58,.1);color:var(--accent2);border:1px solid rgba(255,94,58,.2);}
.tag-power{background:rgba(232,244,40,.1);color:var(--accent);border:1px solid rgba(232,244,40,.2);}
.module-arrow{position:absolute;bottom:2rem;right:2rem;font-size:1.5rem;color:var(--text2);transition:all .3s;}
.module-card:hover .module-arrow{color:var(--accent);transform:translate(4px,-4px);}

/* ‚îÄ‚îÄ LESSON ‚îÄ‚îÄ */
.lesson-layout{display:grid;grid-template-columns:280px 1fr;gap:3rem;align-items:start;}
.lesson-sidebar{position:sticky;top:80px;background:var(--card);border:1px solid var(--border);border-radius:8px;padding:1.5rem;overflow:hidden;}
.sidebar-title{font-family:'Syne',sans-serif;font-weight:700;font-size:.9rem;color:var(--text);margin-bottom:1rem;padding-bottom:.75rem;border-bottom:1px solid var(--border);}
.sidebar-items{list-style:none;display:flex;flex-direction:column;gap:.25rem;}
.sidebar-item{padding:.5rem .75rem;border-radius:4px;cursor:pointer;font-size:.85rem;color:var(--text2);transition:all .2s;display:flex;align-items:center;gap:.5rem;}
.sidebar-item:hover,.sidebar-item.active{background:rgba(232,244,40,.08);color:var(--accent);}
.sidebar-item.done{color:var(--accent3);}
.sidebar-item.done::before{content:'‚úì';font-size:.7rem;color:var(--accent3);}
.sidebar-item:not(.done)::before{content:'‚óã';font-size:.7rem;}
.lesson-content{min-width:0;}
.lesson-header{margin-bottom:3rem;}
.back-btn{background:none;border:1px solid var(--border);color:var(--text2);padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-size:.8rem;margin-bottom:2rem;transition:all .2s;font-family:'Inter',sans-serif;}
.back-btn:hover{border-color:var(--accent);color:var(--accent);}

/* ‚îÄ‚îÄ CONTENT BLOCKS ‚îÄ‚îÄ */
.content-block{margin-bottom:2.5rem;}
.block-title{font-family:'Syne',sans-serif;font-weight:700;font-size:1.5rem;color:var(--text);margin-bottom:1.25rem;}
.block-text{font-size:.95rem;color:var(--text2);line-height:1.8;margin-bottom:1rem;}
.block-text strong{color:var(--text);}

/* FORMULA BOX */
.formula-box{background:var(--bg3);border:1px solid var(--border);border-left:3px solid var(--accent);border-radius:0 8px 8px 0;padding:1.5rem 2rem;margin:1.5rem 0;font-family:'Space Mono',monospace;position:relative;overflow:hidden;}
.formula-box::before{content:'‚àë';position:absolute;right:1rem;top:50%;transform:translateY(-50%);font-size:4rem;color:rgba(232,244,40,.05);pointer-events:none;}
.formula-label{font-size:.7rem;color:var(--accent);letter-spacing:.15em;text-transform:uppercase;margin-bottom:.75rem;display:block;}
.formula{font-size:1.1rem;color:var(--accent);font-weight:700;line-height:1.6;}
.formula sub,.formula sup{font-size:.6em;}
.formula-explain{font-size:.8rem;color:var(--text2);margin-top:.75rem;font-family:'Inter',sans-serif;line-height:1.6;}

/* EXPANDABLE */
.expand-card{border:1px solid var(--border);border-radius:8px;overflow:hidden;margin:1rem 0;}
.expand-header{background:var(--bg2);padding:1rem 1.5rem;cursor:pointer;display:flex;align-items:center;justify-content:space-between;transition:all .2s;}
.expand-header:hover{background:var(--bg3);}
.expand-header-text{font-weight:500;font-size:.95rem;color:var(--text);}
.expand-icon{color:var(--accent);font-size:1.2rem;transition:transform .3s;font-family:'Space Mono',monospace;}
.expand-content{max-height:0;overflow:hidden;transition:max-height .4s ease,padding .3s;}
.expand-content.open{max-height:2000px;padding:1.5rem;}
.expand-content p,.expand-content li{font-size:.9rem;color:var(--text2);line-height:1.7;}
.expand-content ul{list-style:none;display:flex;flex-direction:column;gap:.5rem;}
.expand-content li::before{content:'‚Üí ';color:var(--accent);}

/* EXAMPLE BOX */
.example-box{background:rgba(58,244,200,.05);border:1px solid rgba(58,244,200,.15);border-radius:8px;padding:1.5rem;margin:1.5rem 0;}
.example-label{font-family:'Space Mono',monospace;font-size:.7rem;color:var(--accent3);letter-spacing:.15em;text-transform:uppercase;margin-bottom:.75rem;display:block;}
.example-box .formula{color:var(--accent3);}

/* ALERT */
.alert{background:rgba(255,94,58,.05);border:1px solid rgba(255,94,58,.2);border-radius:8px;padding:1rem 1.5rem;margin:1rem 0;display:flex;gap:.75rem;align-items:flex-start;}
.alert-icon{color:var(--accent2);font-size:1.2rem;flex-shrink:0;margin-top:.1rem;}
.alert-text{font-size:.875rem;color:var(--text2);line-height:1.6;}
.alert-text strong{color:var(--accent2);}

/* TIP */
.tip{background:rgba(232,244,40,.04);border:1px solid rgba(232,244,40,.15);border-radius:8px;padding:1rem 1.5rem;margin:1rem 0;display:flex;gap:.75rem;}
.tip-icon{color:var(--accent);font-size:1.1rem;flex-shrink:0;}
.tip-text{font-size:.875rem;color:var(--text2);line-height:1.6;}
.tip-text strong{color:var(--accent);}

/* VISUAL TABLE */
.vtable{width:100%;border-collapse:separate;border-spacing:0;margin:1.5rem 0;border-radius:8px;overflow:hidden;}
.vtable th{background:var(--bg3);padding:.75rem 1rem;font-family:'Syne',sans-serif;font-weight:700;font-size:.85rem;color:var(--text);text-align:left;border-bottom:2px solid var(--accent);}
.vtable td{padding:.75rem 1rem;border-bottom:1px solid var(--border);font-size:.875rem;color:var(--text2);vertical-align:top;}
.vtable tr:last-child td{border-bottom:none;}
.vtable tr:hover td{background:rgba(255,255,255,.02);}
.vtable .mono{font-family:'Space Mono',monospace;color:var(--accent3);}
.vtable .accent{color:var(--accent);}

/* INTERACTIVE CALCULATOR */
.calc-box{background:var(--bg3);border:1px solid var(--border);border-radius:12px;padding:2rem;margin:2rem 0;}
.calc-title{font-family:'Syne',sans-serif;font-weight:700;font-size:1.1rem;color:var(--text);margin-bottom:1.5rem;display:flex;align-items:center;gap:.5rem;}
.calc-title span{background:rgba(232,244,40,.15);color:var(--accent);padding:.2rem .6rem;border-radius:4px;font-size:.8rem;font-family:'Space Mono',monospace;}
.calc-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.5rem;}
.calc-field{display:flex;flex-direction:column;gap:.4rem;}
.calc-label{font-size:.75rem;color:var(--text2);letter-spacing:.05em;font-family:'Space Mono',monospace;}
.calc-input{background:var(--bg2);border:1px solid var(--border);color:var(--text);padding:.6rem .8rem;border-radius:6px;font-family:'Space Mono',monospace;font-size:.9rem;width:100%;outline:none;transition:border-color .2s;}
.calc-input:focus{border-color:var(--accent);}
.calc-btn{background:var(--accent);color:var(--bg);font-family:'Syne',sans-serif;font-weight:700;padding:.75rem 1.5rem;border:none;border-radius:6px;cursor:pointer;font-size:.95rem;transition:all .2s;width:100%;}
.calc-btn:hover{background:#fff;box-shadow:0 8px 20px rgba(232,244,40,.2);}
.calc-result{background:var(--bg2);border:1px solid rgba(232,244,40,.2);border-radius:8px;padding:1rem 1.5rem;margin-top:1rem;font-family:'Space Mono',monospace;display:none;}
.calc-result.show{display:block;}
.result-line{display:flex;justify-content:space-between;padding:.25rem 0;font-size:.9rem;}
.result-key{color:var(--text2);}
.result-val{color:var(--accent);font-weight:700;}

/* ‚îÄ‚îÄ QCM ‚îÄ‚îÄ */
.qcm-section{margin:2rem 0;}
.qcm-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem;}
.qcm-title{font-family:'Syne',sans-serif;font-weight:700;font-size:1.3rem;color:var(--text);}
.qcm-score{font-family:'Space Mono',monospace;font-size:.875rem;color:var(--text2);}
.qcm-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:2rem;margin-bottom:1.5rem;transition:border-color .3s;}
.qcm-card.correct{border-color:var(--accent3);}
.qcm-card.wrong{border-color:var(--accent2);}
.qcm-q{font-size:1rem;color:var(--text);line-height:1.6;margin-bottom:1.5rem;}
.qcm-q strong{color:var(--accent);font-family:'Space Mono',monospace;}
.qcm-options{display:flex;flex-direction:column;gap:.75rem;}
.qcm-opt{background:var(--bg2);border:1px solid var(--border);border-radius:8px;padding:.875rem 1.25rem;cursor:pointer;font-size:.9rem;color:var(--text2);transition:all .2s;display:flex;align-items:center;gap:.75rem;}
.qcm-opt:hover:not(.disabled){border-color:var(--accent);color:var(--text);}
.qcm-opt.selected.correct{background:rgba(58,244,200,.08);border-color:var(--accent3);color:var(--accent3);}
.qcm-opt.selected.wrong{background:rgba(255,94,58,.08);border-color:var(--accent2);color:var(--accent2);}
.qcm-opt.correct-answer{background:rgba(58,244,200,.08);border-color:var(--accent3);color:var(--accent3);}
.qcm-opt.disabled{cursor:default;pointer-events:none;}
.opt-letter{font-family:'Space Mono',monospace;font-size:.75rem;width:24px;height:24px;border-radius:4px;background:var(--bg3);display:flex;align-items:center;justify-content:center;flex-shrink:0;color:var(--text2);}
.qcm-explanation{background:var(--bg3);border-left:3px solid var(--accent3);padding:1rem 1.5rem;margin-top:1rem;border-radius:0 8px 8px 0;font-size:.875rem;color:var(--text2);line-height:1.6;display:none;}
.qcm-explanation.show{display:block;}
.qcm-explanation strong{color:var(--accent3);}
.submit-qcm{background:var(--accent);color:var(--bg);font-family:'Syne',sans-serif;font-weight:700;padding:.875rem 2rem;border:none;border-radius:6px;cursor:pointer;font-size:1rem;transition:all .2s;margin-top:1rem;}
.submit-qcm:hover{background:#fff;}
.qcm-total{background:var(--bg3);border:1px solid var(--border);border-radius:12px;padding:2rem;text-align:center;margin-top:2rem;display:none;}
.qcm-total.show{display:block;}
.score-big{font-family:'Syne',sans-serif;font-weight:800;font-size:4rem;color:var(--accent);}
.score-msg{font-size:1.1rem;color:var(--text2);margin-top:.5rem;}
.retry-btn{background:none;border:1px solid var(--accent);color:var(--accent);font-family:'Syne',sans-serif;font-weight:700;padding:.75rem 2rem;border-radius:6px;cursor:pointer;font-size:.95rem;margin-top:1.5rem;transition:all .2s;}
.retry-btn:hover{background:rgba(232,244,40,.1);}

/* ‚îÄ‚îÄ INTERACTIVE DIAGRAM ‚îÄ‚îÄ */
.diagram-container{background:var(--bg3);border:1px solid var(--border);border-radius:12px;padding:2rem;margin:2rem 0;position:relative;}
.diagram-label{font-family:'Space Mono',monospace;font-size:.7rem;color:var(--accent);letter-spacing:.15em;text-transform:uppercase;margin-bottom:1rem;display:block;}
svg.diagram{width:100%;max-width:600px;display:block;margin:0 auto;}

/* ‚îÄ‚îÄ PROGRESS ‚îÄ‚îÄ */
.progress-section{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:2rem;margin-bottom:2rem;}
.progress-title{font-family:'Syne',sans-serif;font-weight:700;font-size:1rem;color:var(--text);margin-bottom:1.25rem;}
.progress-items{display:flex;flex-direction:column;gap:.75rem;}
.prog-item{display:flex;align-items:center;gap:1rem;}
.prog-label{font-size:.85rem;color:var(--text2);width:160px;flex-shrink:0;}
.prog-bar-wrap{flex:1;background:var(--bg3);border-radius:2px;height:4px;overflow:hidden;}
.prog-bar-fill{height:100%;background:var(--accent);border-radius:2px;transition:width 1s ease;}
.prog-pct{font-family:'Space Mono',monospace;font-size:.75rem;color:var(--text2);width:35px;text-align:right;}

/* ‚îÄ‚îÄ PLANE COMPLEXE ‚îÄ‚îÄ */
.complex-plane{background:var(--bg3);border:1px solid var(--border);border-radius:12px;padding:2rem;margin:2rem 0;}
.plane-controls{display:flex;gap:1rem;margin-bottom:1rem;flex-wrap:wrap;}
.plane-input-group{display:flex;flex-direction:column;gap:.3rem;}
.plane-input-group label{font-size:.75rem;color:var(--text2);font-family:'Space Mono',monospace;}
.plane-input-group input{width:90px;background:var(--bg2);border:1px solid var(--border);color:var(--text);padding:.5rem;border-radius:4px;font-family:'Space Mono',monospace;font-size:.85rem;outline:none;}
.plane-input-group input:focus{border-color:var(--accent);}
.plane-btn{background:var(--accent);color:var(--bg);border:none;border-radius:4px;padding:.5rem 1rem;font-family:'Syne',sans-serif;font-weight:700;font-size:.85rem;cursor:pointer;align-self:flex-end;}
#complexCanvas{border-radius:8px;background:var(--bg2);border:1px solid var(--border);}
.complex-info{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem;margin-top:1rem;}
.cinfo{background:var(--bg2);border:1px solid var(--border);border-radius:6px;padding:.75rem;text-align:center;}
.cinfo-label{font-size:.7rem;color:var(--text2);font-family:'Space Mono',monospace;letter-spacing:.05em;display:block;margin-bottom:.25rem;}
.cinfo-val{font-family:'Space Mono',monospace;font-size:.9rem;color:var(--accent);font-weight:700;}

/* ‚îÄ‚îÄ BREADCRUMB ‚îÄ‚îÄ */
.breadcrumb{display:flex;align-items:center;gap:.5rem;font-size:.8rem;color:var(--text2);margin-bottom:2rem;}
.breadcrumb span{color:var(--text2);}
.breadcrumb .sep{color:var(--border);}
.breadcrumb .current{color:var(--text);}

/* ‚îÄ‚îÄ STEP INDICATOR ‚îÄ‚îÄ */
.steps{display:flex;gap:.5rem;margin:2rem 0;flex-wrap:wrap;}
.step{flex:1;min-width:80px;background:var(--bg3);border:1px solid var(--border);border-radius:6px;padding:.75rem;text-align:center;font-size:.75rem;color:var(--text2);font-family:'Space Mono',monospace;cursor:pointer;transition:all .2s;}
.step.active{background:rgba(232,244,40,.1);border-color:var(--accent);color:var(--accent);}
.step.done{background:rgba(58,244,200,.05);border-color:rgba(58,244,200,.3);color:var(--accent3);}

/* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
@media(max-width:768px){
  .hero{padding:6rem 1.5rem 3rem;}
  .section{padding:4rem 1.5rem;}
  .lesson-layout{grid-template-columns:1fr;}
  .lesson-sidebar{position:static;}
  .calc-grid{grid-template-columns:1fr;}
  .complex-info{grid-template-columns:1fr;}
}

/* ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ */
@keyframes fadeUp{from{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0);}}
.fade-up{animation:fadeUp .6s ease forwards;}
.fade-up-2{animation:fadeUp .6s .15s ease both;}
.fade-up-3{animation:fadeUp .6s .3s ease both;}

/* NAV dots */
.nav-dots{display:flex;gap:.5rem;align-items:center;}
.nav-dot{width:6px;height:6px;border-radius:50%;background:var(--border);cursor:pointer;transition:all .2s;}
.nav-dot.active{background:var(--accent);width:16px;border-radius:3px;}

/* Code inline */
code{background:var(--bg3);color:var(--accent3);padding:.1em .4em;border-radius:3px;font-family:'Space Mono',monospace;font-size:.85em;}

/* Highlight */
.hl{color:var(--accent);font-weight:700;}
.hl-green{color:var(--accent3);font-weight:700;}
.hl-red{color:var(--accent2);font-weight:700;}

</style>
</head>
<body>

<div class="bg-noise"></div>
<div class="bg-glow"></div>
<div class="progress-bar" id="progressBar" style="width:0%"></div>

<!-- NAV -->
<nav>
  <div class="nav-logo">Elec<span>Math</span></div>
  <button class="nav-btn active" onclick="showHome()">Accueil</button>
  <button class="nav-btn" onclick="showSection('modules')">Modules</button>
  <button class="nav-btn" onclick="showSection('progression')">Progression</button>
</nav>

<!-- ‚ïê‚ïê‚ïê HERO ‚ïê‚ïê‚ïê -->
<div id="home" class="hero">
  <div class="hero-badge">üìê FISA 3 ‚Äî 2026 ‚Äî Zhibin ZHOU</div>
  <h1 class="fade-up">R√©seaux<br>√âlectriques<br><em>D√©cod√©s.</em></h1>
  <p class="fade-up-2">Un cours interactif complet sur les circuits monophas√©s et triphas√©s. Maths, formules, exercices pratiques et QCM ‚Äî tout ce qu'il faut pour vraiment comprendre.</p>
  <div class="hero-stats fade-up-3">
    <div class="stat"><span class="stat-num">6</span><span class="stat-label">Modules</span></div>
    <div class="stat"><span class="stat-num">40+</span><span class="stat-label">Exercices</span></div>
    <div class="stat"><span class="stat-num">3</span><span class="stat-label">Calculatrices</span></div>
  </div>
  <button class="hero-cta fade-up-3" onclick="showSection('modules')">Commencer ‚Üí</button>
</div>

<!-- ‚ïê‚ïê‚ïê MODULES ‚ïê‚ïê‚ïê -->
<div id="modules" class="section">
  <div class="section-header">
    <span class="section-tag">‚Üí Programme</span>
    <h2 class="section-title">Choisir<br>un module</h2>
    <p class="section-sub">Chaque module contient des explications d√©taill√©es, des exemples r√©solus, une calculatrice interactive et un QCM pour tester vos connaissances.</p>
  </div>
  <div class="modules-grid">
    <div class="module-card" onclick="showLesson('complexes')">
      <div class="module-num">MODULE 01</div>
      <div class="module-title">Nombres Complexes</div>
      <div class="module-desc">Repr√©sentations alg√©brique, trigonom√©trique et exponentielle. Module, argument, conjugu√© et op√©rations.</div>
      <div class="module-tags"><span class="tag tag-math">Math√©matiques</span><span class="tag tag-math">Phaseurs</span></div>
      <div class="module-arrow">‚Üó</div>
    </div>
    <div class="module-card" onclick="showLesson('signaux')">
      <div class="module-num">MODULE 02</div>
      <div class="module-title">Signaux Sinuso√Ødaux</div>
      <div class="module-desc">Valeur efficace, valeur cr√™te, fr√©quence, pulsation, d√©phasage. Du temporel au complexe.</div>
      <div class="module-tags"><span class="tag tag-circuit">Signaux</span><span class="tag tag-math">RMS</span></div>
      <div class="module-arrow">‚Üó</div>
    </div>
    <div class="module-card" onclick="showLesson('impedances')">
      <div class="module-num">MODULE 03</div>
      <div class="module-title">Lois & Imp√©dances</div>
      <div class="module-desc">Lois de Kirchhoff, imp√©dances R, L, C en complexe. Associations s√©rie/parall√®le.</div>
      <div class="module-tags"><span class="tag tag-circuit">Circuits</span><span class="tag tag-circuit">Ohm</span></div>
      <div class="module-arrow">‚Üó</div>
    </div>
    <div class="module-card" onclick="showLesson('puissances')">
      <div class="module-num">MODULE 04</div>
      <div class="module-title">Puissances √âlectriques</div>
      <div class="module-desc">Puissance active P, r√©active Q, apparente S. Facteur de puissance et triangle des puissances.</div>
      <div class="module-tags"><span class="tag tag-power">Puissance</span><span class="tag tag-power">CosœÜ</span></div>
      <div class="module-arrow">‚Üó</div>
    </div>
    <div class="module-card" onclick="showLesson('triphas√©')">
      <div class="module-num">MODULE 06</div>
      <div class="module-title">Syst√®mes Triphas√©s</div>
      <div class="module-tags"><span class="tag">r√©seau</span><span class="tag">√©toile</span><span class="tag">triangle</span></div>
      <div class="module-desc">Distribution 3 phases, r√©cepteurs √©toile et triangle, puissances triphas√©es, compensation d'√©nergie r√©active.</div>
      <div class="module-arrow">‚Üó</div>
    </div>
    <div class="module-card" onclick="showLesson('methodologie')">
      <div class="module-num">MODULE 05</div>
      <div class="module-title">M√©thodologie & Exemples</div>
      <div class="module-desc">Comment r√©soudre un circuit AC √©tape par √©tape. Exemples complets avec calculs d√©taill√©s.</div>
      <div class="module-tags"><span class="tag tag-circuit">M√©thode</span><span class="tag tag-power">Pratique</span></div>
      <div class="module-arrow">‚Üó</div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê PROGRESSION ‚ïê‚ïê‚ïê -->
<div id="progression" class="section">
  <div class="section-header">
    <span class="section-tag">‚Üí Suivi</span>
    <h2 class="section-title">Progression</h2>
  </div>
  <div class="progress-section">
    <div class="progress-title">Modules compl√©t√©s</div>
    <div class="progress-items" id="progressItems"></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê LESSON: COMPLEXES ‚ïê‚ïê‚ïê -->
<div id="lesson-complexes" class="section">
  <button class="back-btn" onclick="showSection('modules')">‚Üê Retour aux modules</button>
  <div class="breadcrumb">
    <span onclick="showHome()" style="cursor:pointer">Accueil</span><span class="sep">/</span>
    <span onclick="showSection('modules')" style="cursor:pointer">Modules</span><span class="sep">/</span>
    <span class="current">Nombres Complexes</span>
  </div>

  <div class="lesson-layout">
    <aside class="lesson-sidebar">
      <div class="sidebar-title">MODULE 01</div>
      <ul class="sidebar-items">
        <li class="sidebar-item active" onclick="scrollTo(0,0)">1.1 Introduction</li>
        <li class="sidebar-item" onclick="scrollToId('c-formes')">1.2 Les 3 formes</li>
        <li class="sidebar-item" onclick="scrollToId('c-operations')">1.3 Op√©rations</li>
        <li class="sidebar-item" onclick="scrollToId('c-plan')">1.4 Plan complexe</li>
        <li class="sidebar-item" onclick="scrollToId('c-electrique')">1.5 En √©lectricit√©</li>
        <li class="sidebar-item" onclick="scrollToId('c-derivation')">1.6 D√©rivation/Int√©gration</li>
        <li class="sidebar-item" onclick="scrollToId('c-calc')">üßÆ Calculatrice</li>
        <li class="sidebar-item" onclick="scrollToId('c-qcm')">üìã QCM</li>
      </ul>
    </aside>

    <div class="lesson-content">
      <!-- 1.1 Introduction -->
      <div class="content-block">
        <div class="section-tag">1.1 ‚Äî Pourquoi les complexes ?</div>
        <h2 class="block-title">Nombres complexes en √©lectricit√©</h2>
        <p class="block-text">En √©lectricit√©, les grandeurs (tension, courant) varient sinuso√Ødalement. R√©soudre des √©quations diff√©rentielles serait tr√®s lourd. Les <strong>nombres complexes</strong> permettent de remplacer ces √©quations par de simples multiplications !</p>
        <div class="tip">
          <div class="tip-icon">üí°</div>
          <div class="tip-text"><strong>Id√©e cl√© :</strong> Un nombre complexe Z encode √† la fois l'amplitude et le d√©phasage d'un signal sinuso√Ødal. Les calculs dans le domaine complexe sont beaucoup plus simples que dans le domaine temporel.</div>
        </div>
        <div class="formula-box">
          <span class="formula-label">D√©finition fondamentale</span>
          <div class="formula">j¬≤ = ‚àí1 &nbsp;&nbsp;‚Üí&nbsp;&nbsp; j = ‚àö(‚àí1)</div>
          <div class="formula-explain">j est l'unit√© imaginaire. En math on note souvent i, mais en √©lectricit√© on utilise j pour ne pas confondre avec le courant i(t).</div>
        </div>
        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">üìå Pourquoi j et pas i ? Explication intuitive</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p>En math√©matiques pures, l'unit√© imaginaire est not√©e <strong>i</strong>. Mais en √©lectrotechnique, <strong>i</strong> est d√©j√† utilis√© pour d√©signer le courant √©lectrique i(t). Pour √©viter toute confusion, les ing√©nieurs ont adopt√© la lettre <strong>j</strong>. C'est une pure convention de notation ‚Äî le concept est identique.</p>
          </div>
        </div>
      </div>

      <!-- 1.2 Les 3 formes -->
      <div class="content-block" id="c-formes">
        <div class="section-tag">1.2 ‚Äî Repr√©sentations</div>
        <h2 class="block-title">Les 3 formes d'un complexe</h2>

        <div class="steps">
          <div class="step active" onclick="showForm(0)">Alg√©brique</div>
          <div class="step" onclick="showForm(1)">Trigonom√©trique</div>
          <div class="step" onclick="showForm(2)">Exponentielle</div>
        </div>

        <div id="form-0">
          <div class="formula-box">
            <span class="formula-label">Forme alg√©brique (cart√©sienne)</span>
            <div class="formula">Z = a + j¬∑b</div>
            <div class="formula-explain">
              ‚Ä¢ a = partie r√©elle : <code>a = Re(Z)</code><br>
              ‚Ä¢ b = partie imaginaire : <code>b = Im(Z)</code><br>
              ‚Ä¢ a et b sont des nombres r√©els<br><br>
              <strong>Utile pour :</strong> additionner et soustraire des complexes.
            </div>
          </div>
          <div class="example-box">
            <span class="example-label">Exemple concret</span>
            <p>Z = 3 + j¬∑4 &nbsp;‚Üí&nbsp; Re(Z) = 3, Im(Z) = 4</p>
          </div>
        </div>
        <div id="form-1" style="display:none;">
          <div class="formula-box">
            <span class="formula-label">Forme trigonom√©trique (polaire)</span>
            <div class="formula">Z = |Z|¬∑(cosœÜ + j¬∑sinœÜ)</div>
            <div class="formula-explain">
              ‚Ä¢ |Z| = module = ‚àö(a¬≤ + b¬≤)<br>
              ‚Ä¢ œÜ = argument = arctan(b/a) pour a > 0<br><br>
              La projection donne : a = |Z|¬∑cosœÜ &nbsp;&nbsp; b = |Z|¬∑sinœÜ<br>
              <strong>Utile pour :</strong> comprendre g√©om√©triquement.
            </div>
          </div>
          <div class="example-box">
            <span class="example-label">Exemple</span>
            <p>Z = 3 + j¬∑4 &nbsp;‚Üí&nbsp; |Z| = ‚àö(9+16) = 5 &nbsp;&nbsp; œÜ = arctan(4/3) ‚âà 53¬∞</p>
            <p>V√©rif : 5¬∑cos(53¬∞) ‚âà 3 ‚úì &nbsp;&nbsp; 5¬∑sin(53¬∞) ‚âà 4 ‚úì</p>
          </div>
        </div>
        <div id="form-2" style="display:none;">
          <div class="formula-box">
            <span class="formula-label">Forme exponentielle (Euler)</span>
            <div class="formula">Z = |Z|¬∑e<sup>jœÜ</sup></div>
            <div class="formula-explain">
              Gr√¢ce √† la formule d'Euler : e<sup>jœÜ</sup> = cosœÜ + j¬∑sinœÜ<br><br>
              ‚Ä¢ Produit : |Z‚ÇÅ|¬∑e<sup>jœÜ‚ÇÅ</sup> √ó |Z‚ÇÇ|¬∑e<sup>jœÜ‚ÇÇ</sup> = |Z‚ÇÅ|¬∑|Z‚ÇÇ|¬∑e<sup>j(œÜ‚ÇÅ+œÜ‚ÇÇ)</sup><br>
              ‚Ä¢ Division : quotient des modules, diff√©rence des arguments<br><br>
              <strong>Utile pour :</strong> multiplier, diviser, calculer des puissances.
            </div>
          </div>
          <div class="example-box">
            <span class="example-label">Valeurs remarquables</span>
            <div class="formula" style="font-size:.9rem;">
              œÜ = 0 ‚Üí e<sup>j0</sup> = 1<br>
              œÜ = œÄ/2 ‚Üí e<sup>jœÄ/2</sup> = j<br>
              œÜ = ‚àíœÄ/2 ‚Üí e<sup>‚àíjœÄ/2</sup> = ‚àíj<br>
              œÜ = œÄ ‚Üí e<sup>jœÄ</sup> = ‚àí1
            </div>
          </div>
        </div>

        <!-- Tableau r√©capitulatif -->
        <table class="vtable" style="margin-top:2rem;">
          <tr><th>Forme</th><th>√âcriture</th><th>Avantage</th></tr>
          <tr><td>Alg√©brique</td><td class="mono">a + jb</td><td>Addition, soustraction</td></tr>
          <tr><td>Trigonom√©trique</td><td class="mono">|Z|(cosœÜ + j sinœÜ)</td><td>Visualisation g√©om√©trique</td></tr>
          <tr><td>Exponentielle</td><td class="mono">|Z|¬∑e<sup>jœÜ</sup></td><td>Multiplication, division, d√©rivation</td></tr>
        </table>
      </div>

      <!-- 1.3 Op√©rations -->
      <div class="content-block" id="c-operations">
        <div class="section-tag">1.3 ‚Äî Op√©rations</div>
        <h2 class="block-title">Calculer avec les complexes</h2>

        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">‚ûï Addition et Soustraction</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <div class="formula-box">
              <span class="formula-label">R√®gle</span>
              <div class="formula">Z‚ÇÅ + Z‚ÇÇ = (a+c) + j(b+d)</div>
              <div class="formula-explain">On additionne les parties r√©elles entre elles, et les parties imaginaires entre elles.</div>
            </div>
            <div class="example-box">
              <span class="example-label">Exemple r√©solu pas √† pas</span>
              <p>Z‚ÇÅ = 3 ‚àí 2j &nbsp;&nbsp; Z‚ÇÇ = 5 + 4j</p>
              <p>Z = Z‚ÇÅ + Z‚ÇÇ = (3+5) + (‚àí2+4)j = <strong>8 + 2j</strong></p>
              <p>|Z| = ‚àö(8¬≤ + 2¬≤) = ‚àö68 ‚âà <strong>8,25</strong></p>
              <p>œÜ = arctan(2/8) = arctan(0,25) ‚âà <strong>14¬∞</strong></p>
            </div>
          </div>
        </div>

        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">‚úï Multiplication</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <div class="formula-box">
              <span class="formula-label">R√®gle (forme exponentielle)</span>
              <div class="formula">Z‚ÇÅ √ó Z‚ÇÇ = |Z‚ÇÅ|¬∑|Z‚ÇÇ| ¬∑ e<sup>j(œÜ‚ÇÅ+œÜ‚ÇÇ)</sup></div>
              <div class="formula-explain">
                <strong>‚Üí Module :</strong> on multiplie les modules<br>
                <strong>‚Üí Argument :</strong> on additionne les arguments<br><br>
                En alg√©brique : (a+jb)(c+jd) = ac ‚àí bd + j(ad + bc)<br>
                (rappel : j¬≤ = ‚àí1, donc j√ój = ‚àí1)
              </div>
            </div>
            <div class="example-box">
              <span class="example-label">Exemple</span>
              <p>Z‚ÇÅ = ‚àö3 ‚àí j &nbsp;&nbsp;‚Üí&nbsp;&nbsp; |Z‚ÇÅ| = 2, œÜ‚ÇÅ = ‚àí30¬∞</p>
              <p>Z‚ÇÇ = 1 ‚àí j &nbsp;&nbsp;‚Üí&nbsp;&nbsp; |Z‚ÇÇ| = ‚àö2, œÜ‚ÇÇ = ‚àí45¬∞</p>
              <p>Z = Z‚ÇÅ√óZ‚ÇÇ : |Z| = 2‚àö2 ‚âà <strong>2,83</strong> &nbsp;&nbsp; œÜ = ‚àí75¬∞</p>
            </div>
            <div class="alert">
              <div class="alert-icon">‚ö†Ô∏è</div>
              <div class="alert-text"><strong>Attention :</strong> Pour multiplier, la forme exponentielle est bien plus pratique que la forme alg√©brique. Convertissez d'abord !</div>
            </div>
          </div>
        </div>

        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">√∑ Division</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <div class="formula-box">
              <span class="formula-label">R√®gle (forme exponentielle)</span>
              <div class="formula">Z‚ÇÅ / Z‚ÇÇ = (|Z‚ÇÅ|/|Z‚ÇÇ|) ¬∑ e<sup>j(œÜ‚ÇÅ‚àíœÜ‚ÇÇ)</sup></div>
              <div class="formula-explain">
                <strong>‚Üí Module :</strong> on divise les modules<br>
                <strong>‚Üí Argument :</strong> on soustrait les arguments<br><br>
                En alg√©brique : multiplier num√©rateur et d√©nominateur par le <strong>conjugu√©</strong> du d√©nominateur.
              </div>
            </div>
            <div class="example-box">
              <span class="example-label">Astuce conjugu√©</span>
              <p>Z‚ÇÅ/Z‚ÇÇ = Z‚ÇÅ √ó Z‚ÇÇ*/|Z‚ÇÇ|¬≤</p>
              <p>Exemple : 1/j = 1√ó(‚àíj)/(j√ó(‚àíj)) = ‚àíj/1 = ‚àíj</p>
              <p>‚üπ <strong>1/j = ‚àíj</strong> (tr√®s important en √©lectricit√© !)</p>
            </div>
          </div>
        </div>

        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">* Conjugu√©</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p>Le conjugu√© de Z = a + jb est <strong>Z* = a ‚àí jb</strong></p>
            <p style="margin-top:.75rem;">En exponentielle : si Z = |Z|¬∑e<sup>jœÜ</sup> alors Z* = |Z|¬∑e<sup>‚àíjœÜ</sup></p>
            <p style="margin-top:.75rem;">Propri√©t√© utile : Z √ó Z* = |Z|¬≤ (nombre r√©el positif)</p>
            <div class="tip" style="margin-top:1rem;">
              <div class="tip-icon">üí°</div>
              <div class="tip-text">Le conjugu√© est utilis√© pour calculer la <strong>puissance complexe</strong> : <code>S = V ¬∑ I*</code></div>
            </div>
          </div>
        </div>
      </div>

      <!-- 1.4 Plan complexe interactif -->
      <div class="content-block" id="c-plan">
        <div class="section-tag">1.4 ‚Äî Visualisation</div>
        <h2 class="block-title">Plan complexe interactif</h2>
        <p class="block-text">Entrez les parties r√©elle et imaginaire pour visualiser le nombre complexe sur le plan d'Argand.</p>
        <div class="complex-plane">
          <span class="diagram-label">Plan d'Argand ‚Äî Cliquez pour placer un point ou utilisez les champs</span>
          <div class="plane-controls">
            <div class="plane-input-group">
              <label>Partie r√©elle (a)</label>
              <input type="number" id="cRe" value="3" step="0.5">
            </div>
            <div class="plane-input-group">
              <label>Partie imaginaire (b)</label>
              <input type="number" id="cIm" value="4" step="0.5">
            </div>
            <button class="plane-btn" onclick="drawComplex()">Tracer</button>
          </div>
          <canvas id="complexCanvas" width="500" height="300"></canvas>
          <div class="complex-info">
            <div class="cinfo"><span class="cinfo-label">Module |Z|</span><span class="cinfo-val" id="cMod">5.00</span></div>
            <div class="cinfo"><span class="cinfo-label">Argument œÜ</span><span class="cinfo-val" id="cArg">53.1¬∞</span></div>
            <div class="cinfo"><span class="cinfo-label">Forme exp.</span><span class="cinfo-val" id="cExp">5¬∑e^(j53¬∞)</span></div>
          </div>
        </div>
      </div>

      <!-- 1.5 En √©lectricit√© -->
      <div class="content-block" id="c-electrique">
        <div class="section-tag">1.5 ‚Äî Application √©lectrique</div>
        <h2 class="block-title">Les phaseurs</h2>
        <p class="block-text">Un signal sinuso√Ødal s'√©crit : <strong>v(t) = V‚àö2 ¬∑ sin(œât + œÜ·µ•)</strong></p>
        <p class="block-text">Sa repr√©sentation complexe (phaseur) est :</p>
        <div class="formula-box">
          <span class="formula-label">Phaseur ‚Äî Notation complexe</span>
          <div class="formula"><u>V</u> = V ¬∑ e<sup>jœÜ·µ•</sup></div>
          <div class="formula-explain">
            Le module = valeur efficace RMS = V = V<sub>max</sub>/‚àö2<br>
            L'argument = phase initiale œÜ·µ•<br><br>
            On perd l'information sur œâ (mais √† fr√©quence fixe, c'est inutile).
          </div>
        </div>
        <table class="vtable">
          <tr><th>Grandeur temporelle</th><th>Phaseur complexe</th><th>Module</th><th>Argument</th></tr>
          <tr><td>v(t) = V‚àö2¬∑sin(œât)</td><td class="mono"><u>V</u> = V¬∑e<sup>j0</sup> = V</td><td class="accent">V</td><td class="mono">0¬∞</td></tr>
          <tr><td>i(t) = I‚àö2¬∑sin(œât‚àíœÜ)</td><td class="mono"><u>I</u> = I¬∑e<sup>‚àíjœÜ</sup></td><td class="accent">I</td><td class="mono">‚àíœÜ</td></tr>
        </table>
        <div class="tip">
          <div class="tip-icon">üí°</div>
          <div class="tip-text"><strong>Convention :</strong> On prend souvent la tension comme r√©f√©rence de phase (œÜ·µ• = 0). Le courant est alors en retard de œÜ dans un circuit inductif.</div>
        </div>
      </div>

      <!-- 1.6 D√©rivation -->
      <div class="content-block" id="c-derivation">
        <div class="section-tag">1.6 ‚Äî Op√©rateurs diff√©rentiels</div>
        <h2 class="block-title">D√©rivation et Int√©gration</h2>
        <p class="block-text">C'est ici que la magie op√®re ! En notation complexe, d√©river = multiplier par jœâ, int√©grer = diviser par jœâ.</p>
        <div class="formula-box">
          <span class="formula-label">D√©rivation complexe</span>
          <div class="formula">d/dt [<u>V</u>] = jœâ ¬∑ <u>V</u></div>
          <div class="formula-explain">
            Preuve : si v(t) = V‚àö2¬∑sin(œât + œÜ), sa d√©riv√©e est œâV‚àö2¬∑sin(œât + œÜ + œÄ/2)<br>
            Le facteur e<sup>jœÄ/2</sup> = j, donc multiplier par jœâ augmente le module par œâ et avance la phase de 90¬∞.
          </div>
        </div>
        <div class="formula-box">
          <span class="formula-label">Int√©gration complexe</span>
          <div class="formula">‚à´<u>V</u>dt = <u>V</u> / (jœâ)</div>
          <div class="formula-explain">
            Rappel : 1/j = ‚àíj (voir conjugu√©)<br>
            Donc int√©grer retarde la phase de 90¬∞ et divise le module par œâ.
          </div>
        </div>
        <div class="alert">
          <div class="alert-icon">‚ö†Ô∏è</div>
          <div class="alert-text"><strong>Application directe :</strong> La relation u = L¬∑di/dt devient en complexe <code><u>U</u> = jLœâ¬∑<u>I</u></code>. Et i = C¬∑du/dt devient <code><u>I</u> = jCœâ¬∑<u>U</u></code>, soit <code><u>U</u> = <u>I</u>/(jCœâ)</code>.</div>
        </div>
      </div>

      <!-- 1.7 Calculatrice -->
      <div class="content-block" id="c-calc">
        <div class="section-tag">üßÆ Outil interactif</div>
        <h2 class="block-title">Calculatrice de complexes</h2>
        <div class="calc-box">
          <div class="calc-title">Convertisseur Alg√©brique ‚Üî Polaire <span>OUTIL</span></div>
          <div class="calc-grid">
            <div class="calc-field"><label class="calc-label">Partie r√©elle a</label><input class="calc-input" id="calcA" type="number" value="3" step="0.1"></div>
            <div class="calc-field"><label class="calc-label">Partie imaginaire b</label><input class="calc-input" id="calcB" type="number" value="4" step="0.1"></div>
          </div>
          <button class="calc-btn" onclick="calcComplex()">Calculer ‚Üí</button>
          <div class="calc-result" id="calcResult">
            <div class="result-line"><span class="result-key">Module |Z|</span><span class="result-val" id="rMod">‚Äì</span></div>
            <div class="result-line"><span class="result-key">Argument œÜ (¬∞)</span><span class="result-val" id="rArg">‚Äì</span></div>
            <div class="result-line"><span class="result-key">Argument œÜ (rad)</span><span class="result-val" id="rArgR">‚Äì</span></div>
            <div class="result-line"><span class="result-key">Conjugu√© Z*</span><span class="result-val" id="rConj">‚Äì</span></div>
            <div class="result-line"><span class="result-key">Forme exp.</span><span class="result-val" id="rExp">‚Äì</span></div>
          </div>
        </div>

        <div class="calc-box">
          <div class="calc-title">Multiplication / Division <span>OUTIL</span></div>
          <div class="calc-grid">
            <div class="calc-field"><label class="calc-label">Z‚ÇÅ : partie r√©elle</label><input class="calc-input" id="z1a" type="number" value="1" step="0.1"></div>
            <div class="calc-field"><label class="calc-label">Z‚ÇÅ : partie imaginaire</label><input class="calc-input" id="z1b" type="number" value="1" step="0.1"></div>
            <div class="calc-field"><label class="calc-label">Z‚ÇÇ : partie r√©elle</label><input class="calc-input" id="z2a" type="number" value="1" step="0.1"></div>
            <div class="calc-field"><label class="calc-label">Z‚ÇÇ : partie imaginaire</label><input class="calc-input" id="z2b" type="number" value="-1" step="0.1"></div>
          </div>
          <div style="display:flex;gap:.5rem;margin-top:.5rem;">
            <button class="calc-btn" style="flex:1" onclick="calcProd()">Z‚ÇÅ √ó Z‚ÇÇ</button>
            <button class="calc-btn" style="flex:1;background:var(--bg3);color:var(--accent);border:1px solid var(--accent);" onclick="calcDiv()">Z‚ÇÅ √∑ Z‚ÇÇ</button>
          </div>
          <div class="calc-result" id="prodResult">
            <div class="result-line"><span class="result-key">R√©sultat</span><span class="result-val" id="rProd">‚Äì</span></div>
            <div class="result-line"><span class="result-key">Module</span><span class="result-val" id="rProdMod">‚Äì</span></div>
            <div class="result-line"><span class="result-key">Argument</span><span class="result-val" id="rProdArg">‚Äì</span></div>
          </div>
        </div>
      </div>

      <!-- QCM -->
      <div class="content-block" id="c-qcm">
        <div class="section-tag">üìã Test de connaissance</div>
        <h2 class="block-title">QCM ‚Äî Nombres Complexes</h2>
        <div id="qcm-complexes"></div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê LESSON: SIGNAUX ‚ïê‚ïê‚ïê -->
<div id="lesson-signaux" class="section">
  <button class="back-btn" onclick="showSection('modules')">‚Üê Retour aux modules</button>
  <div class="lesson-layout">
    <aside class="lesson-sidebar">
      <div class="sidebar-title">MODULE 02</div>
      <ul class="sidebar-items">
        <li class="sidebar-item active">2.1 Grandeur sinuso√Ødale</li>
        <li class="sidebar-item" onclick="scrollToId('s-valeurs')">2.2 Valeurs caract√©ristiques</li>
        <li class="sidebar-item" onclick="scrollToId('s-regimes')">2.3 Types de r√©gimes</li>
        <li class="sidebar-item" onclick="scrollToId('s-calc')">üßÆ Calculatrice</li>
        <li class="sidebar-item" onclick="scrollToId('s-qcm')">üìã QCM</li>
      </ul>
    </aside>
    <div class="lesson-content">
      <div class="content-block">
        <div class="section-tag">2.1 ‚Äî D√©finition</div>
        <h2 class="block-title">Signal sinuso√Ødal</h2>
        <div class="formula-box">
          <span class="formula-label">Expression g√©n√©rale</span>
          <div class="formula">s(t) = S<sub>max</sub> ¬∑ sin(œât + œÜ)</div>
          <div class="formula-explain">
            ‚Ä¢ S<sub>max</sub> = valeur cr√™te (maximale)<br>
            ‚Ä¢ œâ = 2œÄf = pulsation en rad/s<br>
            ‚Ä¢ f = 1/T = fr√©quence en Hz<br>
            ‚Ä¢ T = p√©riode en secondes<br>
            ‚Ä¢ œÜ = phase initiale (√† t=0)
          </div>
        </div>
        <div class="tip">
          <div class="tip-icon">üí°</div>
          <div class="tip-text"><strong>En France :</strong> le r√©seau √©lectrique fonctionne √† f = 50 Hz, T = 20 ms, œâ = 2œÄ√ó50 ‚âà 314 rad/s</div>
        </div>
      </div>

      <div class="content-block" id="s-valeurs">
        <div class="section-tag">2.2 ‚Äî Valeurs caract√©ristiques</div>
        <h2 class="block-title">Valeur efficace (RMS)</h2>
        <p class="block-text">La valeur efficace est la grandeur qui produit le <strong>m√™me effet de chauffage</strong> (m√™me √©nergie) qu'une tension continue de m√™me valeur.</p>
        <div class="formula-box">
          <span class="formula-label">Valeur efficace d'un sinuso√Øde</span>
          <div class="formula">S<sub>eff</sub> = S<sub>max</sub> / ‚àö2 ‚âà 0,707 ¬∑ S<sub>max</sub></div>
          <div class="formula-explain">
            <strong>Exemple :</strong> Le r√©seau 230V est la valeur efficace.<br>
            La valeur cr√™te est : U<sub>max</sub> = 230 √ó ‚àö2 ‚âà <strong>325 V</strong>
          </div>
        </div>
        <div class="formula-box">
          <span class="formula-label">Valeur moyenne d'un sinuso√Øde</span>
          <div class="formula">&lt;s&gt; = 0</div>
          <div class="formula-explain">Sur une p√©riode compl√®te, un sinuso√Øde a une valeur moyenne nulle (autant positif que n√©gatif). C'est pour cela qu'on utilise la valeur efficace !</div>
        </div>
        <table class="vtable">
          <tr><th>Grandeur</th><th>Formule</th><th>Unit√©</th><th>Exemple (230V r√©seau)</th></tr>
          <tr><td>P√©riode T</td><td class="mono">T = 1/f</td><td>s</td><td class="accent">20 ms</td></tr>
          <tr><td>Fr√©quence f</td><td class="mono">f = 1/T</td><td>Hz</td><td class="accent">50 Hz</td></tr>
          <tr><td>Pulsation œâ</td><td class="mono">œâ = 2œÄf</td><td>rad/s</td><td class="accent">314 rad/s</td></tr>
          <tr><td>Valeur efficace</td><td class="mono">V = V<sub>max</sub>/‚àö2</td><td>V</td><td class="accent">230 V</td></tr>
          <tr><td>Valeur cr√™te</td><td class="mono">V<sub>max</sub> = V‚àö2</td><td>V</td><td class="accent">‚âà 325 V</td></tr>
        </table>
      </div>

      <div class="content-block" id="s-regimes">
        <div class="section-tag">2.3 ‚Äî Types de r√©gimes</div>
        <h2 class="block-title">R√©gimes √©lectriques</h2>
        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">‚ö° R√©gime continu (DC)</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p>La tension/courant ne change pas de signe ou est constante. Exemple : batteries, piles.</p>
            <div class="formula-box">
              <div class="formula">P = U¬∑I = R¬∑I¬≤</div>
              <div class="formula-explain">La puissance est simple √† calculer. I<sub>max</sub> = E/R<sub>s</sub> en court-circuit, U = E en circuit ouvert.</div>
            </div>
          </div>
        </div>
        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">üåä R√©gime transitoire</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p>√âvolutions lors d'une modification brutale du circuit (ouverture/fermeture d'un interrupteur). Exemple : charge d'un condensateur.</p>
            <p style="margin-top:.75rem;">Ces r√©gimes disparaissent apr√®s un temps appel√© <strong>constante de temps œÑ</strong> et laissent place au r√©gime permanent.</p>
          </div>
        </div>
        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">„Äú R√©gime sinuso√Ødal permanent (AC)</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p>C'est le r√©gime le plus important en √©lectrotechnique. Les grandeurs oscillent √† fr√©quence constante ind√©finiment. C'est le r√©gime du r√©seau √©lectrique (50 Hz).</p>
            <ul>
              <li>Transformateurs et machines ont un rendement optimal</li>
              <li>Le transport sous haute tension est possible</li>
              <li>Les calculs se font avec la notation complexe (phaseurs)</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="content-block" id="s-calc">
        <div class="section-tag">üßÆ Outil interactif</div>
        <h2 class="block-title">Calculatrice signal sinuso√Ødal</h2>
        <div class="calc-box">
          <div class="calc-title">Param√®tres d'un signal <span>OUTIL</span></div>
          <div class="calc-grid">
            <div class="calc-field"><label class="calc-label">Valeur cr√™te S_max</label><input class="calc-input" id="sMax" type="number" value="325" step="1"></div>
            <div class="calc-field"><label class="calc-label">Fr√©quence f (Hz)</label><input class="calc-input" id="sFreq" type="number" value="50" step="1"></div>
          </div>
          <button class="calc-btn" onclick="calcSignal()">Calculer ‚Üí</button>
          <div class="calc-result" id="signalResult">
            <div class="result-line"><span class="result-key">Valeur efficace (RMS)</span><span class="result-val" id="sEff">‚Äì</span></div>
            <div class="result-line"><span class="result-key">P√©riode T</span><span class="result-val" id="sPeriod">‚Äì</span></div>
            <div class="result-line"><span class="result-key">Pulsation œâ</span><span class="result-val" id="sOmega">‚Äì</span></div>
            <div class="result-line"><span class="result-key">Expression temporelle</span><span class="result-val" id="sExpr">‚Äì</span></div>
          </div>
        </div>
      </div>

      <div class="content-block" id="s-qcm">
        <div class="section-tag">üìã Test de connaissance</div>
        <h2 class="block-title">QCM ‚Äî Signaux Sinuso√Ødaux</h2>
        <div id="qcm-signaux"></div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê LESSON: IMPEDANCES ‚ïê‚ïê‚ïê -->
<div id="lesson-impedances" class="section">
  <button class="back-btn" onclick="showSection('modules')">‚Üê Retour aux modules</button>
  <div class="lesson-layout">
    <aside class="lesson-sidebar">
      <div class="sidebar-title">MODULE 03</div>
      <ul class="sidebar-items">
        <li class="sidebar-item active">3.1 Lois de Kirchhoff</li>
        <li class="sidebar-item" onclick="scrollToId('i-composants')">3.2 R, L, C en complexe</li>
        <li class="sidebar-item" onclick="scrollToId('i-associations')">3.3 Associations</li>
        <li class="sidebar-item" onclick="scrollToId('i-calc')">üßÆ Calculatrice</li>
        <li class="sidebar-item" onclick="scrollToId('i-qcm')">üìã QCM</li>
      </ul>
    </aside>
    <div class="lesson-content">
      <div class="content-block">
        <div class="section-tag">3.1 ‚Äî Fondements</div>
        <h2 class="block-title">Lois de Kirchhoff</h2>
        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">üîÅ Loi des mailles (KVL)</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p><strong>√ânonc√© :</strong> La somme des tensions orient√©es le long d'une maille est nulle.</p>
            <div class="formula-box">
              <div class="formula">‚àë tensions d'une maille = 0</div>
              <div class="formula-explain">Exemple : u‚ÇÅ ‚àí u‚ÇÇ ‚àí u‚ÇÉ + u‚ÇÑ = 0<br>On respecte les signes selon le sens de parcours.</div>
            </div>
            <div class="alert">
              <div class="alert-icon">‚ö†Ô∏è</div>
              <div class="alert-text"><strong>Important :</strong> Cette loi s'applique en valeurs instantan√©es ou en notation complexe, mais PAS directement en valeurs efficaces scalaires (sauf si tout est en phase).</div>
            </div>
          </div>
        </div>
        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">üîÄ Loi des n≈ìuds (KCL)</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p><strong>√ânonc√© :</strong> La somme des courants entrant/sortant d'un n≈ìud est nulle.</p>
            <div class="formula-box">
              <div class="formula">‚àë courants √† un n≈ìud = 0</div>
              <div class="formula-explain">Exemple : i‚ÇÅ + i‚ÇÇ + i‚ÇÉ ‚àí i‚ÇÑ = 0<br>Courants entrants positifs, sortants n√©gatifs (ou l'inverse, selon convention).</div>
            </div>
          </div>
        </div>
        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">üìê Convention g√©n√©rateur vs r√©cepteur</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p><strong>Convention g√©n√©rateur :</strong> U et I sont dans le m√™me sens. P = U¬∑I > 0 ‚üπ le dip√¥le fournit de la puissance.</p>
            <p style="margin-top:.75rem;"><strong>Convention r√©cepteur :</strong> U et I sont de sens oppos√©s. P = U¬∑I > 0 ‚üπ le dip√¥le re√ßoit de la puissance.</p>
            <p style="margin-top:.75rem;">R, L, C sont naturellement en convention r√©cepteur.</p>
          </div>
        </div>
      </div>

      <div class="content-block" id="i-composants">
        <div class="section-tag">3.2 ‚Äî Composants en complexe</div>
        <h2 class="block-title">R, L, C : imp√©dances complexes</h2>
        <p class="block-text">En r√©gime sinuso√Ødal, la loi d'Ohm g√©n√©ralis√©e s'√©crit : <strong><u>U</u> = <u>Z</u> ¬∑ <u>I</u></strong></p>
        <table class="vtable">
          <tr><th>Composant</th><th>Relation u(t)/i(t)</th><th>Imp√©dance complexe Z</th><th>D√©phasage œÜ</th></tr>
          <tr>
            <td><strong>R√©sistance R</strong></td>
            <td class="mono">u = R¬∑i</td>
            <td class="mono accent"><u>Z</u><sub>R</sub> = R</td>
            <td>œÜ = 0 (en phase)</td>
          </tr>
          <tr>
            <td><strong>Inductance L</strong></td>
            <td class="mono">u = L¬∑di/dt</td>
            <td class="mono accent"><u>Z</u><sub>L</sub> = jLœâ</td>
            <td>œÜ = +90¬∞ (U en avance)</td>
          </tr>
          <tr>
            <td><strong>Condensateur C</strong></td>
            <td class="mono">i = C¬∑du/dt</td>
            <td class="mono accent"><u>Z</u><sub>C</sub> = 1/(jCœâ)</td>
            <td>œÜ = ‚àí90¬∞ (I en avance)</td>
          </tr>
        </table>

        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">üßÆ D√©monstration pour l'inductance</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p>En temporel : <strong>u(t) = L¬∑di/dt</strong></p>
            <p style="margin-top:.75rem;">Si i(t) = I‚àö2¬∑sin(œât), alors di/dt = Iœâ‚àö2¬∑cos(œât) = Iœâ‚àö2¬∑sin(œât + œÄ/2)</p>
            <p style="margin-top:.75rem;">En complexe :</p>
            <ul>
              <li><u>I</u> = I¬∑e<sup>j0</sup> = I (r√©f√©rence de phase)</li>
              <li>d/dt[<u>I</u>] = jœâ¬∑<u>I</u></li>
              <li><u>U</u> = L¬∑jœâ¬∑<u>I</u> = <strong>jLœâ ¬∑ <u>I</u></strong></li>
            </ul>
            <p style="margin-top:.75rem;">Donc Z<sub>L</sub> = jLœâ. Le j signifie que la tension est en avance de 90¬∞ sur le courant.</p>
          </div>
        </div>

        <div class="tip">
          <div class="tip-icon">üí°</div>
          <div class="tip-text">
            <strong>Moyen mn√©motechnique :</strong><br>
            <code>ICE</code> ‚Üí pour le <strong>C</strong>ondensateur : <strong>I</strong> en avance sur <strong>E</strong> (tension)<br>
            <code>ELI</code> ‚Üí pour l'inductance <strong>L</strong> : <strong>E</strong> (tension) en avance sur <strong>I</strong>
          </div>
        </div>

        <div class="formula-box">
          <span class="formula-label">Notation condens√©e ‚Äî R√©actances</span>
          <div class="formula">
            X<sub>L</sub> = Lœâ &nbsp;&nbsp; (r√©actance inductive, Œ©)<br>
            X<sub>C</sub> = 1/(Cœâ) &nbsp;&nbsp; (r√©actance capacitive, Œ©)<br><br>
            <u>Z</u> = R + jX &nbsp;&nbsp; avec X = X<sub>L</sub> ‚àí X<sub>C</sub>
          </div>
        </div>
      </div>

      <div class="content-block" id="i-associations">
        <div class="section-tag">3.3 ‚Äî Associations</div>
        <h2 class="block-title">S√©rie et Parall√®le</h2>
        <div class="formula-box">
          <span class="formula-label">Association s√©rie</span>
          <div class="formula"><u>Z</u><sub>√©q</sub> = <u>Z</u>‚ÇÅ + <u>Z</u>‚ÇÇ + ... + <u>Z</u><sub>n</sub></div>
          <div class="formula-explain">On additionne les imp√©dances complexes (parties r√©elles + parties imaginaires s√©par√©ment).</div>
        </div>
        <div class="formula-box">
          <span class="formula-label">Association parall√®le (2 imp√©dances)</span>
          <div class="formula"><u>Z</u><sub>√©q</sub> = (<u>Z</u>‚ÇÅ ¬∑ <u>Z</u>‚ÇÇ) / (<u>Z</u>‚ÇÅ + <u>Z</u>‚ÇÇ)</div>
          <div class="formula-explain">M√™me r√®gle que pour les r√©sistances, mais avec des complexes !</div>
        </div>
        <div class="example-box">
          <span class="example-label">Exemple s√©rie RLC</span>
          <p><u>Z</u> = R + jLœâ + 1/(jCœâ) = R + j(Lœâ ‚àí 1/Cœâ)</p>
          <p>|Z| = ‚àö(R¬≤ + (Lœâ ‚àí 1/Cœâ)¬≤)</p>
          <p>œÜ = arctan((Lœâ ‚àí 1/Cœâ)/R)</p>
        </div>
      </div>

      <div class="content-block" id="i-calc">
        <div class="section-tag">üßÆ Outil interactif</div>
        <h2 class="block-title">Calculatrice d'imp√©dance</h2>
        <div class="calc-box">
          <div class="calc-title">Circuit RLC s√©rie <span>OUTIL</span></div>
          <div class="calc-grid">
            <div class="calc-field"><label class="calc-label">R (Œ©)</label><input class="calc-input" id="iR" type="number" value="10" step="1"></div>
            <div class="calc-field"><label class="calc-label">L (mH)</label><input class="calc-input" id="iL" type="number" value="100" step="1"></div>
            <div class="calc-field"><label class="calc-label">C (¬µF)</label><input class="calc-input" id="iC" type="number" value="100" step="1"></div>
            <div class="calc-field"><label class="calc-label">f (Hz)</label><input class="calc-input" id="iF" type="number" value="50" step="1"></div>
          </div>
          <button class="calc-btn" onclick="calcImpedance()">Calculer ‚Üí</button>
          <div class="calc-result" id="impedanceResult">
            <div class="result-line"><span class="result-key">R√©actance XL</span><span class="result-val" id="iXL">‚Äì</span></div>
            <div class="result-line"><span class="result-key">R√©actance XC</span><span class="result-val" id="iXC">‚Äì</span></div>
            <div class="result-line"><span class="result-key">X total = XL ‚àí XC</span><span class="result-val" id="iX">‚Äì</span></div>
            <div class="result-line"><span class="result-key">Imp√©dance Z = R + jX</span><span class="result-val" id="iZ">‚Äì</span></div>
            <div class="result-line"><span class="result-key">Module |Z|</span><span class="result-val" id="iMod">‚Äì</span></div>
            <div class="result-line"><span class="result-key">D√©phasage œÜ</span><span class="result-val" id="iPhi">‚Äì</span></div>
            <div class="result-line"><span class="result-key">Caract√®re</span><span class="result-val" id="iChar">‚Äì</span></div>
          </div>
        </div>
      </div>

      <div class="content-block" id="i-qcm">
        <div class="section-tag">üìã Test de connaissance</div>
        <h2 class="block-title">QCM ‚Äî Imp√©dances</h2>
        <div id="qcm-impedances"></div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê LESSON: PUISSANCES ‚ïê‚ïê‚ïê -->
<div id="lesson-puissances" class="section">
  <button class="back-btn" onclick="showSection('modules')">‚Üê Retour aux modules</button>
  <div class="lesson-layout">
    <aside class="lesson-sidebar">
      <div class="sidebar-title">MODULE 04</div>
      <ul class="sidebar-items">
        <li class="sidebar-item active">4.1 Les 3 puissances</li>
        <li class="sidebar-item" onclick="scrollToId('p-complexe')">4.2 Puissance complexe</li>
        <li class="sidebar-item" onclick="scrollToId('p-triangle')">4.3 Triangle des puissances</li>
        <li class="sidebar-item" onclick="scrollToId('p-calc')">üßÆ Calculatrice</li>
        <li class="sidebar-item" onclick="scrollToId('p-qcm')">üìã QCM</li>
      </ul>
    </aside>
    <div class="lesson-content">
      <div class="content-block">
        <div class="section-tag">4.1 ‚Äî Les 3 puissances</div>
        <h2 class="block-title">Puissances √©lectriques en AC</h2>
        <p class="block-text">Pour un dip√¥le avec v(t) = V‚àö2¬∑sin(œât) et i(t) = I‚àö2¬∑sin(œât ‚àí œÜ) :</p>

        <table class="vtable">
          <tr><th>Puissance</th><th>Symbole</th><th>Formule</th><th>Unit√©</th><th>Signification</th></tr>
          <tr>
            <td><strong>Active</strong></td>
            <td class="accent">P</td>
            <td class="mono">V¬∑I¬∑cosœÜ</td>
            <td>Watt (W)</td>
            <td>√ânergie r√©ellement consomm√©e (chaleur, m√©canique)</td>
          </tr>
          <tr>
            <td><strong>R√©active</strong></td>
            <td class="accent">Q</td>
            <td class="mono">V¬∑I¬∑sinœÜ</td>
            <td>VAr</td>
            <td>√ânergie stock√©e/restitu√©e (L, C) ‚Äî aucun travail utile</td>
          </tr>
          <tr>
            <td><strong>Apparente</strong></td>
            <td class="accent">S</td>
            <td class="mono">V¬∑I</td>
            <td>VA</td>
            <td>Puissance totale "vue" par le g√©n√©rateur</td>
          </tr>
        </table>

        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">üìê D√©monstration de P = VI¬∑cosœÜ</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p>La puissance instantan√©e :</p>
            <p>p(t) = v(t)¬∑i(t) = V‚àö2¬∑sin(œât) √ó I‚àö2¬∑sin(œât‚àíœÜ)</p>
            <p style="margin-top:.5rem;">En d√©veloppant avec la formule produit-somme :</p>
            <p>p(t) = VI¬∑cosœÜ ‚àí VI¬∑cos(2œât‚àíœÜ)</p>
            <p style="margin-top:.5rem;">La valeur moyenne (sur une p√©riode) :</p>
            <p>P = &lt;p(t)&gt; = VI¬∑cosœÜ (car &lt;cos(2œât‚àíœÜ)&gt; = 0)</p>
          </div>
        </div>

        <div class="formula-box">
          <span class="formula-label">Facteur de puissance</span>
          <div class="formula">k = cosœÜ = P/S</div>
          <div class="formula-explain">
            ‚Ä¢ cosœÜ = 1 ‚Üí charge purement r√©sistive (P = S) ‚Äî id√©al<br>
            ‚Ä¢ cosœÜ = 0 ‚Üí charge purement r√©active (P = 0) ‚Äî aucun travail utile<br>
            ‚Ä¢ 0 &lt; cosœÜ &lt; 1 ‚Üí cas r√©el (moteurs, transformateurs)<br><br>
            <strong>Relation fondamentale :</strong> S¬≤ = P¬≤ + Q¬≤
          </div>
        </div>
      </div>

      <div class="content-block" id="p-complexe">
        <div class="section-tag">4.2 ‚Äî Puissance complexe</div>
        <h2 class="block-title">La puissance complexe <u>S</u></h2>
        <div class="formula-box">
          <span class="formula-label">D√©finition</span>
          <div class="formula"><u>S</u> = <u>V</u> ¬∑ <u>I</u>* = P + jQ</div>
          <div class="formula-explain">
            <u>I</u>* est le conjugu√© de <u>I</u>. Cette d√©finition avec le conjugu√© est cruciale !<br>
            ‚Ä¢ Re(<u>S</u>) = P (puissance active)<br>
            ‚Ä¢ Im(<u>S</u>) = Q (puissance r√©active)<br>
            ‚Ä¢ |<u>S</u>| = S (puissance apparente)
          </div>
        </div>
        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">üßÆ Autres expressions de S</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <div class="formula-box">
              <div class="formula">
                <u>S</u> = <u>Z</u> ¬∑ I¬≤ &nbsp;&nbsp; (avec I = |<u>I</u>|)<br>
                <u>S</u> = V¬≤/<u>Z</u>* &nbsp;&nbsp; (avec V = |<u>V</u>|)
              </div>
              <div class="formula-explain">
                Pour une imp√©dance Z = R + jX :<br>
                <u>S</u> = (R + jX)¬∑I¬≤ = RI¬≤ + jXI¬≤<br>
                donc P = RI¬≤ et Q = XI¬≤<br><br>
                Si X &gt; 0 (inductif) ‚Üí Q &gt; 0 (consomme du r√©actif)<br>
                Si X &lt; 0 (capacitif) ‚Üí Q &lt; 0 (produit du r√©actif)
              </div>
            </div>
          </div>
        </div>
        <table class="vtable">
          <tr><th>Composant</th><th>P</th><th>Q</th><th>S</th></tr>
          <tr><td>R√©sistance R</td><td class="accent">RI¬≤ = U¬≤/R</td><td class="mono">0</td><td class="accent">RI¬≤</td></tr>
          <tr><td>Inductance L</td><td class="mono">0</td><td class="accent">+LœâI¬≤</td><td class="accent">LœâI¬≤</td></tr>
          <tr><td>Condensateur C</td><td class="mono">0</td><td class="accent">‚àíI¬≤/(Cœâ)</td><td class="accent">I¬≤/(Cœâ)</td></tr>
          <tr><td>Dip√¥le s√©rie R+jX</td><td class="accent">RI¬≤</td><td class="accent">XI¬≤</td><td class="mono">‚àö(P¬≤+Q¬≤)</td></tr>
        </table>
      </div>

      <div class="content-block" id="p-triangle">
        <div class="section-tag">4.3 ‚Äî Triangle des puissances</div>
        <h2 class="block-title">Visualisation g√©om√©trique</h2>
        <div class="diagram-container">
          <span class="diagram-label">Triangle des puissances (œÜ &gt; 0 : inductif)</span>
          <svg class="diagram" viewBox="0 0 400 220">
            <defs>
              <marker id="arrow" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
                <path d="M0,0 L0,6 L8,3 z" fill="#e8f428"/>
              </marker>
            </defs>
            <!-- S hypotenuse -->
            <line x1="60" y1="160" x2="320" y2="60" stroke="#e8f428" stroke-width="2.5" marker-end="url(#arrow)"/>
            <text x="195" y="90" fill="#e8f428" font-size="18" font-weight="bold" font-family="Space Mono" transform="rotate(-22,195,90)">S (VA)</text>
            <!-- P horizontal -->
            <line x1="60" y1="160" x2="320" y2="160" stroke="#3af4c8" stroke-width="2.5" marker-end="url(#arrow)"/>
            <text x="180" y="180" fill="#3af4c8" font-size="16" font-weight="bold" font-family="Space Mono">P (W)</text>
            <!-- Q vertical -->
            <line x1="320" y1="160" x2="320" y2="60" stroke="#ff5e3a" stroke-width="2.5" marker-end="url(#arrow)"/>
            <text x="330" y="115" fill="#ff5e3a" font-size="16" font-weight="bold" font-family="Space Mono">Q (VAr)</text>
            <!-- angle arc -->
            <path d="M 100,160 A 40,40 0 0,1 121,141" fill="none" stroke="#888" stroke-width="1.5"/>
            <text x="103" y="148" fill="#8888aa" font-size="13" font-family="Space Mono">œÜ</text>
            <!-- formulas -->
            <text x="60" y="205" fill="#8888aa" font-size="12" font-family="Space Mono">S¬≤ = P¬≤ + Q¬≤    cosœÜ = P/S    sinœÜ = Q/S</text>
          </svg>
        </div>
        <div class="tip">
          <div class="tip-icon">üí°</div>
          <div class="tip-text"><strong>Int√©r√™t industriel :</strong> Un cosœÜ faible (proche de 0) signifie que S >> P. Le distributeur d'√©nergie doit fournir beaucoup de puissance apparente pour peu de travail utile. On installe des condensateurs pour "compenser" le r√©actif et relever le cosœÜ.</div>
        </div>
      </div>

      <div class="content-block" id="p-calc">
        <div class="section-tag">üßÆ Outil interactif</div>
        <h2 class="block-title">Calculatrice des puissances</h2>
        <div class="calc-box">
          <div class="calc-title">Calcul P, Q, S, cosœÜ <span>OUTIL</span></div>
          <div class="calc-grid">
            <div class="calc-field"><label class="calc-label">Tension V (V eff.)</label><input class="calc-input" id="pV" type="number" value="230" step="1"></div>
            <div class="calc-field"><label class="calc-label">Courant I (A eff.)</label><input class="calc-input" id="pI" type="number" value="10" step="0.1"></div>
            <div class="calc-field"><label class="calc-label">D√©phasage œÜ (¬∞)</label><input class="calc-input" id="pPhi" type="number" value="30" step="1"></div>
          </div>
          <button class="calc-btn" onclick="calcPower()">Calculer ‚Üí</button>
          <div class="calc-result" id="powerResult">
            <div class="result-line"><span class="result-key">Puissance active P</span><span class="result-val" id="pP">‚Äì</span></div>
            <div class="result-line"><span class="result-key">Puissance r√©active Q</span><span class="result-val" id="pQ">‚Äì</span></div>
            <div class="result-line"><span class="result-key">Puissance apparente S</span><span class="result-val" id="pS">‚Äì</span></div>
            <div class="result-line"><span class="result-key">Facteur de puissance cosœÜ</span><span class="result-val" id="pCos">‚Äì</span></div>
            <div class="result-line"><span class="result-key">V√©rification S¬≤=P¬≤+Q¬≤</span><span class="result-val" id="pVerif">‚Äì</span></div>
          </div>
        </div>
      </div>

      <div class="content-block" id="p-qcm">
        <div class="section-tag">üìã Test de connaissance</div>
        <h2 class="block-title">QCM ‚Äî Puissances</h2>
        <div id="qcm-puissances"></div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê LESSON: METHODOLOGIE ‚ïê‚ïê‚ïê -->
<div id="lesson-methodologie" class="section">
  <button class="back-btn" onclick="showSection('modules')">‚Üê Retour aux modules</button>
  <div class="lesson-layout">
    <aside class="lesson-sidebar">
      <div class="sidebar-title">MODULE 05</div>
      <ul class="sidebar-items">
        <li class="sidebar-item active">5.1 M√©thode g√©n√©rale</li>
        <li class="sidebar-item" onclick="scrollToId('m-ex1')">5.2 Exemple 1 : RL s√©rie</li>
        <li class="sidebar-item" onclick="scrollToId('m-ex2')">5.3 Exemple 2 : RLC</li>
        <li class="sidebar-item" onclick="scrollToId('m-qcm')">üìã QCM final</li>
      </ul>
    </aside>
    <div class="lesson-content">
      <div class="content-block">
        <div class="section-tag">5.1 ‚Äî M√©thode</div>
        <h2 class="block-title">R√©soudre un circuit AC</h2>
        <p class="block-text">Voici la m√©thode syst√©matique pour analyser n'importe quel circuit en r√©gime sinuso√Ødal permanent :</p>

        <div style="display:flex;flex-direction:column;gap:1rem;margin:1.5rem 0;">
          <div style="display:flex;gap:1rem;align-items:flex-start;">
            <div style="background:var(--accent);color:var(--bg);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-weight:800;flex-shrink:0;">1</div>
            <div><strong style="color:var(--text);">Identifier les donn√©es</strong><br><span style="color:var(--text2);font-size:.9rem;">Tension source, fr√©quence, composants (R, L, C). Choisir œÜ·µ• = 0 (tension r√©f√©rence).</span></div>
          </div>
          <div style="display:flex;gap:1rem;align-items:flex-start;">
            <div style="background:var(--accent);color:var(--bg);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-weight:800;flex-shrink:0;">2</div>
            <div><strong style="color:var(--text);">Calculer les imp√©dances complexes</strong><br><span style="color:var(--text2);font-size:.9rem;">Z_R = R, Z_L = jLœâ, Z_C = 1/(jCœâ) = ‚àíj/(Cœâ)</span></div>
          </div>
          <div style="display:flex;gap:1rem;align-items:flex-start;">
            <div style="background:var(--accent);color:var(--bg);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-weight:800;flex-shrink:0;">3</div>
            <div><strong style="color:var(--text);">Calculer l'imp√©dance totale</strong><br><span style="color:var(--text2);font-size:.9rem;">Associer s√©rie/parall√®le. R√©sultat = R_eq + jX_eq</span></div>
          </div>
          <div style="display:flex;gap:1rem;align-items:flex-start;">
            <div style="background:var(--accent);color:var(--bg);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-weight:800;flex-shrink:0;">4</div>
            <div><strong style="color:var(--text);">Calculer le courant complexe</strong><br><span style="color:var(--text2);font-size:.9rem;"><u>I</u> = <u>V</u> / <u>Z</u> (loi d'Ohm g√©n√©ralis√©e)</span></div>
          </div>
          <div style="display:flex;gap:1rem;align-items:flex-start;">
            <div style="background:var(--accent);color:var(--bg);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-weight:800;flex-shrink:0;">5</div>
            <div><strong style="color:var(--text);">Calculer les tensions partielles</strong><br><span style="color:var(--text2);font-size:.9rem;"><u>U</u>_R = R¬∑<u>I</u>, <u>U</u>_L = jLœâ¬∑<u>I</u>, etc.</span></div>
          </div>
          <div style="display:flex;gap:1rem;align-items:flex-start;">
            <div style="background:var(--accent);color:var(--bg);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-weight:800;flex-shrink:0;">6</div>
            <div><strong style="color:var(--text);">Calculer les puissances</strong><br><span style="color:var(--text2);font-size:.9rem;">P = V¬∑I¬∑cosœÜ, Q = V¬∑I¬∑sinœÜ, S = V¬∑I</span></div>
          </div>
          <div style="display:flex;gap:1rem;align-items:flex-start;">
            <div style="background:var(--accent3);color:var(--bg);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-weight:800;flex-shrink:0;">‚úì</div>
            <div><strong style="color:var(--accent3);">V√©rifier avec la loi des mailles</strong><br><span style="color:var(--text2);font-size:.9rem;"><u>V</u>_source = <u>U</u>_R + <u>U</u>_L + <u>U</u>_C (en complexe !)</span></div>
          </div>
        </div>
      </div>

      <div class="content-block" id="m-ex1">
        <div class="section-tag">5.2 ‚Äî Exemple complet</div>
        <h2 class="block-title">Exemple 1 : Circuit RL s√©rie</h2>
        <div class="example-box">
          <span class="example-label">√ânonc√©</span>
          <p>Circuit RL s√©rie aliment√© par v(t) = 230‚àö2¬∑sin(100œÄt) V</p>
          <p>R = 10 Œ©, L = 50 mH. Trouver i(t), P, Q, S, cosœÜ.</p>
        </div>

        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">√âtape 1 ‚Äî Donn√©es et phaseur de tension</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p>f = 50 Hz ‚Üí œâ = 2œÄ√ó50 = 100œÄ ‚âà 314 rad/s</p>
            <p>V = 230 V (valeur efficace)</p>
            <p>Phaseur tension : <u>V</u> = 230¬∑e<sup>j0</sup> = 230 V (r√©f√©rence)</p>
          </div>
        </div>
        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">√âtape 2 ‚Äî Imp√©dances complexes</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p>Z_R = R = 10 Œ©</p>
            <p>Z_L = jLœâ = j √ó 0,050 √ó 314 = j15,7 Œ©</p>
            <p><strong>Z_total = 10 + j15,7 Œ©</strong></p>
          </div>
        </div>
        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">√âtape 3 ‚Äî Module et argument de Z</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p>|Z| = ‚àö(10¬≤ + 15,7¬≤) = ‚àö(100 + 246,5) = ‚àö346,5 ‚âà 18,6 Œ©</p>
            <p>œÜ = arctan(15,7/10) = arctan(1,57) ‚âà 57,5¬∞</p>
          </div>
        </div>
        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">√âtape 4 ‚Äî Courant complexe</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p><u>I</u> = <u>V</u> / <u>Z</u> = 230 / (10 + j15,7)</p>
            <p>|<u>I</u>| = 230 / 18,6 ‚âà <strong>12,4 A</strong></p>
            <p>arg(<u>I</u>) = 0¬∞ ‚àí 57,5¬∞ = <strong>‚àí57,5¬∞</strong> (courant en retard : circuit inductif)</p>
            <p style="margin-top:.75rem;"><strong>Forme temporelle :</strong></p>
            <p>i(t) = 12,4‚àö2 ¬∑ sin(100œÄt ‚àí 57,5¬∞) ‚âà 17,5¬∑sin(100œÄt ‚àí 57,5¬∞) A</p>
          </div>
        </div>
        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">√âtape 5 ‚Äî Puissances</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p>cosœÜ = cos(57,5¬∞) ‚âà 0,537</p>
            <p>P = V¬∑I¬∑cosœÜ = 230 √ó 12,4 √ó 0,537 ‚âà <strong>1531 W</strong></p>
            <p>sinœÜ = sin(57,5¬∞) ‚âà 0,843</p>
            <p>Q = V¬∑I¬∑sinœÜ = 230 √ó 12,4 √ó 0,843 ‚âà <strong>2403 VAr</strong></p>
            <p>S = V¬∑I = 230 √ó 12,4 ‚âà <strong>2852 VA</strong></p>
            <p style="margin-top:.75rem;">V√©rif : ‚àö(1531¬≤ + 2403¬≤) = ‚àö(2344361 + 5774409) = ‚àö8118770 ‚âà 2849 ‚âà 2852 ‚úì</p>
          </div>
        </div>
      </div>

      <div class="content-block" id="m-ex2">
        <div class="section-tag">5.3 ‚Äî Exemple avanc√©</div>
        <h2 class="block-title">Exemple 2 : Circuit RLC s√©rie</h2>
        <div class="example-box">
          <span class="example-label">√ânonc√©</span>
          <p>V = 100 V, f = 50 Hz, R = 5 Œ©, L = 30 mH, C = 150 ¬µF</p>
          <p>Trouver I, œÜ, P, Q, S. Le circuit est-il inductif ou capacitif ?</p>
        </div>
        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">Solution compl√®te pas √† pas</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p><strong>œâ = 2œÄ√ó50 = 314 rad/s</strong></p>
            <p style="margin-top:.5rem;">X_L = Lœâ = 0,03 √ó 314 = <strong>9,42 Œ©</strong></p>
            <p>X_C = 1/(Cœâ) = 1/(150√ó10‚Åª‚Å∂ √ó 314) = 1/0,0471 = <strong>21,2 Œ©</strong></p>
            <p style="margin-top:.5rem;">X = X_L ‚àí X_C = 9,42 ‚àí 21,2 = <strong>‚àí11,8 Œ©</strong> (n√©gatif ‚Üí capacitif !)</p>
            <p><u>Z</u> = 5 ‚àí j11,8</p>
            <p>|Z| = ‚àö(5¬≤ + 11,8¬≤) = ‚àö(25 + 139,2) = ‚àö164,2 ‚âà <strong>12,8 Œ©</strong></p>
            <p>œÜ = arctan(‚àí11,8/5) = arctan(‚àí2,36) ‚âà <strong>‚àí67¬∞</strong> (capacitif : courant en avance)</p>
            <p style="margin-top:.75rem;">I = V/|Z| = 100/12,8 ‚âà <strong>7,81 A</strong></p>
            <p style="margin-top:.5rem;">P = RI¬≤ = 5 √ó 7,81¬≤ ‚âà <strong>305 W</strong></p>
            <p>Q = XI¬≤ = ‚àí11,8 √ó 7,81¬≤ ‚âà <strong>‚àí719 VAr</strong> (n√©gatif : produit du r√©actif)</p>
            <p>S = V¬∑I = 100 √ó 7,81 = <strong>781 VA</strong></p>
            <p>cosœÜ = cos(67¬∞) ‚âà <strong>0,39</strong></p>
          </div>
        </div>
        <div class="alert">
          <div class="alert-icon">üí°</div>
          <div class="alert-text"><strong>Conclusion :</strong> Q &lt; 0 ‚Üí circuit capacitif. Le condensateur domine l'inductance. Le courant est en avance sur la tension. Pour relever le cosœÜ, on ajouterait une inductance.</div>
        </div>
      </div>

      <div class="content-block" id="m-qcm">
        <div class="section-tag">üìã QCM Final</div>
        <h2 class="block-title">QCM ‚Äî M√©thodologie & Synth√®se</h2>
        <div id="qcm-methodologie"></div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- MODULE 06 ‚Äî SYST√àMES TRIPHAS√âS -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="lesson-triphas√©" class="section">
  <div class="lesson-wrap">
    <aside class="sidebar">
      <button class="back-btn" onclick="showHome()">‚Üê Accueil</button>
      <div class="sidebar-title">MODULE 06</div>
      <ul class="sidebar-nav">
        <li><a href="#tri-intro">Syst√®me triphas√©</a></li>
        <li><a href="#tri-tensions">Tensions simples & compos√©es</a></li>
        <li><a href="#tri-recepteur">R√©cepteur √©toile</a></li>
        <li><a href="#tri-triangle">R√©cepteur triangle</a></li>
        <li><a href="#tri-resume">Tableau r√©capitulatif</a></li>
        <li><a href="#tri-boucherot">Th√©or√®me de Boucherot</a></li>
        <li><a href="#tri-compensation">Compensation de Q</a></li>
        <li><a href="#tri-exercices">Exercices</a></li>
        <li><a href="#tri-desequilibre">D√©s√©quilibre</a></li>
        <li><a href="#tri-synthese">Synth√®se</a></li>
        <li><a href="#tri-qcm">QCM</a></li>
      </ul>
    </aside>
    <main class="lesson-main">
      <div class="lesson-header">
        <div class="lesson-num">MODULE 06</div>
        <h1 class="lesson-title">Syst√®mes Triphas√©s</h1>
        <p class="lesson-intro">Le triphas√© est le standard mondial de la distribution d'√©nergie √©lectrique. Il permet de transporter trois fois plus de puissance avec seulement 50% de conducteurs suppl√©mentaires par rapport au monophas√©, et offre une puissance instantan√©e <strong>parfaitement constante</strong> ‚Äî aucune vibration m√©canique dans les moteurs.</p>
      </div>

      <!-- SECTION 1: INTRO TRIPHAS√â -->
      <div class="block" id="tri-intro">
        <h2 class="block-title">1. Pr√©sentation du syst√®me triphas√©</h2>
        <p>Un r√©seau triphas√© comprend <strong>3 phases</strong> (not√©es 1,2,3 ou A,B,C ou R,S,T) et un neutre N. On distingue :</p>
        <div class="formula-box">
          <div class="formula-sym">‚ö°</div>
          <p><strong>Syst√®me √©quilibr√© direct :</strong> Trois tensions sinuso√Ødales de m√™me amplitude V, d√©phas√©es entre elles de <strong>120¬∞ = 2œÄ/3 rad</strong>.</p>
        </div>
        <div class="example-box">
          <div class="example-label">Vecteurs de Fresnel (tensions simples)</div>
          <div style="text-align:center;margin:1rem 0">
            <svg viewBox="-180 -160 360 320" width="300" height="260" style="display:inline-block">
              <!-- Axes -->
              <line x1="-170" y1="0" x2="170" y2="0" stroke="#444" stroke-width="1"/>
              <line x1="0" y1="-150" x2="0" y2="150" stroke="#444" stroke-width="1"/>
              <!-- V1 (0¬∞) -->
              <line x1="0" y1="0" x2="120" y2="0" stroke="#e8f428" stroke-width="2.5"/>
              <polygon points="120,0 108,-5 108,5" fill="#e8f428"/>
              <text x="128" y="5" fill="#e8f428" font-size="13" font-family="Space Mono">V‚ÇÅ</text>
              <!-- V2 (-120¬∞) -->
              <line x1="0" y1="0" x2="-60" y2="103.9" stroke="#3af4c8" stroke-width="2.5"/>
              <polygon points="-60,103.9 -51.5,94.7 -68.5,93.9" fill="#3af4c8"/>
              <text x="-85" y="118" fill="#3af4c8" font-size="13" font-family="Space Mono">V‚ÇÇ</text>
              <!-- V3 (+120¬∞) -->
              <line x1="0" y1="0" x2="-60" y2="-103.9" stroke="#ff5e3a" stroke-width="2.5"/>
              <polygon points="-60,-103.9 -51.5,-94.7 -68.5,-93.9" fill="#ff5e3a"/>
              <text x="-85" y="-108" fill="#ff5e3a" font-size="13" font-family="Space Mono">V‚ÇÉ</text>
              <!-- Angles -->
              <path d="M 40,0 A 40,40 0 0,0 -20,-34.6" stroke="#888" fill="none" stroke-dasharray="4"/>
              <text x="10" y="-20" fill="#888" font-size="11">120¬∞</text>
              <text x="-160" y="-5" fill="#666" font-size="11">Im</text>
              <text x="155" y="-8" fill="#666" font-size="11">Re</text>
              <text x="20" y="-145" fill="#666" font-size="11">+</text>
            </svg>
          </div>
          <p style="text-align:center">Œ£V‚Éó·µ¢ = 0 &nbsp;‚Üí&nbsp; La somme vectorielle est nulle</p>
        </div>

        <div class="expandable">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span>√âquations horaires et repr√©sentation complexe</span><span class="expand-icon">+</span>
          </div>
          <div class="expand-body">
            <p>Les trois tensions simples s'√©crivent :</p>
            <div style="background:#111;border-radius:6px;padding:1.2rem;margin:.8rem 0;font-family:'Space Mono',monospace;color:#e8f428;line-height:2">
              v‚ÇÅ(t) = V‚àö2 ¬∑ sin(œât)<br>
              v‚ÇÇ(t) = V‚àö2 ¬∑ sin(œât ‚àí 2œÄ/3)<br>
              v‚ÇÉ(t) = V‚àö2 ¬∑ sin(œât + 2œÄ/3)
            </div>
            <p>En notation complexe (vecteurs de Fresnel) :</p>
            <div style="background:#111;border-radius:6px;padding:1.2rem;margin:.8rem 0;font-family:'Space Mono',monospace;color:#3af4c8;line-height:2">
              <u>V</u>‚ÇÅ = V¬∑e<sup>j¬∑0</sup><br>
              <u>V</u>‚ÇÇ = V¬∑e<sup>j(-2œÄ/3)</sup><br>
              <u>V</u>‚ÇÉ = V¬∑e<sup>j(+2œÄ/3)</sup>
            </div>
          </div>
        </div>
      </div>

      <!-- SECTION 2: TENSIONS COMPOS√âES -->
      <div class="block" id="tri-tensions">
        <h2 class="block-title">2. Tensions compos√©es</h2>
        <p>Les <strong>tensions compos√©es</strong> (ou tensions de ligne) sont les diff√©rences entre phases :</p>
        <div style="background:#111;border-radius:6px;padding:1.2rem;margin:.8rem 0;font-family:'Space Mono',monospace;color:#e8f428;line-height:2.2;font-size:.9rem">
          <u>U</u>‚ÇÅ‚ÇÇ = <u>V</u>‚ÇÅ ‚àí <u>V</u>‚ÇÇ &nbsp;‚Üí&nbsp; u‚ÇÅ‚ÇÇ(t) = U‚àö2¬∑sin(œât + œÄ/6)<br>
          <u>U</u>‚ÇÇ‚ÇÉ = <u>V</u>‚ÇÇ ‚àí <u>V</u>‚ÇÉ &nbsp;‚Üí&nbsp; u‚ÇÇ‚ÇÉ(t) = U‚àö2¬∑sin(œât ‚àí œÄ/2)<br>
          <u>U</u>‚ÇÉ‚ÇÅ = <u>V</u>‚ÇÉ ‚àí <u>V</u>‚ÇÅ &nbsp;‚Üí&nbsp; u‚ÇÉ‚ÇÅ(t) = U‚àö2¬∑sin(œât ‚àí 7œÄ/6)
        </div>
        <div class="formula-box">
          <div class="formula-sym">‚àö3</div>
          <div>
            <p><strong>Relation fondamentale tension compos√©e / simple :</strong></p>
            <p style="font-size:1.4rem;font-family:'Space Mono',monospace;color:#e8f428">U = ‚àö3 ¬∑ V</p>
            <p>En France : V = 230 V (simple) ‚Üí U = 400 V (compos√©e)</p>
          </div>
        </div>
        <div class="tip-box">
          üí° <strong>Moyen m√©mo :</strong> Les tensions compos√©es sont en avance de <strong>œÄ/6 = 30¬∞</strong> sur les tensions simples correspondantes, et leur amplitude est multipli√©e par ‚àö3 ‚âà 1,732.
        </div>
      </div>

      <!-- SECTION 3: R√âCEPTEUR √âTOILE -->
      <div class="block" id="tri-recepteur">
        <h2 class="block-title">3. R√©cepteur √©toile (Y)</h2>
        <p>Dans un couplage √©toile, chaque phase du r√©cepteur est connect√©e entre une ligne et le neutre.</p>

        <div class="formula-box">
          <div class="formula-sym">Y</div>
          <div>
            <p><strong>Relations courant/tension (√©toile) :</strong></p>
            <div style="font-family:'Space Mono',monospace;line-height:2.2;color:#e8f428">
              I = J &nbsp;&nbsp;&nbsp;&nbsp;(courant de ligne = courant de phase)<br>
              V<sub>ph</sub> = V = U/‚àö3 &nbsp;&nbsp;(tension de phase = tension simple)
            </div>
          </div>
        </div>

        <h3 style="color:#3af4c8;margin:1.5rem 0 .8rem">Puissances ‚Äî r√©cepteur √©toile</h3>
        <div style="display:grid;gap:1rem">
          <div class="formula-box" style="border-color:#3af4c8">
            <div class="formula-sym" style="color:#3af4c8">P</div>
            <div>
              <p>Puissance active (W) :</p>
              <p style="font-size:1.2rem;font-family:'Space Mono',monospace;color:#3af4c8">P = 3¬∑V¬∑I¬∑cosœÜ = ‚àö3¬∑U¬∑I¬∑cosœÜ</p>
            </div>
          </div>
          <div class="formula-box" style="border-color:#ff5e3a">
            <div class="formula-sym" style="color:#ff5e3a">Q</div>
            <div>
              <p>Puissance r√©active (VAr) :</p>
              <p style="font-size:1.2rem;font-family:'Space Mono',monospace;color:#ff5e3a">Q = 3¬∑V¬∑I¬∑sinœÜ = ‚àö3¬∑U¬∑I¬∑sinœÜ</p>
            </div>
          </div>
          <div class="formula-box">
            <div class="formula-sym">S</div>
            <div>
              <p>Puissance apparente (VA) :</p>
              <p style="font-size:1.2rem;font-family:'Space Mono',monospace;color:#e8f428">S = 3¬∑V¬∑I = ‚àö3¬∑U¬∑I</p>
              <p>Puissance complexe : <span style="font-family:'Space Mono',monospace;color:#e8f428"><u>S</u> = 3¬∑V¬≤/<u>Z</u>*</span></p>
            </div>
          </div>
        </div>

        <div class="alert-box" style="margin-top:1.2rem">
          ‚ö° <strong>Avantage triphas√© :</strong> La puissance instantan√©e totale p‚ÇÉœÜ = 3VI¬∑cos(œÜ) est <strong>CONSTANTE</strong> (pas de pulsation √† 2œâ comme en monophas√©). Cela explique pourquoi les moteurs triphas√©s tournent sans vibrations.
        </div>

        <div class="expandable">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span>Pertes Joule ‚Äî r√©cepteur √©toile r√©sistif (3 r√©sistances r)</span><span class="expand-icon">+</span>
          </div>
          <div class="expand-body">
            <p>Pour un r√©cepteur √©toile purement r√©sistif (3 r√©sistances r identiques) :</p>
            <div style="font-family:'Space Mono',monospace;color:#e8f428;background:#111;padding:1rem;border-radius:6px;line-height:2">
              P_J = 3¬∑r¬∑J¬≤ = 3¬∑V¬≤<sub>ph</sub>/r
            </div>
            <p style="margin-top:.8rem">R√©sistance √©quivalente vue du r√©seau : <strong>R' = 2r</strong></p>
          </div>
        </div>
      </div>

      <!-- SECTION 4: R√âCEPTEUR TRIANGLE -->
      <div class="block" id="tri-triangle">
        <h2 class="block-title">4. R√©cepteur triangle (Œî)</h2>
        <p>Dans un couplage triangle, les phases du r√©cepteur sont connect√©es directement entre les lignes. Chaque imp√©dance voit la tension compos√©e U.</p>

        <div class="formula-box">
          <div class="formula-sym">Œî</div>
          <div>
            <p><strong>Relations courant/tension (triangle) :</strong></p>
            <div style="font-family:'Space Mono',monospace;line-height:2.2;color:#e8f428">
              V<sub>ph</sub> = U &nbsp;&nbsp;&nbsp;&nbsp;(tension de phase = tension compos√©e)<br>
              I = J¬∑‚àö3 &nbsp;&nbsp;(courant de ligne = ‚àö3 √ó courant de phase)<br>
              J<sub>k</sub> = U<sub>kl</sub> / Z &nbsp;&nbsp;(courant dans chaque bras)
            </div>
          </div>
        </div>

        <h3 style="color:#3af4c8;margin:1.5rem 0 .8rem">Puissances ‚Äî r√©cepteur triangle</h3>
        <div class="formula-box">
          <div class="formula-sym">‚ö°</div>
          <div style="font-family:'Space Mono',monospace;line-height:2.2;color:#e8f428">
            P = 3¬∑J¬∑U¬∑cosœÜ = ‚àö3¬∑U¬∑I¬∑cosœÜ (W)<br>
            Q = 3¬∑J¬∑U¬∑sinœÜ = ‚àö3¬∑U¬∑I¬∑sinœÜ (VAr)<br>
            S = 3¬∑J¬∑U = ‚àö3¬∑U¬∑I (VA)
          </div>
        </div>

        <div class="tip-box">
          ‚úÖ <strong>R√©sultat important :</strong> Les formules de puissance <strong>P = ‚àö3¬∑U¬∑I¬∑cosœÜ</strong>, <strong>Q = ‚àö3¬∑U¬∑I¬∑sinœÜ</strong> et <strong>S = ‚àö3¬∑U¬∑I</strong> sont <strong>identiques</strong> pour les couplages √©toile ET triangle. La diff√©rence est dans les relations entre V, U, I et J.
        </div>

        <div class="expandable">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span>Pertes Joule ‚Äî r√©cepteur triangle r√©sistif (3 r√©sistances r)</span><span class="expand-icon">+</span>
          </div>
          <div class="expand-body">
            <div style="font-family:'Space Mono',monospace;color:#e8f428;background:#111;padding:1rem;border-radius:6px;line-height:2">
              P_J = 3¬∑r¬∑J¬≤ = 3¬∑r¬∑(I/‚àö3)¬≤ = r¬∑I¬≤
            </div>
            <p style="margin-top:.8rem">R√©sistance √©quivalente vue du r√©seau : <strong>R' = (2/3)r</strong></p>
            <p>On remarque que les pertes Joule en triangle sont <strong>3 fois plus faibles</strong> qu'en √©toile pour la m√™me r√©sistance r ‚Üí d'o√π l'int√©r√™t du d√©marrage √©toile-triangle des moteurs !</p>
          </div>
        </div>
      </div>

      <!-- SECTION 5: TABLEAU R√âCAP -->
      <div class="block" id="tri-resume">
        <h2 class="block-title">5. Tableau r√©capitulatif</h2>
        <div style="overflow-x:auto">
          <table style="width:100%;border-collapse:collapse;font-size:.85rem">
            <thead>
              <tr style="background:#1a1a2e">
                <th style="padding:.8rem;border:1px solid #333;text-align:left;color:#888">Grandeur</th>
                <th style="padding:.8rem;border:1px solid #333;text-align:center;color:#e8f428">Couplage √©toile (Y)</th>
                <th style="padding:.8rem;border:1px solid #333;text-align:center;color:#3af4c8">Couplage triangle (Œî)</th>
              </tr>
            </thead>
            <tbody>
              <tr><td style="padding:.7rem .8rem;border:1px solid #222">V<sub>ph</sub> (tension de phase)</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#e8f428">V = U/‚àö3</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#3af4c8">V<sub>ph</sub> = U</td></tr>
              <tr style="background:#111"><td style="padding:.7rem .8rem;border:1px solid #222">I (courant de ligne) vs J (phase)</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#e8f428">J = I</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#3af4c8">I = J‚àö3</td></tr>
              <tr><td style="padding:.7rem .8rem;border:1px solid #222">Puissance active P</td><td colspan="2" style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#e8f428">3VI¬∑cosœÜ = ‚àö3¬∑U¬∑I¬∑cosœÜ</td></tr>
              <tr style="background:#111"><td style="padding:.7rem .8rem;border:1px solid #222">Puissance r√©active Q</td><td colspan="2" style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#ff5e3a">3VI¬∑sinœÜ = ‚àö3¬∑U¬∑I¬∑sinœÜ</td></tr>
              <tr><td style="padding:.7rem .8rem;border:1px solid #222">Puissance apparente S</td><td colspan="2" style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#e8f428">3VI = ‚àö3¬∑U¬∑I</td></tr>
              <tr style="background:#111"><td style="padding:.7rem .8rem;border:1px solid #222">Puissance complexe <u>S</u></td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#e8f428">3¬∑V¬≤/<u>Z</u>*</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#3af4c8">3¬∑U¬≤/<u>Z</u>*</td></tr>
              <tr><td style="padding:.7rem .8rem;border:1px solid #222">Pertes Joule (charge r√©sistive r)</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#e8f428">3rI¬≤&nbsp; (R'=2r)</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#3af4c8">rI¬≤&nbsp; (R'=2r/3)</td></tr>
              <tr style="background:#111"><td style="padding:.7rem .8rem;border:1px solid #222">D√©phasage œÜ</td><td style="padding:.7rem;border:1px solid #222;text-align:center">œÜ(I‚ÇÅ,V‚ÇÅ)</td><td style="padding:.7rem;border:1px solid #222;text-align:center">œÜ(J‚ÇÅ,U‚ÇÅ‚ÇÇ) = œÜ(I‚ÇÅ,V‚ÇÅ)</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- SECTION 6: BOUCHEROT -->
      <div class="block" id="tri-boucherot">
        <h2 class="block-title">6. Th√©or√®me de Boucherot</h2>
        <div class="formula-box">
          <div class="formula-sym">Œ£</div>
          <div>
            <p><strong>Th√©or√®me de Boucherot :</strong></p>
            <p>La puissance active <strong>P<sub>tot</sub></strong> d'un syst√®me est la <em>somme</em> des puissances actives des √©l√©ments qui le constituent. Idem pour la puissance r√©active <strong>Q<sub>tot</sub></strong> et la puissance apparente complexe <strong><u>S</u><sub>tot</sub></strong>.</p>
            <div style="font-family:'Space Mono',monospace;line-height:2.2;color:#e8f428;margin-top:.8rem">
              P<sub>tot</sub> = Œ£P·µ¢ &nbsp;&nbsp; Q<sub>tot</sub> = Œ£Q·µ¢ &nbsp;&nbsp; <u>S</u><sub>tot</sub> = Œ£<u>S</u>·µ¢
            </div>
          </div>
        </div>
        <div class="alert-box">
          ‚ö†Ô∏è <strong>Attention !</strong> La puissance apparente <em>scalaire</em> S n'est <strong>PAS</strong> additive : S<sub>tot</sub> ‚â† Œ£S·µ¢. On calcule S<sub>tot</sub> = |<u>S</u><sub>tot</sub>| = ‚àö(P<sub>tot</sub>¬≤ + Q<sub>tot</sub>¬≤).
        </div>
        <p style="margin-top:1rem">Application pratique pour un syst√®me avec n charges :</p>
        <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.2">
          P<sub>tot</sub> = P‚ÇÅ + P‚ÇÇ + ... + P‚Çô<br>
          Q<sub>tot</sub> = Q‚ÇÅ + Q‚ÇÇ + ... + Q‚Çô<br>
          S<sub>tot</sub> = ‚àö(P<sub>tot</sub>¬≤ + Q<sub>tot</sub>¬≤)<br>
          cosœÜ<sub>tot</sub> = P<sub>tot</sub>/S<sub>tot</sub>
        </div>
      </div>

      <!-- SECTION 7: COMPENSATION -->
      <div class="block" id="tri-compensation">
        <h2 class="block-title">7. Compensation de puissance r√©active (rel√®vement du cosœÜ)</h2>
        <p>Les charges inductives (moteurs) consomment de la puissance r√©active Q > 0, ce qui d√©grade le facteur de puissance. On ajoute des condensateurs pour compenser Q.</p>

        <h3 style="color:#3af4c8;margin:1.2rem 0 .8rem">Puissance r√©active d'un banc de 3 condensateurs</h3>
        <div class="formula-box" style="border-color:#3af4c8">
          <div class="formula-sym" style="color:#3af4c8">C</div>
          <div style="font-family:'Space Mono',monospace;line-height:2.2;color:#e8f428">
            Q_c = ‚àí3œâCV¬≤ &nbsp;&nbsp; (couplage √©toile)<br>
            Q_c = ‚àí3œâCU¬≤ &nbsp;&nbsp; (couplage triangle)
          </div>
        </div>

        <div style="overflow-x:auto;margin-top:1rem">
          <table style="width:100%;border-collapse:collapse;font-size:.85rem">
            <thead>
              <tr style="background:#1a1a2e">
                <th style="padding:.8rem;border:1px solid #333;text-align:left;color:#888">Situation</th>
                <th style="padding:.8rem;border:1px solid #333;text-align:center;color:#e8f428">P active</th>
                <th style="padding:.8rem;border:1px solid #333;text-align:center;color:#ff5e3a">Q r√©active</th>
                <th style="padding:.8rem;border:1px solid #333;text-align:center;color:#888">cosœÜ</th>
              </tr>
            </thead>
            <tbody>
              <tr><td style="padding:.7rem .8rem;border:1px solid #222">Charge seule</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace">P</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#ff5e3a">Q = P¬∑tgœÜ</td><td style="padding:.7rem;border:1px solid #222;text-align:center">cosœÜ</td></tr>
              <tr style="background:#111"><td style="padding:.7rem .8rem;border:1px solid #222">3 condensateurs seuls</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace">0</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#3af4c8">Q_c = ‚àí3CœâU¬≤</td><td style="padding:.7rem;border:1px solid #222;text-align:center">0</td></tr>
              <tr><td style="padding:.7rem .8rem;border:1px solid #222">Charge + condensateurs</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace">P</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#e8f428">Q' = Q + Q_c = P¬∑tgœÜ'</td><td style="padding:.7rem;border:1px solid #222;text-align:center;color:#3af4c8">cosœÜ' &gt; cosœÜ ‚úì</td></tr>
            </tbody>
          </table>
        </div>

        <div class="expandable" style="margin-top:1.2rem">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span>Calcul de la capacit√© C pour atteindre un cosœÜ' cible</span><span class="expand-icon">+</span>
          </div>
          <div class="expand-body">
            <p>Pour relever le facteur de puissance de cosœÜ √† cosœÜ' :</p>
            <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.5">
              Q_c = P¬∑(tgœÜ ‚àí tgœÜ')<br><br>
              En √©toile : C = Q_c / (3œâV¬≤)<br>
              En triangle : C = Q_c / (3œâU¬≤) = C_√©toile / 3
            </div>
            <div class="tip-box" style="margin-top:1rem">
              ‚ÑπÔ∏è Le condensateur en <strong>triangle</strong> est 3√ó plus petit qu'en √©toile pour le m√™me effet. On pr√©f√®re souvent le triangle pour r√©duire la valeur et le co√ªt des condensateurs.
            </div>
          </div>
        </div>

        <!-- Calculatrice compensation -->
        <div class="calculator-box" style="margin-top:1.5rem">
          <div class="calc-title">üîß Calculatrice ‚Äî Compensation de puissance r√©active</div>
          <div class="calc-grid">
            <div class="calc-field"><label>P (kW)</label><input type="number" id="comp-P" value="25" step="0.1"></div>
            <div class="calc-field"><label>cosœÜ initial</label><input type="number" id="comp-cosphi1" value="0.7" step="0.01" min="0.1" max="1"></div>
            <div class="calc-field"><label>cosœÜ' cible</label><input type="number" id="comp-cosphi2" value="0.92" step="0.01" min="0.1" max="1"></div>
            <div class="calc-field"><label>U (V) tension compos√©e</label><input type="number" id="comp-U" value="400" step="1"></div>
            <div class="calc-field"><label>f (Hz)</label><input type="number" id="comp-f" value="50" step="1"></div>
          </div>
          <button class="calc-btn" onclick="calcCompensation()">Calculer</button>
          <div id="comp-result" class="calc-result"></div>
        </div>
      </div>

      <!-- SECTION 8: EXERCICES -->
      <div class="block" id="tri-exercices">
        <h2 class="block-title">8. Exercices r√©solus</h2>

        <!-- Exercice 1 -->
        <div class="example-box" style="margin-bottom:1.5rem">
          <div class="example-label">Exercice 1 ‚Äî Charge monophas√©e (p.54)</div>
          <p><strong>Circuit :</strong> V = 230 V, f = 50 Hz. L = 20 mH en s√©rie avec R‚ÇÅ = 20 Œ©, le tout en parall√®le avec R‚ÇÇ = 10 Œ©.</p>
          <div class="expandable">
            <div class="expand-header" onclick="toggleExpand(this)"><span>Voir la solution compl√®te</span><span class="expand-icon">+</span></div>
            <div class="expand-body">
              <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.2;font-size:.85rem">
                œâ = 2œÄ√ó50 = 314.2 rad/s<br>
                Z_L = jLœâ = j√ó0.02√ó314.2 = j6.28 Œ©<br>
                Z_branche1 = R‚ÇÅ + jLœâ = 20 + j6.28 Œ©<br>
                |Z‚ÇÅ| = ‚àö(20¬≤ + 6.28¬≤) = ‚àö(400+39.4) = 20.97 Œ©<br><br>
                I‚ÇÅ = V/|Z‚ÇÅ| = 230/20.97 = <span style="color:#3af4c8">10.97 A</span><br>
                I‚ÇÇ = V/R‚ÇÇ = 230/10 = <span style="color:#3af4c8">23 A</span><br><br>
                Par Boucherot :<br>
                P = R‚ÇÅ¬∑I‚ÇÅ¬≤ + R‚ÇÇ¬∑I‚ÇÇ¬≤ = 20√ó10.97¬≤ + 10√ó23¬≤<br>
                P = 2408 + 5290 = <span style="color:#3af4c8">7698 W</span><br>
                Q = Lœâ¬∑I‚ÇÅ¬≤ = 6.28√ó10.97¬≤ = <span style="color:#ff5e3a">756 VAr</span><br>
                S = ‚àö(P¬≤+Q¬≤) = ‚àö(7698¬≤+756¬≤) = <span style="color:#3af4c8">7735 VA</span><br>
                I = S/V = 7735/230 = <span style="color:#3af4c8">33.6 A</span><br>
                cosœÜ = P/S = 7698/7735 = <span style="color:#e8f428">0.995</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Exercice 2 -->
        <div class="example-box" style="margin-bottom:1.5rem">
          <div class="example-label">Exercice 2 ‚Äî Repr√©sentation vectorielle (p.55)</div>
          <p><strong>Circuit :</strong> V = 100 V, f = 50 Hz. En s√©rie : j10 Œ© (inductif), ‚àíj5 Œ© (capacitif), 20 Œ© (r√©sistif).</p>
          <div class="expandable">
            <div class="expand-header" onclick="toggleExpand(this)"><span>Voir la solution</span><span class="expand-icon">+</span></div>
            <div class="expand-body">
              <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.2;font-size:.82rem">
                Z = 20 + j10 ‚àí j5 = <span style="color:#3af4c8">20 + j5 Œ©</span><br>
                |Z| = ‚àö(20¬≤+5¬≤) = ‚àö425 ‚âà <span style="color:#3af4c8">20.6 Œ©</span><br>
                œÜ = arctan(5/20) ‚âà <span style="color:#3af4c8">14.04¬∞</span> (circuit inductif AR)<br>
                I = V/|Z| = 100/20.6 ‚âà <span style="color:#3af4c8">4.85 A</span><br>
                v(t) = 100‚àö2 sin(œât) ; i(t) = 4.85‚àö2 sin(œât ‚àí 14.04¬∞)<br>
                Loi de maille : <span style="color:#ff5e3a">V = (20+j5)¬∑I</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Exercice 3 -->
        <div class="example-box" style="margin-bottom:1.5rem">
          <div class="example-label">Exercice 3 ‚Äî Diviseur de courant (p.56)</div>
          <p>I = 2,5 A. Branche 1 : ‚àíj0,002 + 4 Œ©. Branche 2 : j40 + 10 Œ©.</p>
          <div class="expandable">
            <div class="expand-header" onclick="toggleExpand(this)"><span>Voir la solution</span><span class="expand-icon">+</span></div>
            <div class="expand-body">
              <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.2;font-size:.82rem">
                Z‚ÇÅ ‚âà 4 Œ© (partie capacitive n√©gligeable)<br>
                Z‚ÇÇ = 10+j40, |Z‚ÇÇ| ‚âà 41.2 Œ©<br>
                Z_eq parall√®le : |Z_eq| ‚âà <span style="color:#3af4c8">3.89 Œ©</span><br>
                V = I √ó |Z_eq| = 2.5 √ó 3.89 ‚âà <span style="color:#3af4c8">9.72 V</span><br>
                I‚ÇÅ = V/|Z‚ÇÅ| ‚âà <span style="color:#3af4c8">2.43 A</span> ; I‚ÇÇ = V/|Z‚ÇÇ| ‚âà <span style="color:#3af4c8">0.236 A</span><br>
                P = R‚ÇÅI‚ÇÅ¬≤ + R‚ÇÇI‚ÇÇ¬≤ ‚âà <span style="color:#3af4c8">24.2 W</span><br>
                Q = X_L¬∑I‚ÇÇ¬≤ ‚âà <span style="color:#ff5e3a">+2.23 VAr</span> (inductif dominant)
              </div>
            </div>
          </div>
        </div>

        <!-- Exercice 4 -->
        <div class="example-box" style="margin-bottom:1.5rem">
          <div class="example-label">Exercice 4 ‚Äî Ligne monophas√©e vs triphas√©e (p.75‚Äì76)</div>
          <p>Comparaison de deux lignes distribuant la m√™me puissance active P = V¬≤/R sur une distance L.</p>
          <div class="expandable">
            <div class="expand-header" onclick="toggleExpand(this)"><span>Voir les r√©sultats cl√©s</span><span class="expand-icon">+</span></div>
            <div class="expand-body">
              <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.2;font-size:.82rem">
                <span style="color:#3af4c8">Puissance identique :</span> P_mono = P_tri = V¬≤/R ‚úì<br>
                <span style="color:#3af4c8">Volume de cuivre :</span><br>
                  Vol_mono = 2 fils √ó L √ó S = 2LV/(RŒ¥)<br>
                  Vol_tri = 3 fils √ó L √ó S/3 = LV/(RŒ¥)<br>
                  ‚Üí <span style="color:#3af4c8">Triphas√© utilise 2√ó moins de cuivre !</span><br>
                <span style="color:#3af4c8">Puissance instantan√©e :</span><br>
                  Monophas√© : p(t) pulsatoire √† 2œâ ‚Üí vibrations<br>
                  Triphas√© : p‚ÇÉœÜ = 3VI¬∑cosœÜ = <span style="color:#3af4c8">CONSTANTE</span> ‚Üí moteurs sans vibrations<br>
                <span style="color:#e8f428">‚úì Le triphas√© : m√™me puissance, 2√ó moins de cuivre, puissance instantan√©e constante.</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Exercice 5 -->
        <div class="example-box" style="margin-bottom:1.5rem">
          <div class="example-label">Exercice 5 ‚Äî Atelier triphas√© (p.77)</div>
          <p><strong>R√©seau :</strong> 230V/400V, 50Hz. L'atelier comprend :</p>
          <ul style="margin:.5rem 0 .8rem 1.2rem;line-height:1.8">
            <li>Luminaires/bureautique : P‚ÇÅ = 6 kW, cosœÜ‚ÇÅ = 1 (fp unitaire)</li>
            <li>3 machines triphas√©es : P‚ÇÇ = 3√ó5 = 15 kW, cosœÜ‚ÇÇ = 0,8 AR</li>
            <li>3 imp√©dances en triangle : Z = 10 + j15 Œ©</li>
          </ul>
          <div class="expandable">
            <div class="expand-header" onclick="toggleExpand(this)"><span>Voir la solution compl√®te</span><span class="expand-icon">+</span></div>
            <div class="expand-body">
              <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.2;font-size:.82rem">
                <span style="color:#3af4c8">‚Äî Imp√©dances en triangle (Z = 10+j15 Œ©) ‚Äî</span><br>
                |Z| = ‚àö(10¬≤+15¬≤) = ‚àö325 = 18.03 Œ©<br>
                J = U/|Z| = 400/18.03 = 22.18 A<br>
                P_Z = 3√ó10√ó22.18¬≤ ‚âà <span style="color:#3af4c8">14.77 kW</span><br>
                Q_Z = 3√ó15√ó22.18¬≤ ‚âà <span style="color:#ff5e3a">22.16 kVAr</span><br><br>
                <span style="color:#3af4c8">‚Äî Machines (cosœÜ=0.8 AR ‚Üí tgœÜ=0.75) ‚Äî</span><br>
                Q‚ÇÇ = 15000√ó0.75 = <span style="color:#ff5e3a">11.25 kVAr</span><br><br>
                <span style="color:#3af4c8">‚Äî Boucherot total ‚Äî</span><br>
                P_tot = 6 + 15 + 14.77 = <span style="color:#3af4c8">35.77 kW</span><br>
                Q_tot = 0 + 11.25 + 22.16 = <span style="color:#ff5e3a">33.41 kVAr</span><br>
                S_tot = ‚àö(35.77¬≤+33.41¬≤) = <span style="color:#e8f428">48.88 kVA</span><br>
                I = S/(‚àö3¬∑U) = 48880/692.8 = <span style="color:#3af4c8">70.6 A</span><br>
                cosœÜ_tot = 35.77/48.88 = <span style="color:#e8f428">0.732</span> ‚Üí non tol√©rable (min 0.92)<br><br>
                <span style="color:#3af4c8">‚Äî Condensateurs √©toile pour cosœÜ'=1 ‚Äî</span><br>
                C = Q_tot/(3œâV¬≤) = 33410/(3√ó314.2√ó230¬≤) = <span style="color:#3af4c8">671 ¬µF</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Exercice 6 -->
        <div class="example-box" style="margin-bottom:1.5rem">
          <div class="example-label">Exercice 6 ‚Äî Compensation de puissance r√©active (p.78)</div>
          <p><strong>Charge :</strong> 230V/400V, 50Hz. P = 25 kW, cosœÜ = 0,7 AR ‚Üí rel√®vement √† cosœÜ' = 0,92 AR.</p>
          <div class="expandable">
            <div class="expand-header" onclick="toggleExpand(this)"><span>Voir la solution compl√®te</span><span class="expand-icon">+</span></div>
            <div class="expand-body">
              <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.2;font-size:.82rem">
                œÜ = arccos(0.7) ‚âà 45.57¬∞ ‚Üí tgœÜ ‚âà 1.020<br>
                œÜ' = arccos(0.92) ‚âà 23.07¬∞ ‚Üí tgœÜ' ‚âà 0.426<br>
                Q_c = P√ó(tgœÜ‚àítgœÜ') = 25000√ó(1.020‚àí0.426) ‚âà <span style="color:#3af4c8">14.85 kVAr</span><br><br>
                <span style="color:#3af4c8">1) √âtoile (V = 230 V) :</span><br>
                C = Q_c/(3œâV¬≤) = 14850/(3√ó314.2√ó230¬≤) ‚âà <span style="color:#3af4c8">298 ¬µF</span><br><br>
                <span style="color:#3af4c8">2) Triangle pour cosœÜ'=0,92 AR (U = 400 V) :</span><br>
                C' = Q_c/(3œâU¬≤) = 14850/(3√ó314.2√ó400¬≤) ‚âà <span style="color:#3af4c8">98.5 ¬µF</span><br>
                <span style="color:#ff5e3a">‚Üí 3√ó moins que l'√©toile : C' = C/3</span><br><br>
                <span style="color:#3af4c8">3) Triangle pour cosœÜ''=0,92 AV (sur-compensation) :</span><br>
                Q_c = P√ó(tgœÜ+tgœÜ') = 25000√ó1.446 = 36.15 kVAr<br>
                C'' = 36150/(3√ó314.2√ó400¬≤) ‚âà <span style="color:#3af4c8">240 ¬µF</span><br><br>
                <span style="color:#e8f428">‚úì Solution pr√©f√©r√©e : condensateurs en TRIANGLE ‚Äî m√™me effet avec des condensateurs 3√ó plus petits (voient la tension U au lieu de V).</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Syst√®me d√©s√©quilibr√© -->
      <div class="block" id="tri-desequilibre">
        <h2 class="block-title">10. Syst√®me triphas√© d√©s√©quilibr√©</h2>
        <div class="tip-box" style="margin-bottom:1.2rem">
          ‚öñÔ∏è Un syst√®me est <strong>√©quilibr√©</strong> si Z‚ÇÅ=Z‚ÇÇ=Z‚ÇÉ (√©toile) ou Z‚ÇÅ‚ÇÇ=Z‚ÇÇ‚ÇÉ=Z‚ÇÉ‚ÇÅ (triangle). Alors I‚ÇÅ=I‚ÇÇ=I‚ÇÉ et toutes les formules simplifi√©es s'appliquent.
        </div>
        <p>Un syst√®me est <strong>d√©s√©quilibr√©</strong> si les imp√©dances diff√®rent d'une phase √† l'autre. On revient aux relations g√©n√©rales :</p>
        <div class="formula-box" style="margin:1rem 0;line-height:2.2;font-size:.9rem">
          <span style="color:#ff5e3a">Charge √©toile d√©s√©quilibr√©e :</span><br>
          P = V<sub>Z1</sub>¬∑I‚ÇÅ¬∑cosœÜ‚ÇÅ + V<sub>Z2</sub>¬∑I‚ÇÇ¬∑cosœÜ‚ÇÇ + V<sub>Z3</sub>¬∑I‚ÇÉ¬∑cosœÜ‚ÇÉ<br>
          Q = V<sub>Z1</sub>¬∑I‚ÇÅ¬∑sinœÜ‚ÇÅ + V<sub>Z2</sub>¬∑I‚ÇÇ¬∑sinœÜ‚ÇÇ + V<sub>Z3</sub>¬∑I‚ÇÉ¬∑sinœÜ‚ÇÉ<br><br>
          <span style="color:#ff5e3a">Charge triangle d√©s√©quilibr√©e :</span><br>
          P = U¬∑(J‚ÇÅ‚ÇÇ¬∑cosœÜ‚ÇÅ‚ÇÇ + J‚ÇÇ‚ÇÉ¬∑cosœÜ‚ÇÇ‚ÇÉ + J‚ÇÉ‚ÇÅ¬∑cosœÜ‚ÇÉ‚ÇÅ)<br>
          Q = U¬∑(J‚ÇÅ‚ÇÇ¬∑sinœÜ‚ÇÅ‚ÇÇ + J‚ÇÇ‚ÇÉ¬∑sinœÜ‚ÇÇ‚ÇÉ + J‚ÇÉ‚ÇÅ¬∑sinœÜ‚ÇÉ‚ÇÅ)
        </div>
        <p>Le th√©or√®me de Boucherot (additivit√© de P et Q) reste toujours applicable, m√™me en syst√®me d√©s√©quilibr√©.</p>
      </div>

      <!-- Synth√®se -->
      <div class="block" id="tri-synthese">
        <h2 class="block-title">11. Synth√®se ‚Äî √âquivalences √©toile / triangle</h2>
        <p>Une charge √©toile (Z par phase) est √©quivalente √† une charge triangle (3Z par phase) vue du r√©seau. Les formules de puissance sont <strong>identiques</strong> dans les deux cas :</p>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin:1.2rem 0">
          <div style="background:#1a1a2e;border:1px solid #3af4c840;border-radius:8px;padding:1rem">
            <div style="color:#3af4c8;font-weight:700;margin-bottom:.7rem">‚≠ê √âtoile √©quilibr√©e</div>
            <div style="font-family:'Space Mono',monospace;font-size:.8rem;line-height:2">
              V_ph = V = U/‚àö3<br>
              I = J<br>
              P = 3¬∑V¬∑I¬∑cosœÜ<br>
              Q = 3¬∑V¬∑I¬∑sinœÜ<br>
              S = 3¬∑V¬∑I = ‚àö3¬∑U¬∑I
            </div>
          </div>
          <div style="background:#1a1a2e;border:1px solid #ff5e3a40;border-radius:8px;padding:1rem">
            <div style="color:#ff5e3a;font-weight:700;margin-bottom:.7rem">‚ñ≥ Triangle √©quilibr√©e</div>
            <div style="font-family:'Space Mono',monospace;font-size:.8rem;line-height:2">
              V_ph = U<br>
              I = J‚àö3<br>
              P = 3¬∑U¬∑J¬∑cosœÜ = ‚àö3¬∑U¬∑I¬∑cosœÜ<br>
              Q = 3¬∑U¬∑J¬∑sinœÜ = ‚àö3¬∑U¬∑I¬∑sinœÜ<br>
              S = 3¬∑U¬∑J = ‚àö3¬∑U¬∑I
            </div>
          </div>
        </div>
        <div style="background:#1a1a2e;border-left:4px solid #e8f428;padding:1rem;border-radius:6px;margin-top:1rem">
          <strong style="color:#e8f428">üìê R√®gle d'or :</strong> Z<sub>Œî</sub> = 3¬∑Z<sub>Y</sub> pour l'√©quivalence. Pour les condensateurs de compensation : C<sub>Œî</sub> = C<sub>Y</sub>/3. Le condensateur triangle est 3√ó plus petit pour le m√™me effet.
        </div>
      </div>

      <!-- QCM -->
      <div class="block" id="tri-qcm">
        <h2 class="block-title">QCM ‚Äî Syst√®mes Triphas√©s</h2>
        <div id="qcm-triphas√©"></div>
      </div>
    </main>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// STATE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const state = {
  currentSection: 'home',
  progress: {complexes:0, signaux:0, impedances:0, puissances:0, methodologie:0, 'triphas√©':0},
  scores: {}
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// NAVIGATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showHome() {
  hideAll();
  document.getElementById('home').style.display = 'flex';
  state.currentSection = 'home';
  updateProgress(0);
}

function showSection(id) {
  hideAll();
  const el = document.getElementById(id);
  el.style.display = 'block';
  el.classList.add('active');
  state.currentSection = id;
  window.scrollTo(0,0);
  updateProgress(id === 'modules' ? 10 : 20);
  if (id === 'progression') renderProgression();
}

function showLesson(id) {
  hideAll();
  const el = document.getElementById('lesson-' + id);
  el.style.display = 'block';
  el.classList.add('active');
  state.currentSection = 'lesson-' + id;
  window.scrollTo(0,0);
  updateProgress(40);
}

function hideAll() {
  document.querySelectorAll('.hero, .section').forEach(el => {
    el.style.display = 'none';
    el.classList.remove('active');
  });
}

function scrollToId(id) {
  const el = document.getElementById(id);
  if (el) el.scrollIntoView({behavior:'smooth', block:'start'});
}

// Progress bar
function updateProgress(pct) {
  document.getElementById('progressBar').style.width = pct + '%';
}

window.addEventListener('scroll', () => {
  const scrolled = window.scrollY;
  const total = document.documentElement.scrollHeight - window.innerHeight;
  if (total > 0) {
    const pct = Math.max(10, (scrolled/total)*100);
    document.getElementById('progressBar').style.width = pct + '%';
  }
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// EXPAND CARDS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function toggleExpand(header) {
  const content = header.nextElementSibling;
  const icon = header.querySelector('.expand-icon');
  const isOpen = content.classList.contains('open');
  content.classList.toggle('open');
  icon.textContent = isOpen ? '+' : '‚àí';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FORM SWITCHER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showForm(idx) {
  [0,1,2].forEach(i => {
    document.getElementById('form-'+i).style.display = i === idx ? 'block' : 'none';
  });
  document.querySelectorAll('.step').forEach((s,i) => {
    s.classList.toggle('active', i === idx);
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CANVAS PLAN COMPLEXE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function drawComplex() {
  const a = parseFloat(document.getElementById('cRe').value) || 0;
  const b = parseFloat(document.getElementById('cIm').value) || 0;
  const canvas = document.getElementById('complexCanvas');
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;
  const cx = W/2, cy = H/2;
  const scale = Math.min(W,H) / (2 * Math.max(Math.abs(a), Math.abs(b), 3) * 1.4);

  ctx.clearRect(0,0,W,H);

  // Background
  ctx.fillStyle = '#12121a';
  ctx.fillRect(0,0,W,H);

  // Grid
  ctx.strokeStyle = '#2a2a3a';
  ctx.lineWidth = 1;
  for(let i=-10;i<=10;i++) {
    ctx.beginPath(); ctx.moveTo(cx+i*scale*2,0); ctx.lineTo(cx+i*scale*2,H); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(0,cy+i*scale*2); ctx.lineTo(W,cy+i*scale*2); ctx.stroke();
  }

  // Axes
  ctx.strokeStyle = '#3a3a5a';
  ctx.lineWidth = 2;
  ctx.beginPath(); ctx.moveTo(0,cy); ctx.lineTo(W,cy); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(cx,0); ctx.lineTo(cx,H); ctx.stroke();

  // Labels axes
  ctx.fillStyle = '#8888aa';
  ctx.font = '12px Space Mono';
  ctx.fillText('Re', W-25, cy-8);
  ctx.fillText('Im', cx+8, 15);
  ctx.fillText('0', cx+5, cy+15);

  // Point Z
  const px = cx + a*scale;
  const py = cy - b*scale;

  // Dashed projections
  ctx.strokeStyle = '#2a2a3a';
  ctx.lineWidth = 1;
  ctx.setLineDash([5,5]);
  ctx.beginPath(); ctx.moveTo(px,py); ctx.lineTo(px,cy); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(px,py); ctx.lineTo(cx,py); ctx.stroke();
  ctx.setLineDash([]);

  // Vector
  ctx.strokeStyle = '#e8f428';
  ctx.lineWidth = 2.5;
  ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(px,py); ctx.stroke();

  // Arrow head
  const angle = Math.atan2(-(py-cy), px-cx);
  ctx.fillStyle = '#e8f428';
  ctx.beginPath();
  ctx.moveTo(px,py);
  ctx.lineTo(px-12*Math.cos(angle-0.4), py+12*Math.sin(angle-0.4));
  ctx.lineTo(px-12*Math.cos(angle+0.4), py+12*Math.sin(angle+0.4));
  ctx.fill();

  // Point
  ctx.fillStyle = '#e8f428';
  ctx.beginPath(); ctx.arc(px,py,5,0,Math.PI*2); ctx.fill();

  // Angle arc
  const mod = Math.sqrt(a*a+b*b);
  if(mod > 0) {
    const phi = Math.atan2(b,a);
    ctx.strokeStyle = '#ff5e3a';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.arc(cx, cy, 30, 0, -phi, phi < 0);
    ctx.stroke();
    ctx.fillStyle = '#ff5e3a';
    ctx.font = '13px Space Mono';
    ctx.fillText('œÜ', cx+32, cy-5);
  }

  // Label Z
  ctx.fillStyle = '#e8f428';
  ctx.font = 'bold 14px Space Mono';
  ctx.fillText(`Z(${a},${b>0?'+'+b:b}j)`, px+8, py-8);

  // Label a on x
  ctx.fillStyle = '#3af4c8';
  ctx.font = '11px Space Mono';
  ctx.fillText('a='+a, px-15, cy+18);
  // Label b on y
  ctx.fillStyle = '#ff5e3a';
  ctx.fillText('b='+b, cx+5, py+4);

  // Update info
  const modZ = Math.sqrt(a*a+b*b);
  const argDeg = Math.atan2(b,a) * 180 / Math.PI;
  document.getElementById('cMod').textContent = modZ.toFixed(3);
  document.getElementById('cArg').textContent = argDeg.toFixed(1) + '¬∞';
  document.getElementById('cExp').textContent = modZ.toFixed(2) + '¬∑e^(j' + argDeg.toFixed(0) + '¬∞)';
}

// Draw on input change
document.getElementById('cRe').addEventListener('input', drawComplex);
document.getElementById('cIm').addEventListener('input', drawComplex);

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CALCULATORS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function calcComplex() {
  const a = parseFloat(document.getElementById('calcA').value);
  const b = parseFloat(document.getElementById('calcB').value);
  const mod = Math.sqrt(a*a+b*b);
  const argRad = Math.atan2(b,a);
  const argDeg = argRad * 180 / Math.PI;
  document.getElementById('rMod').textContent = mod.toFixed(4);
  document.getElementById('rArg').textContent = argDeg.toFixed(2) + '¬∞';
  document.getElementById('rArgR').textContent = argRad.toFixed(4) + ' rad';
  document.getElementById('rConj').textContent = a + (b>=0 ? ' ‚àí j' + Math.abs(b) : ' + j' + Math.abs(b));
  document.getElementById('rExp').textContent = mod.toFixed(3) + ' ¬∑ e^(j' + argDeg.toFixed(1) + '¬∞)';
  document.getElementById('calcResult').classList.add('show');
}

function calcProd() {
  const a1=parseFloat(document.getElementById('z1a').value), b1=parseFloat(document.getElementById('z1b').value);
  const a2=parseFloat(document.getElementById('z2a').value), b2=parseFloat(document.getElementById('z2b').value);
  const ra = a1*a2 - b1*b2, rb = a1*b2 + b1*a2;
  const mod = Math.sqrt(ra*ra+rb*rb);
  const arg = Math.atan2(rb,ra)*180/Math.PI;
  document.getElementById('rProd').textContent = ra.toFixed(3) + (rb>=0?' + j':' ‚àí j') + Math.abs(rb).toFixed(3);
  document.getElementById('rProdMod').textContent = mod.toFixed(4);
  document.getElementById('rProdArg').textContent = arg.toFixed(2) + '¬∞';
  document.getElementById('prodResult').classList.add('show');
}

function calcDiv() {
  const a1=parseFloat(document.getElementById('z1a').value), b1=parseFloat(document.getElementById('z1b').value);
  const a2=parseFloat(document.getElementById('z2a').value), b2=parseFloat(document.getElementById('z2b').value);
  const denom = a2*a2 + b2*b2;
  if(denom===0){alert('Z‚ÇÇ ne peut pas √™tre nul !');return;}
  const ra = (a1*a2 + b1*b2)/denom, rb = (b1*a2 - a1*b2)/denom;
  const mod = Math.sqrt(ra*ra+rb*rb);
  const arg = Math.atan2(rb,ra)*180/Math.PI;
  document.getElementById('rProd').textContent = ra.toFixed(3) + (rb>=0?' + j':' ‚àí j') + Math.abs(rb).toFixed(3);
  document.getElementById('rProdMod').textContent = mod.toFixed(4);
  document.getElementById('rProdArg').textContent = arg.toFixed(2) + '¬∞';
  document.getElementById('prodResult').classList.add('show');
}

function calcSignal() {
  const smax=parseFloat(document.getElementById('sMax').value);
  const freq=parseFloat(document.getElementById('sFreq').value);
  const seff = smax/Math.sqrt(2);
  const T = 1/freq;
  const omega = 2*Math.PI*freq;
  document.getElementById('sEff').textContent = seff.toFixed(2) + ' V (ou A)';
  document.getElementById('sPeriod').textContent = (T*1000).toFixed(2) + ' ms';
  document.getElementById('sOmega').textContent = omega.toFixed(2) + ' rad/s';
  document.getElementById('sExpr').textContent = smax.toFixed(1) + '¬∑sin(' + omega.toFixed(0) + 't)';
  document.getElementById('signalResult').classList.add('show');
}

function calcImpedance() {
  const R=parseFloat(document.getElementById('iR').value);
  const L=parseFloat(document.getElementById('iL').value)*1e-3;
  const C=parseFloat(document.getElementById('iC').value)*1e-6;
  const f=parseFloat(document.getElementById('iF').value);
  const omega=2*Math.PI*f;
  const XL=L*omega, XC=1/(C*omega), X=XL-XC;
  const modZ=Math.sqrt(R*R+X*X);
  const phi=Math.atan2(X,R)*180/Math.PI;
  document.getElementById('iXL').textContent = XL.toFixed(3) + ' Œ©';
  document.getElementById('iXC').textContent = XC.toFixed(3) + ' Œ©';
  document.getElementById('iX').textContent = X.toFixed(3) + ' Œ©';
  document.getElementById('iZ').textContent = R.toFixed(2) + (X>=0?' + j':' ‚àí j') + Math.abs(X).toFixed(2) + ' Œ©';
  document.getElementById('iMod').textContent = modZ.toFixed(3) + ' Œ©';
  document.getElementById('iPhi').textContent = phi.toFixed(2) + '¬∞';
  document.getElementById('iChar').textContent = X>0 ? '‚ö° Inductif (Q>0)' : X<0 ? '‚ö° Capacitif (Q<0)' : '‚ö° R√©sistif pur';
  document.getElementById('impedanceResult').classList.add('show');
}

function calcPower() {
  const V=parseFloat(document.getElementById('pV').value);
  const I=parseFloat(document.getElementById('pI').value);
  const phi=parseFloat(document.getElementById('pPhi').value)*Math.PI/180;
  const P=V*I*Math.cos(phi), Q=V*I*Math.sin(phi), S=V*I;
  const cosP=Math.cos(phi);
  document.getElementById('pP').textContent = P.toFixed(1) + ' W';
  document.getElementById('pQ').textContent = Q.toFixed(1) + ' VAr';
  document.getElementById('pS').textContent = S.toFixed(1) + ' VA';
  document.getElementById('pCos').textContent = cosP.toFixed(4);
  document.getElementById('pVerif').textContent = '‚àö('+ P.toFixed(0)+'¬≤+'+Q.toFixed(0)+'¬≤) = ' + Math.sqrt(P*P+Q*Q).toFixed(1) + ' ‚âà ' + S.toFixed(1) + ' ‚úì';
  document.getElementById('powerResult').classList.add('show');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// QCM DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const QCMs = {
  complexes: [
    {
      q: "Quelle est la valeur de <strong>j¬≤</strong> ?",
      opts: ["1", "‚àí1", "j", "0"],
      correct: 1,
      expl: "<strong>j¬≤ = ‚àí1</strong> est la d√©finition fondamentale de l'unit√© imaginaire. C'est pour cela que j = ‚àö(‚àí1). Cette propri√©t√© est √† la base de tous les calculs en complexes."
    },
    {
      q: "Le module de Z = 3 + j4 est :",
      opts: ["3", "4", "5", "7"],
      correct: 2,
      expl: "<strong>|Z| = ‚àö(3¬≤ + 4¬≤) = ‚àö(9 + 16) = ‚àö25 = 5</strong>. C'est le th√©or√®me de Pythagore appliqu√© au plan complexe."
    },
    {
      q: "L'argument du nombre complexe Z = j (avec a=0, b=1) est :",
      opts: ["0¬∞", "45¬∞", "90¬∞", "180¬∞"],
      correct: 2,
      expl: "<strong>œÜ = arctan(1/0) = 90¬∞</strong>. Le nombre j se trouve sur l'axe imaginaire positif, donc son argument est exactement œÄ/2 = 90¬∞."
    },
    {
      q: "Pour diviser deux complexes Z‚ÇÅ/Z‚ÇÇ, quelle op√©ration effectue-t-on en forme exponentielle ?",
      opts: [
        "On divise les modules et on additionne les arguments",
        "On additionne les modules et on divise les arguments",
        "On divise les modules et on soustrait les arguments",
        "On multiplie les modules et on divise les arguments"
      ],
      correct: 2,
      expl: "En forme exponentielle : <strong>Z‚ÇÅ/Z‚ÇÇ = (|Z‚ÇÅ|/|Z‚ÇÇ|)¬∑e^{j(œÜ‚ÇÅ‚àíœÜ‚ÇÇ)}</strong>. On divise les modules et on soustrait les arguments. Sym√©trique de la multiplication."
    },
    {
      q: "En notation complexe, la d√©riv√©e d/dt[<u>V</u>] vaut :",
      opts: ["œâ¬∑<u>V</u>", "jœâ¬∑<u>V</u>", "<u>V</u>/jœâ", "j¬∑<u>V</u>"],
      correct: 1,
      expl: "<strong>d/dt[V] = jœâ¬∑V</strong>. Multiplier par jœâ en complexe √©quivaut √† d√©river dans le domaine temporel. Le facteur j traduit l'avance de phase de 90¬∞."
    }
  ],
  signaux: [
    {
      q: "Un signal sinuso√Ødal a une valeur cr√™te de 141,4 V. Quelle est sa valeur efficace (RMS) ?",
      opts: ["141,4 V", "200 V", "100 V", "70,7 V"],
      correct: 2,
      expl: "<strong>V_eff = V_max / ‚àö2 = 141,4 / ‚àö2 = 100 V</strong>. Le r√©seau fran√ßais 230 V est une valeur efficace ; sa cr√™te est 230√ó‚àö2 ‚âà 325 V."
    },
    {
      q: "La valeur moyenne d'un signal sinuso√Ødal pur sur une p√©riode compl√®te est :",
      opts: ["V_max", "V_max/‚àö2", "V_max/2", "Z√©ro"],
      correct: 3,
      expl: "La valeur moyenne d'un sinuso√Øde est <strong>toujours nulle</strong> sur une p√©riode : les alternances positive et n√©gative se compensent. C'est pourquoi on utilise la valeur efficace pour caract√©riser la 'puissance' du signal."
    },
    {
      q: "Pour f = 50 Hz, quelle est la pulsation œâ ?",
      opts: ["50 rad/s", "100 rad/s", "100œÄ rad/s", "50œÄ rad/s"],
      correct: 2,
      expl: "<strong>œâ = 2œÄf = 2œÄ √ó 50 = 100œÄ ‚âà 314 rad/s</strong>. La pulsation est li√©e √† la fr√©quence par le facteur 2œÄ."
    },
    {
      q: "Si le courant i(t) = I‚àö2¬∑sin(œât ‚àí 30¬∞), quel est son phaseur complexe (tension √† l'origine) ?",
      opts: ["I¬∑e^{j30¬∞}", "I¬∑e^{‚àíj30¬∞}", "I¬∑e^{j0}", "‚àö2¬∑I¬∑e^{‚àíj30¬∞}"],
      correct: 1,
      expl: "<strong>I = I¬∑e^{‚àíj30¬∞}</strong>. Le module est la valeur efficace I, et l'argument est la phase initiale ‚àí30¬∞. On n'inclut PAS le ‚àö2 dans le phaseur."
    }
  ],
  impedances: [
    {
      q: "L'imp√©dance complexe d'une inductance L √† la pulsation œâ est :",
      opts: ["R", "jLœâ", "1/(jCœâ)", "Lœâ"],
      correct: 1,
      expl: "<strong>Z_L = jLœâ</strong>. Le j indique que la tension est en avance de 90¬∞ sur le courant. La r√©actance inductive est X_L = Lœâ (Ohm)."
    },
    {
      q: "Dans un circuit RLC s√©rie, Z = 10 ‚àí j5 Œ©. Quel est le caract√®re du circuit ?",
      opts: ["R√©sistif", "Inductif (œÜ > 0)", "Capacitif (œÜ < 0)", "Impossible √† d√©terminer"],
      correct: 2,
      expl: "La partie imaginaire est <strong>n√©gative (‚àíj5)</strong>, donc X < 0 ‚Üí circuit capacitif. Le courant est en avance sur la tension, œÜ < 0."
    },
    {
      q: "Pour deux imp√©dances Z‚ÇÅ = 3 + j4 Œ© et Z‚ÇÇ = 3 ‚àí j4 Œ© en s√©rie, quelle est Z_eq ?",
      opts: ["6 Œ©", "j8 Œ©", "0 Œ©", "6 + j0 Œ©"],
      correct: 3,
      expl: "<strong>Z_eq = Z‚ÇÅ + Z‚ÇÇ = (3+3) + j(4‚àí4) = 6 + j0 = 6 Œ©</strong>. C'est une imp√©dance purement r√©sistive ! Les parties r√©actives se compensent."
    },
    {
      q: "Que vaut 1/(jœâ) ? (utilis√© pour l'int√©gration)",
      opts: ["jœâ", "‚àíjœâ", "j/œâ", "‚àíj/œâ"],
      correct: 3,
      expl: "<strong>1/(jœâ) = ‚àíj/œâ</strong> car 1/j = ‚àíj (multiplier par j*/j* = ‚àíj/1). Int√©grer en temporel = diviser par jœâ en complexe."
    }
  ],
  puissances: [
    {
      q: "Quelle est la relation entre S, P et Q ?",
      opts: ["S = P + Q", "S = P ‚àí Q", "S¬≤ = P¬≤ + Q¬≤", "S = ‚àöP¬∑Q"],
      correct: 2,
      expl: "<strong>S¬≤ = P¬≤ + Q¬≤</strong>. C'est le th√©or√®me de Pythagore appliqu√© au triangle des puissances. S est l'hypot√©nuse."
    },
    {
      q: "Un moteur consomme P = 5 kW avec cosœÜ = 0,8. Quelle est la puissance apparente S ?",
      opts: ["4 kVA", "5 kVA", "6,25 kVA", "8 kVA"],
      correct: 2,
      expl: "<strong>S = P / cosœÜ = 5000 / 0,8 = 6250 VA = 6,25 kVA</strong>. Un mauvais facteur de puissance oblige le g√©n√©rateur √† fournir plus de puissance apparente."
    },
    {
      q: "La puissance complexe S est d√©finie comme :",
      opts: ["S = V¬∑I", "S = V¬∑I*", "S = V*¬∑I", "S = V¬≤/Z"],
      correct: 1,
      expl: "<strong>S = V¬∑I*</strong> (avec I* le conjugu√© de I). Cette d√©finition avec le conjugu√© garantit que Re(S) = P = VI¬∑cosœÜ > 0 pour un r√©cepteur."
    },
    {
      q: "Un condensateur pur (sans r√©sistance) a une puissance active P √©gale √† :",
      opts: ["V¬≤¬∑Cœâ", "V¬≤/(Cœâ)", "0", "Cœâ"],
      correct: 2,
      expl: "Pour un condensateur pur : <strong>P = 0</strong>. Un composant r√©actif pur (L ou C) ne consomme aucune puissance active ‚Äî il stocke et restitue l'√©nergie alternativement."
    },
    {
      q: "Pour am√©liorer le facteur de puissance d'une installation inductive, on installe :",
      opts: ["Une r√©sistance en s√©rie", "Une inductance suppl√©mentaire", "Un condensateur en parall√®le", "Un transformateur"],
      correct: 2,
      expl: "<strong>Un condensateur en parall√®le</strong> produit de la puissance r√©active n√©gative (Q_C < 0) qui compense la puissance r√©active positive de l'inductance (Q_L > 0). Cela r√©duit Q_total et augmente cosœÜ."
    }
  ],
  'triphas√©': [
    {
      q: "Dans un r√©seau 230V/400V √©quilibr√© direct, quelle est la relation entre la tension compos√©e U et la tension simple V ?",
      opts: ["U = V", "U = V/‚àö3", "U = ‚àö3¬∑V", "U = 3¬∑V"],
      correct: 2,
      expl: "U = ‚àö3¬∑V est la relation fondamentale. 400 = ‚àö3 √ó 230 ‚âà 1,732 √ó 230 = 398 V ‚âà 400 V. Les tensions compos√©es (entre phases) sont ‚àö3 fois plus grandes que les tensions simples (phase-neutre)."
    },
    {
      q: "Pour un r√©cepteur √©toile √©quilibr√©, quelle relation unit le courant de ligne I et le courant de phase J ?",
      opts: ["I = J‚àö3", "I = J/‚àö3", "I = J", "I = 3J"],
      correct: 2,
      expl: "En couplage √©toile : I = J. Le courant traversant chaque imp√©dance de phase est identique au courant de ligne. C'est la diff√©rence avec le triangle o√π I = J‚àö3."
    },
    {
      q: "La puissance instantan√©e totale en triphas√© √©quilibr√© est :",
      opts: ["Pulsatoire √† 2œâ comme en monophas√©", "Constante et √©gale √† 3VI¬∑cosœÜ", "Nulle en r√©gime permanent", "Proportionnelle √† sin(œât)"],
      correct: 1,
      expl: "C'est l'avantage majeur du triphas√© ! La puissance instantan√©e totale p‚ÇÉœÜ = 3VI¬∑cosœÜ est CONSTANTE (pas de fluctuation √† 2œâ). Cela explique l'absence de vibrations dans les moteurs triphas√©s et leur couple r√©gulier."
    },
    {
      q: "Pour un r√©cepteur triangle, quelle est la tension aux bornes de chaque imp√©dance ?",
      opts: ["La tension simple V", "La tension compos√©e U", "U/‚àö3", "‚àö3¬∑V/2"],
      correct: 1,
      expl: "En couplage triangle, chaque imp√©dance est branch√©e directement entre deux phases : elle voit donc la tension compos√©e U = ‚àö3¬∑V. C'est pourquoi on utilise le triangle quand les appareils sont con√ßus pour la tension compos√©e."
    },
    {
      q: "Pour relever le facteur de puissance d'une charge inductive, on place des condensateurs en parall√®le. La puissance r√©active Qc fournie par un banc de 3 condensateurs en √©toile vaut :",
      opts: ["Qc = +3œâCV¬≤", "Qc = ‚àí3œâCU¬≤", "Qc = ‚àí3œâCV¬≤", "Qc = ‚àíœâCU¬≤/3"],
      correct: 2,
      expl: "Qc = ‚àí3œâCV¬≤ pour un couplage √©toile (V = tension simple). Le signe n√©gatif indique que les condensateurs fournissent de la puissance r√©active capacitive, compensant la puissance r√©active inductive (positive) de la charge."
    },
    {
      q: "Le th√©or√®me de Boucherot affirme que pour un syst√®me triphas√© avec plusieurs charges, S_tot (puissance apparente scalaire) est-elle additive ?",
      opts: ["Oui, S_tot = Œ£S·µ¢", "Non, seules P_tot et Q_tot sont additives", "Oui si les charges sont identiques", "Non, aucune puissance n'est additive"],
      correct: 1,
      expl: "Boucherot : P_tot = Œ£P·µ¢ ‚úì et Q_tot = Œ£Q·µ¢ ‚úì et ≈ú_tot = Œ£≈ú·µ¢ ‚úì MAIS S_tot ‚â† Œ£S·µ¢ ‚úó. La puissance apparente scalaire ne s'additionne PAS. On calcule S_tot = ‚àö(P_tot¬≤ + Q_tot¬≤) apr√®s avoir additionn√© P et Q s√©par√©ment."
    }
  ],
  methodologie: [
    {
      q: "Pour un circuit RL s√©rie avec R = 10 Œ© et X_L = 10 Œ©, quel est le d√©phasage œÜ ?",
      opts: ["0¬∞", "30¬∞", "45¬∞", "90¬∞"],
      correct: 2,
      expl: "<strong>œÜ = arctan(X_L/R) = arctan(10/10) = arctan(1) = 45¬∞</strong>. Les parties r√©elle et imaginaire sont √©gales, donc l'angle est 45¬∞."
    },
    {
      q: "Dans un circuit RL s√©rie avec V = 100 V et Z = 10+j10 Œ©, quelle est l'intensit√© I ?",
      opts: ["10 A", "7,07 A", "14,1 A", "5 A"],
      correct: 1,
      expl: "<strong>|Z| = ‚àö(10¬≤+10¬≤) = 10‚àö2 ‚âà 14,14 Œ©</strong><br>I = V/|Z| = 100/14,14 ‚âà <strong>7,07 A</strong>"
    },
    {
      q: "On dit qu'un circuit est en r√©sonance s√©rie quand :",
      opts: ["R = 0", "X_L = X_C", "Z est maximum", "P = 0"],
      correct: 1,
      expl: "√Ä la r√©sonance s√©rie : <strong>X_L = X_C ‚Üí Lœâ = 1/(Cœâ) ‚Üí œâ‚ÇÄ = 1/‚àö(LC)</strong>. L'imp√©dance est purement r√©sistive (|Z| minimum = R), le courant est maximum."
    },
    {
      q: "La loi des mailles peut s'appliquer directement :",
      opts: [
        "En valeurs efficaces scalaires",
        "En valeurs instantan√©es ou en complexes",
        "Uniquement en r√©gime continu",
        "Uniquement en r√©gime sinuso√Ødal"
      ],
      correct: 1,
      expl: "<strong>En valeurs instantan√©es ou en complexes.</strong> PAS directement en valeurs efficaces scalaires, car les d√©phasages s'ajoutent vectoriellement. Œ£U_eff ‚â† V_source en g√©n√©ral."
    },
    {
      q: "Un circuit RLC s√©rie a R=5Œ©, L=0,1H, C=100¬µF, f=50Hz. Le circuit est :",
      opts: [
        "R√©sistif (œÜ=0¬∞)",
        "Inductif (X_L > X_C)",
        "Capacitif (X_C > X_L)",
        "√Ä la r√©sonance"
      ],
      correct: 1,
      expl: "X_L = 0,1√ó100œÄ ‚âà 31,4 Œ©<br>X_C = 1/(100√ó10‚Åª‚Å∂√ó100œÄ) ‚âà 31,8 Œ©<br>X_C > X_L ‚Üí circuit <strong>capacitif</strong>. (R√©ponse c)"
    }
  ]
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// QCM RENDERER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderQCM(moduleId, questions) {
  const container = document.getElementById('qcm-' + moduleId);
  if (!container) return;
  container.innerHTML = '';
  let answered = 0, correct = 0;

  questions.forEach((q, qi) => {
    const card = document.createElement('div');
    card.className = 'qcm-card';
    card.id = 'qcard-' + moduleId + '-' + qi;

    const letters = ['A','B','C','D'];
    const optsHTML = q.opts.map((o,oi) => `
      <div class="qcm-opt" id="opt-${moduleId}-${qi}-${oi}" onclick="selectOpt('${moduleId}',${qi},${oi},${q.correct})">
        <div class="opt-letter">${letters[oi]}</div>${o}
      </div>`).join('');

    card.innerHTML = `
      <div class="qcm-q"><strong>Q${qi+1}.</strong> ${q.q}</div>
      <div class="qcm-options">${optsHTML}</div>
      <div class="qcm-explanation" id="expl-${moduleId}-${qi}">üí° ${q.expl}</div>`;
    container.appendChild(card);
  });

  // Score total
  const scoreDiv = document.createElement('div');
  scoreDiv.className = 'qcm-total';
  scoreDiv.id = 'score-' + moduleId;
  scoreDiv.innerHTML = `
    <div class="score-big" id="score-num-${moduleId}">0/${questions.length}</div>
    <div class="score-msg" id="score-msg-${moduleId}">R√©pondez √† toutes les questions</div>
    <button class="retry-btn" onclick="retryQCM('${moduleId}')">Recommencer</button>`;
  container.appendChild(scoreDiv);
}

const qcmState = {};

function selectOpt(mid, qi, oi, correct) {
  const key = mid + '-' + qi;
  if (qcmState[key]) return; // already answered
  qcmState[key] = {chosen: oi, correct: correct, isCorrect: oi === correct};

  // Visual feedback
  const opts = document.querySelectorAll(`[id^="opt-${mid}-${qi}-"]`);
  opts.forEach((opt, i) => {
    opt.classList.add('disabled');
    if (i === correct) opt.classList.add('correct-answer');
  });
  const chosen = document.getElementById(`opt-${mid}-${qi}-${oi}`);
  if (oi === correct) {
    chosen.classList.add('selected', 'correct');
    document.getElementById(`qcard-${mid}-${qi}`).classList.add('correct');
  } else {
    chosen.classList.add('selected', 'wrong');
    document.getElementById(`qcard-${mid}-${qi}`).classList.add('wrong');
  }

  // Show explanation
  document.getElementById(`expl-${mid}-${qi}`).classList.add('show');

  // Check if all answered
  checkAllAnswered(mid);
}

function checkAllAnswered(mid) {
  const qs = QCMs[mid];
  let total = qs.length, answered = 0, correct = 0;
  qs.forEach((q,i) => {
    const k = mid + '-' + i;
    if (qcmState[k]) { answered++; if(qcmState[k].isCorrect) correct++; }
  });
  if (answered === total) {
    const scoreDiv = document.getElementById('score-' + mid);
    scoreDiv.classList.add('show');
    document.getElementById('score-num-' + mid).textContent = correct + '/' + total;
    const pct = Math.round(correct/total*100);
    let msg = pct >= 80 ? 'üéâ Excellent ! Vous ma√Ætrisez ce module.' :
              pct >= 60 ? 'üëç Bien ! Revoyez les points incorrects.' :
              'üìö Continuez √† r√©viser ‚Äî relisez les explications.';
    document.getElementById('score-msg-' + mid).textContent = msg;
    state.progress[mid] = pct;
    state.scores[mid] = {correct, total};
  }
}

function retryQCM(mid) {
  // Reset state
  const qs = QCMs[mid];
  qs.forEach((q,i) => { delete qcmState[mid+'-'+i]; });
  document.getElementById('score-' + mid).classList.remove('show');
  renderQCM(mid, qs);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PROGRESSION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const modules = ['complexes','signaux','impedances','puissances','methodologie','triphas√©'];
const moduleNames = ['Nombres Complexes','Signaux Sinuso√Ødaux','Lois & Imp√©dances','Puissances','M√©thodologie','Syst√®mes Triphas√©s'];

function renderProgression() {
  const container = document.getElementById('progressItems');
  container.innerHTML = modules.map((m,i) => {
    const pct = state.progress[m] || 0;
    const score = state.scores[m] ? `${state.scores[m].correct}/${state.scores[m].total}` : '‚Äî';
    return `
      <div class="prog-item">
        <span class="prog-label">${moduleNames[i]}</span>
        <div class="prog-bar-wrap"><div class="prog-bar-fill" style="width:${pct}%"></div></div>
        <span class="prog-pct">${pct}%</span>
      </div>`;
  }).join('');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// INIT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
window.addEventListener('DOMContentLoaded', () => {
  // Render all QCMs
  Object.keys(QCMs).forEach(mid => renderQCM(mid, QCMs[mid]));
  // Draw initial complex plane
  setTimeout(drawComplex, 100);
  // Show home
  showHome();
});
</script>
</body>
</html>
