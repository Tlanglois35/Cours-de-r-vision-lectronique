<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ElecMath â€” RÃ©seau Ã‰lectrique FISA3</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Space+Mono:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0a0a0f;
  --bg2: #12121a;
  --bg3: #1a1a26;
  --accent: #e8f428;
  --accent2: #ff5e3a;
  --accent3: #3af4c8;
  --text: #e8e8f0;
  --text2: #8888aa;
  --border: #2a2a3a;
  --card: #16161f;
}
*{margin:0;padding:0;box-sizing:border-box;}
html{scroll-behavior:smooth;}
body{background:var(--bg);color:var(--text);font-family:'Inter',sans-serif;min-height:100vh;overflow-x:hidden;}

/* â”€â”€ BACKGROUND â”€â”€ */
.bg-noise{position:fixed;top:0;left:0;width:100%;height:100%;opacity:.03;pointer-events:none;z-index:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");background-size:200px;}
.bg-glow{position:fixed;width:600px;height:600px;border-radius:50%;background:radial-gradient(circle,rgba(232,244,40,.06) 0%,transparent 70%);pointer-events:none;z-index:0;top:-100px;left:-100px;animation:glowMove 8s ease-in-out infinite alternate;}
@keyframes glowMove{to{transform:translate(200px,150px);}}

/* â”€â”€ NAV â”€â”€ */
nav{position:fixed;top:0;left:0;right:0;z-index:100;background:rgba(10,10,15,.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;display:flex;align-items:center;height:60px;gap:1rem;}
.nav-logo{font-family:'Syne',sans-serif;font-weight:800;font-size:1.2rem;color:var(--accent);letter-spacing:-0.02em;margin-right:auto;}
.nav-logo span{color:var(--text2);font-weight:400;}
.nav-btn{background:none;border:none;color:var(--text2);font-family:'Inter',sans-serif;font-size:.8rem;padding:.4rem .8rem;border-radius:4px;cursor:pointer;transition:all .2s;letter-spacing:.05em;text-transform:uppercase;}
.nav-btn:hover,.nav-btn.active{color:var(--accent);background:rgba(232,244,40,.08);}
.progress-bar{position:fixed;top:60px;left:0;height:2px;background:var(--accent);z-index:99;transition:width .3s;}

/* â”€â”€ HERO â”€â”€ */
.hero{min-height:100vh;display:flex;flex-direction:column;justify-content:center;padding:8rem 4rem 4rem;position:relative;z-index:1;}
.hero-badge{display:inline-flex;align-items:center;gap:.5rem;background:rgba(232,244,40,.1);border:1px solid rgba(232,244,40,.3);color:var(--accent);font-family:'Space Mono',monospace;font-size:.75rem;padding:.4rem .8rem;border-radius:2px;margin-bottom:2rem;letter-spacing:.1em;}
.hero h1{font-family:'Syne',sans-serif;font-weight:800;font-size:clamp(3rem,8vw,7rem);line-height:.95;color:var(--text);margin-bottom:1.5rem;}
.hero h1 em{font-style:normal;color:var(--accent);}
.hero p{font-size:1.1rem;color:var(--text2);max-width:560px;line-height:1.7;margin-bottom:3rem;}
.hero-stats{display:flex;gap:3rem;margin-bottom:3rem;}
.stat{display:flex;flex-direction:column;gap:.25rem;}
.stat-num{font-family:'Syne',sans-serif;font-weight:800;font-size:2rem;color:var(--accent);}
.stat-label{font-size:.8rem;color:var(--text2);text-transform:uppercase;letter-spacing:.1em;}
.hero-cta{display:inline-flex;align-items:center;gap:.75rem;background:var(--accent);color:var(--bg);font-family:'Syne',sans-serif;font-weight:700;padding:1rem 2rem;border-radius:4px;cursor:pointer;border:none;font-size:1rem;transition:all .2s;letter-spacing:.02em;}
.hero-cta:hover{background:#fff;transform:translateY(-2px);box-shadow:0 20px 40px rgba(232,244,40,.2);}

/* â”€â”€ SECTION WRAPPER â”€â”€ */
.section{padding:6rem 4rem;position:relative;z-index:1;display:none;}
.section.active{display:block;}
.section-header{margin-bottom:4rem;}
.section-tag{font-family:'Space Mono',monospace;font-size:.75rem;color:var(--accent);letter-spacing:.15em;text-transform:uppercase;margin-bottom:1rem;display:block;}
.section-title{font-family:'Syne',sans-serif;font-weight:800;font-size:clamp(2rem,5vw,4rem);line-height:1;color:var(--text);}
.section-sub{font-size:1rem;color:var(--text2);margin-top:1rem;max-width:600px;line-height:1.6;}

/* â”€â”€ MODULES GRID â”€â”€ */
.modules-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem;}
.module-card{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:2rem;cursor:pointer;transition:all .3s;position:relative;overflow:hidden;}
.module-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--accent);transform:scaleX(0);transform-origin:left;transition:transform .3s;}
.module-card:hover::before{transform:scaleX(1);}
.module-card:hover{border-color:rgba(232,244,40,.3);transform:translateY(-4px);box-shadow:0 20px 40px rgba(0,0,0,.4);}
.module-num{font-family:'Space Mono',monospace;font-size:.75rem;color:var(--text2);margin-bottom:1rem;letter-spacing:.1em;}
.module-title{font-family:'Syne',sans-serif;font-weight:700;font-size:1.3rem;color:var(--text);margin-bottom:.75rem;}
.module-desc{font-size:.875rem;color:var(--text2);line-height:1.6;}
.module-tags{display:flex;gap:.5rem;margin-top:1.5rem;flex-wrap:wrap;}
.tag{font-size:.7rem;padding:.25rem .6rem;border-radius:2px;font-family:'Space Mono',monospace;letter-spacing:.05em;}
.tag-math{background:rgba(58,244,200,.1);color:var(--accent3);border:1px solid rgba(58,244,200,.2);}
.tag-circuit{background:rgba(255,94,58,.1);color:var(--accent2);border:1px solid rgba(255,94,58,.2);}
.tag-power{background:rgba(232,244,40,.1);color:var(--accent);border:1px solid rgba(232,244,40,.2);}
.module-arrow{position:absolute;bottom:2rem;right:2rem;font-size:1.5rem;color:var(--text2);transition:all .3s;}
.module-card:hover .module-arrow{color:var(--accent);transform:translate(4px,-4px);}

/* â”€â”€ LESSON â”€â”€ */
.lesson-layout{display:grid;grid-template-columns:280px 1fr;gap:3rem;align-items:start;}
.lesson-sidebar{position:sticky;top:80px;background:var(--card);border:1px solid var(--border);border-radius:8px;padding:1.5rem;overflow:hidden;}
.sidebar-title{font-family:'Syne',sans-serif;font-weight:700;font-size:.9rem;color:var(--text);margin-bottom:1rem;padding-bottom:.75rem;border-bottom:1px solid var(--border);}
.sidebar-items{list-style:none;display:flex;flex-direction:column;gap:.25rem;}
.sidebar-item{padding:.5rem .75rem;border-radius:4px;cursor:pointer;font-size:.85rem;color:var(--text2);transition:all .2s;display:flex;align-items:center;gap:.5rem;}
.sidebar-item:hover,.sidebar-item.active{background:rgba(232,244,40,.08);color:var(--accent);}
.sidebar-item.done{color:var(--accent3);}
.sidebar-item.done::before{content:'âœ“';font-size:.7rem;color:var(--accent3);}
.sidebar-item:not(.done)::before{content:'â—‹';font-size:.7rem;}
.lesson-content{min-width:0;}
.lesson-header{margin-bottom:3rem;}
.back-btn{background:none;border:1px solid var(--border);color:var(--text2);padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-size:.8rem;margin-bottom:2rem;transition:all .2s;font-family:'Inter',sans-serif;}
.back-btn:hover{border-color:var(--accent);color:var(--accent);}

/* â”€â”€ CONTENT BLOCKS â”€â”€ */
.content-block{margin-bottom:2.5rem;}
.block-title{font-family:'Syne',sans-serif;font-weight:700;font-size:1.5rem;color:var(--text);margin-bottom:1.25rem;}
.block-text{font-size:.95rem;color:var(--text2);line-height:1.8;margin-bottom:1rem;}
.block-text strong{color:var(--text);}

/* FORMULA BOX */
.formula-box{background:var(--bg3);border:1px solid var(--border);border-left:3px solid var(--accent);border-radius:0 8px 8px 0;padding:1.5rem 2rem;margin:1.5rem 0;font-family:'Space Mono',monospace;position:relative;overflow:hidden;}
.formula-box::before{content:'âˆ‘';position:absolute;right:1rem;top:50%;transform:translateY(-50%);font-size:4rem;color:rgba(232,244,40,.05);pointer-events:none;}
.formula-label{font-size:.7rem;color:var(--accent);letter-spacing:.15em;text-transform:uppercase;margin-bottom:.75rem;display:block;}
.formula{font-size:1.1rem;color:var(--accent);font-weight:700;line-height:1.6;}
.formula sub,.formula sup{font-size:.6em;}
.formula-explain{font-size:.8rem;color:var(--text2);margin-top:.75rem;font-family:'Inter',sans-serif;line-height:1.6;}

/* EXPANDABLE */
.expand-card{border:1px solid var(--border);border-radius:8px;overflow:hidden;margin:1rem 0;}
.expand-header{background:var(--bg2);padding:1rem 1.5rem;cursor:pointer;display:flex;align-items:center;justify-content:space-between;transition:all .2s;}
.expand-header:hover{background:var(--bg3);}
.expand-header-text{font-weight:500;font-size:.95rem;color:var(--text);}
.expand-icon{color:var(--accent);font-size:1.2rem;transition:transform .3s;font-family:'Space Mono',monospace;}
.expand-content{max-height:0;overflow:hidden;transition:max-height .4s ease,padding .3s;}
.expand-content.open{max-height:2000px;padding:1.5rem;}
.expand-content p,.expand-content li{font-size:.9rem;color:var(--text2);line-height:1.7;}
.expand-content ul{list-style:none;display:flex;flex-direction:column;gap:.5rem;}
.expand-content li::before{content:'â†’ ';color:var(--accent);}

/* EXAMPLE BOX */
.example-box{background:rgba(58,244,200,.05);border:1px solid rgba(58,244,200,.15);border-radius:8px;padding:1.5rem;margin:1.5rem 0;}
.example-label{font-family:'Space Mono',monospace;font-size:.7rem;color:var(--accent3);letter-spacing:.15em;text-transform:uppercase;margin-bottom:.75rem;display:block;}
.example-box .formula{color:var(--accent3);}

/* ALERT */
.alert{background:rgba(255,94,58,.05);border:1px solid rgba(255,94,58,.2);border-radius:8px;padding:1rem 1.5rem;margin:1rem 0;display:flex;gap:.75rem;align-items:flex-start;}
.alert-icon{color:var(--accent2);font-size:1.2rem;flex-shrink:0;margin-top:.1rem;}
.alert-text{font-size:.875rem;color:var(--text2);line-height:1.6;}
.alert-text strong{color:var(--accent2);}

/* TIP */
.tip{background:rgba(232,244,40,.04);border:1px solid rgba(232,244,40,.15);border-radius:8px;padding:1rem 1.5rem;margin:1rem 0;display:flex;gap:.75rem;}
.tip-icon{color:var(--accent);font-size:1.1rem;flex-shrink:0;}
.tip-text{font-size:.875rem;color:var(--text2);line-height:1.6;}
.tip-text strong{color:var(--accent);}

/* VISUAL TABLE */
.vtable{width:100%;border-collapse:separate;border-spacing:0;margin:1.5rem 0;border-radius:8px;overflow:hidden;}
.vtable th{background:var(--bg3);padding:.75rem 1rem;font-family:'Syne',sans-serif;font-weight:700;font-size:.85rem;color:var(--text);text-align:left;border-bottom:2px solid var(--accent);}
.vtable td{padding:.75rem 1rem;border-bottom:1px solid var(--border);font-size:.875rem;color:var(--text2);vertical-align:top;}
.vtable tr:last-child td{border-bottom:none;}
.vtable tr:hover td{background:rgba(255,255,255,.02);}
.vtable .mono{font-family:'Space Mono',monospace;color:var(--accent3);}
.vtable .accent{color:var(--accent);}

/* INTERACTIVE CALCULATOR */
.calc-box{background:var(--bg3);border:1px solid var(--border);border-radius:12px;padding:2rem;margin:2rem 0;}
.calc-title{font-family:'Syne',sans-serif;font-weight:700;font-size:1.1rem;color:var(--text);margin-bottom:1.5rem;display:flex;align-items:center;gap:.5rem;}
.calc-title span{background:rgba(232,244,40,.15);color:var(--accent);padding:.2rem .6rem;border-radius:4px;font-size:.8rem;font-family:'Space Mono',monospace;}
.calc-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.5rem;}
.calc-field{display:flex;flex-direction:column;gap:.4rem;}
.calc-label{font-size:.75rem;color:var(--text2);letter-spacing:.05em;font-family:'Space Mono',monospace;}
.calc-input{background:var(--bg2);border:1px solid var(--border);color:var(--text);padding:.6rem .8rem;border-radius:6px;font-family:'Space Mono',monospace;font-size:.9rem;width:100%;outline:none;transition:border-color .2s;}
.calc-input:focus{border-color:var(--accent);}
.calc-btn{background:var(--accent);color:var(--bg);font-family:'Syne',sans-serif;font-weight:700;padding:.75rem 1.5rem;border:none;border-radius:6px;cursor:pointer;font-size:.95rem;transition:all .2s;width:100%;}
.calc-btn:hover{background:#fff;box-shadow:0 8px 20px rgba(232,244,40,.2);}
.calc-result{background:var(--bg2);border:1px solid rgba(232,244,40,.2);border-radius:8px;padding:1rem 1.5rem;margin-top:1rem;font-family:'Space Mono',monospace;display:none;}
.calc-result.show{display:block;}
.result-line{display:flex;justify-content:space-between;padding:.25rem 0;font-size:.9rem;}
.result-key{color:var(--text2);}
.result-val{color:var(--accent);font-weight:700;}

/* â”€â”€ QCM â”€â”€ */
.qcm-section{margin:2rem 0;}
.qcm-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem;}
.qcm-title{font-family:'Syne',sans-serif;font-weight:700;font-size:1.3rem;color:var(--text);}
.qcm-score{font-family:'Space Mono',monospace;font-size:.875rem;color:var(--text2);}
.qcm-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:2rem;margin-bottom:1.5rem;transition:border-color .3s;}
.qcm-card.correct{border-color:var(--accent3);}
.qcm-card.wrong{border-color:var(--accent2);}
.qcm-q{font-size:1rem;color:var(--text);line-height:1.6;margin-bottom:1.5rem;}
.qcm-q strong{color:var(--accent);font-family:'Space Mono',monospace;}
.qcm-options{display:flex;flex-direction:column;gap:.75rem;}
.qcm-opt{background:var(--bg2);border:1px solid var(--border);border-radius:8px;padding:.875rem 1.25rem;cursor:pointer;font-size:.9rem;color:var(--text2);transition:all .2s;display:flex;align-items:center;gap:.75rem;}
.qcm-opt:hover:not(.disabled){border-color:var(--accent);color:var(--text);}
.qcm-opt.selected.correct{background:rgba(58,244,200,.08);border-color:var(--accent3);color:var(--accent3);}
.qcm-opt.selected.wrong{background:rgba(255,94,58,.08);border-color:var(--accent2);color:var(--accent2);}
.qcm-opt.correct-answer{background:rgba(58,244,200,.08);border-color:var(--accent3);color:var(--accent3);}
.qcm-opt.disabled{cursor:default;pointer-events:none;}
.opt-letter{font-family:'Space Mono',monospace;font-size:.75rem;width:24px;height:24px;border-radius:4px;background:var(--bg3);display:flex;align-items:center;justify-content:center;flex-shrink:0;color:var(--text2);}
.qcm-explanation{background:var(--bg3);border-left:3px solid var(--accent3);padding:1rem 1.5rem;margin-top:1rem;border-radius:0 8px 8px 0;font-size:.875rem;color:var(--text2);line-height:1.6;display:none;}
.qcm-explanation.show{display:block;}
.qcm-explanation strong{color:var(--accent3);}
.submit-qcm{background:var(--accent);color:var(--bg);font-family:'Syne',sans-serif;font-weight:700;padding:.875rem 2rem;border:none;border-radius:6px;cursor:pointer;font-size:1rem;transition:all .2s;margin-top:1rem;}
.submit-qcm:hover{background:#fff;}
.qcm-total{background:var(--bg3);border:1px solid var(--border);border-radius:12px;padding:2rem;text-align:center;margin-top:2rem;display:none;}
.qcm-total.show{display:block;}
.score-big{font-family:'Syne',sans-serif;font-weight:800;font-size:4rem;color:var(--accent);}
.score-msg{font-size:1.1rem;color:var(--text2);margin-top:.5rem;}
.retry-btn{background:none;border:1px solid var(--accent);color:var(--accent);font-family:'Syne',sans-serif;font-weight:700;padding:.75rem 2rem;border-radius:6px;cursor:pointer;font-size:.95rem;margin-top:1.5rem;transition:all .2s;}
.retry-btn:hover{background:rgba(232,244,40,.1);}

/* â”€â”€ INTERACTIVE DIAGRAM â”€â”€ */
.diagram-container{background:var(--bg3);border:1px solid var(--border);border-radius:12px;padding:2rem;margin:2rem 0;position:relative;}
.diagram-label{font-family:'Space Mono',monospace;font-size:.7rem;color:var(--accent);letter-spacing:.15em;text-transform:uppercase;margin-bottom:1rem;display:block;}
svg.diagram{width:100%;max-width:600px;display:block;margin:0 auto;}

/* â”€â”€ PROGRESS â”€â”€ */
.progress-section{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:2rem;margin-bottom:2rem;}
.progress-title{font-family:'Syne',sans-serif;font-weight:700;font-size:1rem;color:var(--text);margin-bottom:1.25rem;}
.progress-items{display:flex;flex-direction:column;gap:.75rem;}
.prog-item{display:flex;align-items:center;gap:1rem;}
.prog-label{font-size:.85rem;color:var(--text2);width:160px;flex-shrink:0;}
.prog-bar-wrap{flex:1;background:var(--bg3);border-radius:2px;height:4px;overflow:hidden;}
.prog-bar-fill{height:100%;background:var(--accent);border-radius:2px;transition:width 1s ease;}
.prog-pct{font-family:'Space Mono',monospace;font-size:.75rem;color:var(--text2);width:35px;text-align:right;}

/* â”€â”€ PLANE COMPLEXE â”€â”€ */
.complex-plane{background:var(--bg3);border:1px solid var(--border);border-radius:12px;padding:2rem;margin:2rem 0;}
.plane-controls{display:flex;gap:1rem;margin-bottom:1rem;flex-wrap:wrap;}
.plane-input-group{display:flex;flex-direction:column;gap:.3rem;}
.plane-input-group label{font-size:.75rem;color:var(--text2);font-family:'Space Mono',monospace;}
.plane-input-group input{width:90px;background:var(--bg2);border:1px solid var(--border);color:var(--text);padding:.5rem;border-radius:4px;font-family:'Space Mono',monospace;font-size:.85rem;outline:none;}
.plane-input-group input:focus{border-color:var(--accent);}
.plane-btn{background:var(--accent);color:var(--bg);border:none;border-radius:4px;padding:.5rem 1rem;font-family:'Syne',sans-serif;font-weight:700;font-size:.85rem;cursor:pointer;align-self:flex-end;}
#complexCanvas{border-radius:8px;background:var(--bg2);border:1px solid var(--border);}
.complex-info{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem;margin-top:1rem;}
.cinfo{background:var(--bg2);border:1px solid var(--border);border-radius:6px;padding:.75rem;text-align:center;}
.cinfo-label{font-size:.7rem;color:var(--text2);font-family:'Space Mono',monospace;letter-spacing:.05em;display:block;margin-bottom:.25rem;}
.cinfo-val{font-family:'Space Mono',monospace;font-size:.9rem;color:var(--accent);font-weight:700;}

/* â”€â”€ BREADCRUMB â”€â”€ */
.breadcrumb{display:flex;align-items:center;gap:.5rem;font-size:.8rem;color:var(--text2);margin-bottom:2rem;}
.breadcrumb span{color:var(--text2);}
.breadcrumb .sep{color:var(--border);}
.breadcrumb .current{color:var(--text);}

/* â”€â”€ STEP INDICATOR â”€â”€ */
.steps{display:flex;gap:.5rem;margin:2rem 0;flex-wrap:wrap;}
.step{flex:1;min-width:80px;background:var(--bg3);border:1px solid var(--border);border-radius:6px;padding:.75rem;text-align:center;font-size:.75rem;color:var(--text2);font-family:'Space Mono',monospace;cursor:pointer;transition:all .2s;}
.step.active{background:rgba(232,244,40,.1);border-color:var(--accent);color:var(--accent);}
.step.done{background:rgba(58,244,200,.05);border-color:rgba(58,244,200,.3);color:var(--accent3);}

/* â”€â”€ RESPONSIVE â”€â”€ */
@media(max-width:768px){
  .hero{padding:6rem 1.5rem 3rem;}
  .section{padding:4rem 1.5rem;}
  .lesson-layout{grid-template-columns:1fr;}
  .lesson-sidebar{position:static;}
  .calc-grid{grid-template-columns:1fr;}
  .complex-info{grid-template-columns:1fr;}
}

/* â”€â”€ ANIMATIONS â”€â”€ */
@keyframes fadeUp{from{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0);}}
.fade-up{animation:fadeUp .6s ease forwards;}
.fade-up-2{animation:fadeUp .6s .15s ease both;}
.fade-up-3{animation:fadeUp .6s .3s ease both;}

/* NAV dots */
.nav-dots{display:flex;gap:.5rem;align-items:center;}
.nav-dot{width:6px;height:6px;border-radius:50%;background:var(--border);cursor:pointer;transition:all .2s;}
.nav-dot.active{background:var(--accent);width:16px;border-radius:3px;}

/* Code inline */
code{background:var(--bg3);color:var(--accent3);padding:.1em .4em;border-radius:3px;font-family:'Space Mono',monospace;font-size:.85em;}

/* Highlight */
.hl{color:var(--accent);font-weight:700;}
.hl-green{color:var(--accent3);font-weight:700;}
.hl-red{color:var(--accent2);font-weight:700;}

</style>
</head>
<body>

<div class="bg-noise"></div>
<div class="bg-glow"></div>
<div class="progress-bar" id="progressBar" style="width:0%"></div>

<!-- NAV -->
<nav>
  <div class="nav-logo">Elec<span>Math</span></div>
  <button class="nav-btn active" onclick="showHome()">Accueil</button>
  <button class="nav-btn" onclick="showSection('modules-elec')">Ã‰lectricitÃ©</button>
  <button class="nav-btn" style="color: var(--accent3);" onclick="showSection('modules-aop')">Ã‰lectronique (AOP)</button>
  <button class="nav-btn" onclick="showSection('progression')">Progression</button>
</nav>

<!-- â•â•â• HERO â•â•â• -->
<div id="home" class="hero">
  <div class="hero-badge">ğŸ“ FISA 3 â€” Zhibin ZHOU</div>
  <h1 class="fade-up">RÃ©seaux &<br>Ã‰lectronique<br><em>DÃ©codÃ©s.</em></h1>
  <p class="fade-up-2">Choisis ta matiÃ¨re pour commencer les rÃ©visions. Maths, formules, schÃ©mas et QCM â€” tout ce qu'il faut pour vraiment comprendre.</p>
  
  <div class="hero-stats fade-up-3" style="gap: 1rem; flex-wrap: wrap;">
    <button class="hero-cta" onclick="showSection('modules-elec')">âš¡ RÃ©seaux Ã‰lectriques â†’</button>
    <button class="hero-cta" style="background: var(--bg3); color: var(--accent3); border: 1px solid var(--accent3);" onclick="showSection('modules-aop')">ğŸ”Œ Amplificateurs (AOP) â†’</button>
  </div>
</div>

<!-- â•â•â• MODULES â•â•â• -->
<div id="modules-elec" class="section">
  <div class="section-header">
    <span class="section-tag">â†’ Programme</span>
    <h2 class="section-title">Choisir<br>un module</h2>
    <p class="section-sub">Chaque module contient des explications dÃ©taillÃ©es, des exemples rÃ©solus, une calculatrice interactive et un QCM pour tester vos connaissances.</p>
  </div>
  <div class="modules-grid">
    <div class="module-card" onclick="showLesson('complexes')">
      <div class="module-num">MODULE 01</div>
      <div class="module-title">Nombres Complexes</div>
      <div class="module-desc">ReprÃ©sentations algÃ©brique, trigonomÃ©trique et exponentielle. Module, argument, conjuguÃ© et opÃ©rations.</div>
      <div class="module-tags"><span class="tag tag-math">MathÃ©matiques</span><span class="tag tag-math">Phaseurs</span></div>
      <div class="module-arrow">â†—</div>
    </div>
    <div class="module-card" onclick="showLesson('signaux')">
      <div class="module-num">MODULE 02</div>
      <div class="module-title">Signaux SinusoÃ¯daux</div>
      <div class="module-desc">Valeur efficace, valeur crÃªte, frÃ©quence, pulsation, dÃ©phasage. Du temporel au complexe.</div>
      <div class="module-tags"><span class="tag tag-circuit">Signaux</span><span class="tag tag-math">RMS</span></div>
      <div class="module-arrow">â†—</div>
    </div>
    <div class="module-card" onclick="showLesson('impedances')">
      <div class="module-num">MODULE 03</div>
      <div class="module-title">Lois & ImpÃ©dances</div>
      <div class="module-desc">Lois de Kirchhoff, impÃ©dances R, L, C en complexe. Associations sÃ©rie/parallÃ¨le.</div>
      <div class="module-tags"><span class="tag tag-circuit">Circuits</span><span class="tag tag-circuit">Ohm</span></div>
      <div class="module-arrow">â†—</div>
    </div>
    <div class="module-card" onclick="showLesson('puissances')">
      <div class="module-num">MODULE 04</div>
      <div class="module-title">Puissances Ã‰lectriques</div>
      <div class="module-desc">Puissance active P, rÃ©active Q, apparente S. Facteur de puissance et triangle des puissances.</div>
      <div class="module-tags"><span class="tag tag-power">Puissance</span><span class="tag tag-power">CosÏ†</span></div>
      <div class="module-arrow">â†—</div>
    </div>
    <div class="module-card" onclick="showLesson('triphasÃ©')">
      <div class="module-num">MODULE 06</div>
      <div class="module-title">SystÃ¨mes TriphasÃ©s</div>
      <div class="module-tags"><span class="tag">rÃ©seau</span><span class="tag">Ã©toile</span><span class="tag">triangle</span></div>
      <div class="module-desc">Distribution 3 phases, rÃ©cepteurs Ã©toile et triangle, puissances triphasÃ©es, compensation d'Ã©nergie rÃ©active.</div>
      <div class="module-arrow">â†—</div>
    </div>
    <div class="module-card" onclick="showLesson('methodologie')">
      <div class="module-num">MODULE 05</div>
      <div class="module-title">MÃ©thodologie & Exemples</div>
      <div class="module-desc">Comment rÃ©soudre un circuit AC Ã©tape par Ã©tape. Exemples complets avec calculs dÃ©taillÃ©s.</div>
      <div class="module-tags"><span class="tag tag-circuit">MÃ©thode</span><span class="tag tag-power">Pratique</span></div>
      <div class="module-arrow">â†—</div>
    </div>
  </div>
</div>

<div id="modules-aop" class="section">
  <div class="section-header">
    <span class="section-tag" style="color: var(--accent3);">â†’ Programme Ã‰lectronique</span>
    <h2 class="section-title">Amplificateurs & <br>Contre-RÃ©action</h2>
    <p class="section-sub">Les principes de l'AOP, les montages linÃ©aires/non-linÃ©aires et les oscillateurs.</p>
  </div>
  <div class="modules-grid">
    <div class="module-card" onclick="showLesson('aop-bases')">
      <div class="module-num">MODULE AOP-01</div>
      <div class="module-title">GÃ©nÃ©ralitÃ©s & AOP IdÃ©al</div>
      <div class="module-desc">ModÃ©lisation des 4 types d'amplificateurs et caractÃ©ristiques de l'AOP idÃ©al vs rÃ©el.</div>
      <div class="module-tags"><span class="tag tag-math" style="border-color: var(--accent3);">Bases</span><span class="tag tag-circuit">AOP</span></div>
      <div class="module-arrow">â†—</div>
    </div>
    <div class="module-card" onclick="showLesson('aop-lineaire')">
      <div class="module-num">MODULE AOP-02</div>
      <div class="module-title">Montages LinÃ©aires</div>
      <div class="module-desc">Inverseur, non-inverseur, sommateur, suiveur, intÃ©grateur et dÃ©rivateur.</div>
      <div class="module-tags"><span class="tag tag-circuit">LinÃ©aire</span><span class="tag tag-math">Filtres</span></div>
      <div class="module-arrow">â†—</div>
    </div>
    <div class="module-card" onclick="showLesson('aop-oscillateurs')">
      <div class="module-num">MODULE AOP-03</div>
      <div class="module-title">Oscillateurs & Comparateurs</div>
      <div class="module-desc">Trigger de Schmitt, critÃ¨re de Barkhausen et oscillateurs Ã  relaxation (Timer 555).</div>
      <div class="module-tags"><span class="tag tag-power">Non-LinÃ©aire</span><span class="tag tag-math">Harmonique</span></div>
      <div class="module-arrow">â†—</div>
    </div>
  </div>
</div>

<!-- â•â•â• PROGRESSION â•â•â• -->
<div id="progression" class="section">
  <div class="section-header">
    <span class="section-tag">â†’ Suivi</span>
    <h2 class="section-title">Progression</h2>
  </div>
  <div class="progress-section">
    <div class="progress-title">Modules complÃ©tÃ©s</div>
    <div class="progress-items" id="progressItems"></div>
  </div>
</div>

<!-- â•â•â• LESSON: COMPLEXES â•â•â• -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- MODULE 01 â€” NOMBRES COMPLEXES (enrichi) -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="lesson-complexes" class="section">
  <button class="back-btn" onclick="showSection('modules-elec')">â† Retour aux modules</button>
  <div class="lesson-layout">
    <aside class="lesson-sidebar">
      <div class="sidebar-title">MODULE 01</div>
      <ul class="sidebar-items">
        <li class="sidebar-item active" onclick="scrollTo(0,0)">1.1 Pourquoi les complexes ?</li>
        <li class="sidebar-item" onclick="scrollToId('c-formes')">1.2 Les 3 formes</li>
        <li class="sidebar-item" onclick="scrollToId('c-operations')">1.3 OpÃ©rations</li>
        <li class="sidebar-item" onclick="scrollToId('c-valeurs')">1.4 Valeurs remarquables</li>
        <li class="sidebar-item" onclick="scrollToId('c-conjuge')">1.5 ConjuguÃ©</li>
        <li class="sidebar-item" onclick="scrollToId('c-derivation')">1.6 DÃ©rivation & IntÃ©gration</li>
        <li class="sidebar-item" onclick="scrollToId('c-plan')">1.7 Plan complexe interactif</li>
        <li class="sidebar-item" onclick="scrollToId('c-exercices')">ğŸ“ Exercices</li>
        <li class="sidebar-item" onclick="scrollToId('c-qcm')">ğŸ“‹ QCM</li>
      </ul>
    </aside>
    <div class="lesson-content">

      <!-- 1.1 Pourquoi -->
      <div class="content-block">
        <div class="section-tag">1.1 â€” Motivation</div>
        <h2 class="block-title">Pourquoi les nombres complexes ?</h2>
        <p class="block-text">En Ã©lectricitÃ© sinusoÃ¯dale, rÃ©soudre les Ã©quations diffÃ©rentielles des circuits RLC est trÃ¨s lourd. Les <strong>nombres complexes</strong> transforment ces Ã©quations en simples opÃ©rations algÃ©briques.</p>
        <div class="tip"><div class="tip-icon">ğŸ’¡</div><div class="tip-text"><strong>IdÃ©e clÃ© :</strong> Un nombre complexe encode simultanÃ©ment l'<strong>amplitude</strong> et le <strong>dÃ©phasage</strong> d'un signal. Multiplier = changer l'amplitude ET le dÃ©phasage en une seule opÃ©ration.</div></div>
        <div class="formula-box">
          <span class="formula-label">DÃ©finition fondamentale</span>
          <div class="formula">jÂ² = âˆ’1 &nbsp;â†’&nbsp; j = âˆš(âˆ’1) &nbsp;â†’&nbsp; 1/j = âˆ’j</div>
          <div class="formula-explain">En maths on note i, mais en Ã©lectricitÃ© j Ã©vite la confusion avec le courant i(t). La relation <strong>1/j = âˆ’j</strong> est trÃ¨s utile (car j Ã— (âˆ’j) = âˆ’jÂ² = 1).</div>
        </div>
        <div class="alert"><div class="alert-icon">âš ï¸</div><div class="alert-text"><strong>Convention :</strong> Les lois de Kirchhoff (mailles, nÅ“uds) s'appliquent en valeurs instantanÃ©es ou en complexes â€” mais PAS directement en valeurs efficaces scalaires, sauf si tous les Ã©lÃ©ments sont en phase.</div></div>
      </div>

      <!-- 1.2 Les 3 formes -->
      <div class="content-block" id="c-formes">
        <div class="section-tag">1.2 â€” ReprÃ©sentations</div>
        <h2 class="block-title">Les 3 formes d'un nombre complexe</h2>
        <div class="steps">
          <div class="step active" onclick="showForm(0)">AlgÃ©brique</div>
          <div class="step" onclick="showForm(1)">TrigonomÃ©trique</div>
          <div class="step" onclick="showForm(2)">Exponentielle</div>
        </div>
        <div id="form-0">
          <div class="formula-box">
            <span class="formula-label">Forme algÃ©brique (cartÃ©sienne)</span>
            <div class="formula">Z = a + jÂ·b</div>
            <div class="formula-explain">a = Re(Z) = partie rÃ©elle &nbsp;|&nbsp; b = Im(Z) = partie imaginaire<br>
            <strong>Conversion :</strong> |Z| = âˆš(aÂ²+bÂ²) &nbsp;|&nbsp; Ï† = arctan(b/a) si a > 0<br>
            Si a &lt; 0 : Ï† = arctan(b/a) + Ï€ &nbsp;|&nbsp; Si a = 0, b > 0 : Ï† = +Ï€/2<br>
            <strong>Utile pour :</strong> additionner, soustraire.</div>
          </div>
          <div class="example-box"><span class="example-label">Exemple</span>
            <p>Z = 3 âˆ’ jÂ·2 &nbsp;â†’&nbsp; |Z| = âˆš(9+4) = âˆš13 â‰ˆ 3,61 &nbsp;|&nbsp; Ï† = arctan(âˆ’2/3) â‰ˆ âˆ’33,7Â°</p>
          </div>
        </div>
        <div id="form-1" style="display:none">
          <div class="formula-box">
            <span class="formula-label">Forme trigonomÃ©trique</span>
            <div class="formula">Z = |Z|Â·(cosÏ† + jÂ·sinÏ†)</div>
            <div class="formula-explain">Projections : a = |Z|Â·cosÏ† &nbsp;|&nbsp; b = |Z|Â·sinÏ†<br><strong>Utile pour :</strong> visualiser sur le plan complexe (diagramme de Fresnel).</div>
          </div>
        </div>
        <div id="form-2" style="display:none">
          <div class="formula-box">
            <span class="formula-label">Forme exponentielle (formule d'Euler)</span>
            <div class="formula">Z = |Z|Â·e<sup>jÏ†</sup> &nbsp;avec&nbsp; e<sup>jÏ†</sup> = cosÏ† + jÂ·sinÏ†</div>
            <div class="formula-explain">
              Produit : Zâ‚Â·Zâ‚‚ = |Zâ‚||Zâ‚‚|Â·e<sup>j(Ï†â‚+Ï†â‚‚)</sup> â†’ modules Ã— , arguments + <br>
              Quotient : Zâ‚/Zâ‚‚ = (|Zâ‚|/|Zâ‚‚|)Â·e<sup>j(Ï†â‚âˆ’Ï†â‚‚)</sup> â†’ modules Ã· , arguments âˆ’ <br>
              <strong>Notation phaseur :</strong> Z = |Z|âˆ Ï† (notation courte)<br>
              <strong>Utile pour :</strong> multiplications, divisions, impÃ©dances.
            </div>
          </div>
          <div class="example-box"><span class="example-label">Application Ã©lectricitÃ©</span>
            <p>Courant I = 5âˆ âˆ’30Â° A. ImpÃ©dance Z = 10âˆ 45Â° Î©.<br>
            Tension V = ZÂ·I = (10Ã—5)âˆ (45Â°+(âˆ’30Â°)) = <strong>50âˆ 15Â° V</strong></p>
          </div>
        </div>
      </div>

      <!-- 1.3 OpÃ©rations -->
      <div class="content-block" id="c-operations">
        <div class="section-tag">1.3 â€” Calculs</div>
        <h2 class="block-title">OpÃ©rations sur les complexes</h2>
        <table class="vtable">
          <tr><th>OpÃ©ration</th><th>MÃ©thode</th><th>Exemple</th></tr>
          <tr><td class="accent">Addition/Soustraction</td><td>Partie rÃ©elle + partie rÃ©elle, idem imaginaire</td><td class="mono">(3+j2)+(1âˆ’j4) = 4âˆ’j2</td></tr>
          <tr><td class="accent">Multiplication</td><td>DÃ©velopper ou : modulesÃ—, arguments+</td><td class="mono">(3+j2)Ã—(1+j) = 1+j5</td></tr>
          <tr><td class="accent">Division</td><td>Multiplier par conjuguÃ© ou : modulesÃ·, argumentsâˆ’</td><td class="mono">(3+j4)/(1âˆ’j) = âˆ’Â½+j7/2</td></tr>
          <tr><td class="accent">Module</td><td>âˆš(aÂ²+bÂ²)</td><td class="mono">|3+j4| = 5</td></tr>
          <tr><td class="accent">Argument</td><td>arctan(b/a) selon quadrant</td><td class="mono">arg(3+j4) = 53,1Â°</td></tr>
        </table>
        <div class="formula-box">
          <span class="formula-label">Multiplication â€” dÃ©veloppement algÃ©brique</span>
          <div class="formula">Zâ‚Â·Zâ‚‚ = (a+jb)(c+jd) = (acâˆ’bd) + j(ad+bc)</div>
          <div class="formula-explain">Car jÂ² = âˆ’1, donc jbÃ—jd = jÂ²bd = âˆ’bd. TrÃ¨s important Ã  retenir !</div>
        </div>
        <div class="formula-box">
          <span class="formula-label">Division â€” technique du conjuguÃ©</span>
          <div class="formula">Zâ‚/Zâ‚‚ = (a+jb)/(c+jd) = [(a+jb)(câˆ’jd)] / (cÂ²+dÂ²)</div>
          <div class="formula-explain">On multiplie numÃ©rateur et dÃ©nominateur par le conjuguÃ© de Zâ‚‚ pour obtenir un dÃ©nominateur rÃ©el.</div>
        </div>
        <div class="example-box">
          <span class="example-label">Exercice du cours â€” Application (p.17-19)</span>
          <p><strong>Somme :</strong> Zâ‚ = 3âˆ’j2, Zâ‚‚ = 5+j4, Z = Zâ‚+Zâ‚‚ = 8+j2 &nbsp;â†’&nbsp; |Z| = âˆš68 â‰ˆ 8,25, Ï† â‰ˆ 14Â°</p>
          <p style="margin-top:.5rem"><strong>Quotient :</strong> Zâ‚ = 3âˆ’j, Zâ‚‚ = 1âˆ’j, Z = Zâ‚/Zâ‚‚</p>
          <div class="expand-card"><div class="expand-header" onclick="toggleExpand(this)"><span class="expand-header-text">Voir le dÃ©tail du calcul</span><span class="expand-icon">+</span></div>
          <div class="expand-content">
            <p>Z = (3âˆ’j)/(1âˆ’j) Ã— (1+j)/(1+j) = [(3âˆ’j)(1+j)] / (1+1)</p>
            <p>(3âˆ’j)(1+j) = 3+3jâˆ’jâˆ’jÂ² = 3+2j+1 = 4+2j</p>
            <p>Z = (4+2j)/2 = <strong>2+j</strong> &nbsp;â†’&nbsp; |Z| = âˆš5 â‰ˆ 2,24, Ï† = arctan(1/2) â‰ˆ 26,6Â°</p>
          </div></div>
        </div>
      </div>

      <!-- 1.4 Valeurs remarquables -->
      <div class="content-block" id="c-valeurs">
        <div class="section-tag">1.4 â€” Ã€ mÃ©moriser</div>
        <h2 class="block-title">Valeurs remarquables de e<sup>jÏ†</sup></h2>
        <table class="vtable">
          <tr><th>Ï†</th><th>e<sup>jÏ†</sup></th><th>Forme algÃ©brique</th><th>Signification</th></tr>
          <tr><td class="accent">0</td><td class="mono">e<sup>jÂ·0</sup></td><td class="mono">1 + jÂ·0 = 1</td><td>Axe rÃ©el positif</td></tr>
          <tr><td class="accent">+Ï€/2 = +90Â°</td><td class="mono">e<sup>jÏ€/2</sup></td><td class="mono">0 + jÂ·1 = <strong>j</strong></td><td>Axe imaginaire positif</td></tr>
          <tr><td class="accent">âˆ’Ï€/2 = âˆ’90Â°</td><td class="mono">e<sup>âˆ’jÏ€/2</sup></td><td class="mono">0 âˆ’ jÂ·1 = <strong>âˆ’j</strong></td><td>Axe imaginaire nÃ©gatif</td></tr>
          <tr><td class="accent">Ï€ = 180Â°</td><td class="mono">e<sup>jÏ€</sup></td><td class="mono">âˆ’1 + jÂ·0 = <strong>âˆ’1</strong></td><td>Axe rÃ©el nÃ©gatif</td></tr>
          <tr><td class="accent">Â±2Ï€/3 = Â±120Â°</td><td class="mono">e<sup>Â±j2Ï€/3</sup></td><td class="mono">âˆ’Â½ Â± jÂ·âˆš3/2</td><td>Phases triphasÃ©es !</td></tr>
        </table>
        <div class="tip"><div class="tip-icon">ğŸ’¡</div><div class="tip-text"><strong>Rotation de 90Â° :</strong> Multiplier par j = rotation de +90Â°. Multiplier par âˆ’j = rotation de âˆ’90Â°. Multiplier par âˆ’1 = rotation de 180Â°. TrÃ¨s utile pour les impÃ©dances L et C !</div></div>
      </div>

      <!-- 1.5 ConjuguÃ© -->
      <div class="content-block" id="c-conjuge">
        <div class="section-tag">1.5 â€” ConjuguÃ©</div>
        <h2 class="block-title">Nombre complexe conjuguÃ©</h2>
        <div class="formula-box">
          <span class="formula-label">DÃ©finition et propriÃ©tÃ©s</span>
          <div class="formula">Si Z = a + jb = |Z|Â·e<sup>jÏ†</sup> &nbsp;alors&nbsp; Z* = a âˆ’ jb = |Z|Â·e<sup>âˆ’jÏ†</sup></div>
          <div class="formula-explain">
            PropriÃ©tÃ©s fondamentales :<br>
            â€¢ ZÂ·Z* = |Z|Â² (nombre rÃ©el !) &nbsp;â†’&nbsp; utile pour calculer |Z|Â²<br>
            â€¢ Z + Z* = 2Â·Re(Z) = 2a (nombre rÃ©el)<br>
            â€¢ |Z*| = |Z| &nbsp;|&nbsp; arg(Z*) = âˆ’arg(Z)<br>
            <strong>Application clÃ© :</strong> Puissance complexe S = VÂ·I* (le conjuguÃ© de I garantit S = P + jQ avec P > 0)
          </div>
        </div>
        <div class="example-box">
          <span class="example-label">Exemple â€” Puissance complexe</span>
          <p>V = 230âˆ 0Â° V, I = 10âˆ âˆ’30Â° A (charge inductive)</p>
          <p>I* = 10âˆ +30Â°</p>
          <p>S = VÂ·I* = 230Ã—10Â·âˆ (0Â°+30Â°) = 2300âˆ 30Â° VA</p>
          <p>P = Re(S) = 2300Â·cos30Â° = <strong>1992 W</strong> &nbsp;|&nbsp; Q = Im(S) = 2300Â·sin30Â° = <strong>1150 VAr</strong></p>
        </div>
      </div>

      <!-- 1.6 DÃ©rivation/IntÃ©gration -->
      <div class="content-block" id="c-derivation">
        <div class="section-tag">1.6 â€” OpÃ©rateurs</div>
        <h2 class="block-title">DÃ©rivation et IntÃ©gration en complexe</h2>
        <p class="block-text">En rÃ©gime sinusoÃ¯dal, la dÃ©rivation et l'intÃ©gration temporelles correspondent Ã  de simples multiplications par jÏ‰ ou 1/jÏ‰ en notation complexe.</p>
        <div class="formula-box">
          <span class="formula-label">OpÃ©rateurs fondamentaux (p.21 du cours)</span>
          <div class="formula">
            d/dt &nbsp;â†”&nbsp; Ã—jÏ‰ &nbsp;&nbsp;(dÃ©rivation)<br>
            âˆ« dt &nbsp;â†”&nbsp; Ã—1/(jÏ‰) = Ã—(âˆ’j/Ï‰) &nbsp;&nbsp;(intÃ©gration)
          </div>
          <div class="formula-explain">
            <strong>DÃ©monstration :</strong> Si v(t) = Vâˆš2Â·sin(Ï‰t+Ï†) â†’ V = VÂ·e<sup>jÏ†</sup><br>
            dv/dt = Vâˆš2Â·Ï‰Â·cos(Ï‰t+Ï†) = Vâˆš2Â·Ï‰Â·sin(Ï‰t+Ï†+Ï€/2)<br>
            En complexe : jÏ‰Â·V = Ï‰Â·e<sup>jÏ€/2</sup>Â·VÂ·e<sup>jÏ†</sup> = Ï‰VÂ·e<sup>j(Ï†+Ï€/2)</sup> âœ“<br>
            <strong>Rappel :</strong> 1/(jÏ‰) = âˆ’j/Ï‰ car 1/j = j/jÂ² = j/(âˆ’1) = âˆ’j
          </div>
        </div>
        <table class="vtable">
          <tr><th>Composant</th><th>Loi temporelle</th><th>En complexe</th><th>ImpÃ©dance Z</th></tr>
          <tr><td class="accent">RÃ©sistance R</td><td class="mono">u = RÂ·i</td><td class="mono">U = RÂ·I</td><td class="mono"><strong>Z = R</strong></td></tr>
          <tr><td class="accent">Inductance L</td><td class="mono">u = LÂ·di/dt</td><td class="mono">U = jÏ‰LÂ·I</td><td class="mono"><strong>Z = jÏ‰L = jX<sub>L</sub></strong></td></tr>
          <tr><td class="accent">Condensateur C</td><td class="mono">i = CÂ·du/dt</td><td class="mono">U = I/(jÏ‰C)</td><td class="mono"><strong>Z = 1/(jÏ‰C) = âˆ’jX<sub>C</sub></strong></td></tr>
        </table>
        <div class="tip"><div class="tip-icon">ğŸ’¡</div><div class="tip-text"><strong>MÃ©mo dÃ©phasage :</strong> L (inductance) â†’ courant en <strong>retard</strong> de 90Â° (jÏ‰L, positif). C (condensateur) â†’ courant en <strong>avance</strong> de 90Â° (âˆ’j/Ï‰C, nÃ©gatif). Moyen mnÃ©motechnique : <em>CIVIL</em> = Condensateur : I avant V ; Inductance : V avant I.</div></div>
      </div>

      <!-- 1.7 Plan complexe interactif -->
      <div class="content-block" id="c-plan">
        <div class="section-tag">1.7 â€” Outil interactif</div>
        <h2 class="block-title">Plan complexe (Diagramme de Fresnel)</h2>
        <div class="complex-plane">
          <div class="plane-controls">
            <div class="plane-input-group"><label>Partie rÃ©elle a</label><input type="number" id="cRe" value="3" step="0.5"></div>
            <div class="plane-input-group"><label>Partie imaginaire b</label><input type="number" id="cIm" value="4" step="0.5"></div>
            <button class="plane-btn" onclick="drawComplex()">Tracer â†’</button>
          </div>
          <canvas id="complexCanvas" width="400" height="300"></canvas>
          <div class="complex-info">
            <div class="cinfo"><span class="cinfo-label">Module |Z|</span><span class="cinfo-val" id="cMod">5.00</span></div>
            <div class="cinfo"><span class="cinfo-label">Argument Ï†</span><span class="cinfo-val" id="cArg">53.1Â°</span></div>
            <div class="cinfo"><span class="cinfo-label">Forme exp.</span><span class="cinfo-val" id="cExp">5Â·e^j53Â°</span></div>
          </div>
        </div>
      </div>

      <!-- Exercices -->
      <div class="content-block" id="c-exercices">
        <div class="section-tag">ğŸ“ Exercices</div>
        <h2 class="block-title">Exercices rÃ©solus</h2>
        <div class="example-box" style="margin-bottom:1rem">
          <span class="example-label">Exercice A â€” Module et argument</span>
          <p>Donner module et argument de Zâ‚ = 3âˆ’j2, Zâ‚‚ = 5+j4, Z = Zâ‚+Zâ‚‚</p>
          <div class="expand-card"><div class="expand-header" onclick="toggleExpand(this)"><span class="expand-header-text">Solution complÃ¨te</span><span class="expand-icon">+</span></div>
          <div class="expand-content">
            <p>Z = (3+5) + j(âˆ’2+4) = 8+j2</p>
            <p>|Z| = âˆš(64+4) = âˆš68 â‰ˆ <strong>8,25</strong></p>
            <p>Ï† = arctan(2/8) = arctan(0,25) â‰ˆ <strong>14Â°</strong></p>
          </div></div>
        </div>
        <div class="example-box" style="margin-bottom:1rem">
          <span class="example-label">Exercice B â€” Produit (p.18)</span>
          <p>Zâ‚ = 3âˆ’j, Zâ‚‚ = 1âˆ’j. Calculer Z = Zâ‚Â·Zâ‚‚</p>
          <div class="expand-card"><div class="expand-header" onclick="toggleExpand(this)"><span class="expand-header-text">Solution complÃ¨te</span><span class="expand-icon">+</span></div>
          <div class="expand-content">
            <p>Z = (3âˆ’j)(1âˆ’j) = 3âˆ’3jâˆ’j+jÂ² = 3âˆ’4j+(âˆ’1) = 2âˆ’4j</p>
            <p>|Z| = âˆš(4+16) = âˆš20 = 2âˆš5 â‰ˆ <strong>4,47</strong></p>
            <p>Ï† = arctan(âˆ’4/2) = arctan(âˆ’2) â‰ˆ <strong>âˆ’63,4Â°</strong></p>
            <p><em>VÃ©rif. par modules/arguments :</em> |Zâ‚|=âˆš10, Ï†â‚=arctan(âˆ’1/3)â‰ˆâˆ’18,4Â° | |Zâ‚‚|=âˆš2, Ï†â‚‚=âˆ’45Â°</p>
            <p>|Z|=âˆš10Ã—âˆš2=âˆš20 âœ“ | Ï†=âˆ’18,4Â°+(âˆ’45Â°)=âˆ’63,4Â° âœ“</p>
          </div></div>
        </div>
        <div class="example-box">
          <span class="example-label">Exercice C â€” Quotient (p.20)</span>
          <p>Zâ‚ = 3âˆ’j, Zâ‚‚ = 1âˆ’j. Calculer Z = Zâ‚/Zâ‚‚</p>
          <div class="expand-card"><div class="expand-header" onclick="toggleExpand(this)"><span class="expand-header-text">Solution complÃ¨te</span><span class="expand-icon">+</span></div>
          <div class="expand-content">
            <p>Z = (3âˆ’j)/(1âˆ’j) Ã— (1+j)/(1+j)</p>
            <p>NumÃ©rateur : (3âˆ’j)(1+j) = 3+3jâˆ’jâˆ’jÂ² = 3+2j+1 = 4+2j</p>
            <p>DÃ©nominateur : (1âˆ’j)(1+j) = 1âˆ’jÂ² = 1+1 = 2</p>
            <p>Z = (4+2j)/2 = <strong>2+j</strong></p>
            <p>|Z| = âˆš(4+1) = âˆš5 â‰ˆ 2,24 | Ï† = arctan(1/2) â‰ˆ 26,6Â°</p>
          </div></div>
        </div>
      </div>

      <!-- QCM -->
      <div class="content-block" id="c-qcm">
        <div class="section-tag">ğŸ“‹ QCM</div>
        <h2 class="block-title">QCM â€” Nombres Complexes</h2>
        <div id="qcm-complexes"></div>
      </div>

    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- MODULE 02 â€” SIGNAUX SINUSOÃDAUX (enrichi) -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="lesson-signaux" class="section">
  <button class="back-btn" onclick="showSection('modules-elec')">â† Retour aux modules</button>
  <div class="lesson-layout">
    <aside class="lesson-sidebar">
      <div class="sidebar-title">MODULE 02</div>
      <ul class="sidebar-items">
        <li class="sidebar-item active" onclick="scrollTo(0,0)">2.1 Signal sinusoÃ¯dal</li>
        <li class="sidebar-item" onclick="scrollToId('s-valeurs')">2.2 Valeurs caractÃ©ristiques</li>
        <li class="sidebar-item" onclick="scrollToId('s-regimes')">2.3 Types de rÃ©gimes</li>
        <li class="sidebar-item" onclick="scrollToId('s-continu')">2.4 RÃ©gime continu</li>
        <li class="sidebar-item" onclick="scrollToId('s-phaseur')">2.5 Notation phaseur</li>
        <li class="sidebar-item" onclick="scrollToId('s-conventions')">2.6 Conventions G/R</li>
        <li class="sidebar-item" onclick="scrollToId('s-calc')">ğŸ§® Calculatrice</li>
        <li class="sidebar-item" onclick="scrollToId('s-qcm')">ğŸ“‹ QCM</li>
      </ul>
    </aside>
    <div class="lesson-content">

      <!-- 2.1 Signal sinusoÃ¯dal -->
      <div class="content-block">
        <div class="section-tag">2.1 â€” DÃ©finition</div>
        <h2 class="block-title">Le signal sinusoÃ¯dal</h2>
        <p class="block-text">C'est en rÃ©gime sinusoÃ¯dal que les transformateurs et machines tournantes ont un fonctionnement optimal. C'est le rÃ©gime de la quasi-totalitÃ© de l'Ã©nergie Ã©lectrique distribuÃ©e.</p>
        <div class="formula-box">
          <span class="formula-label">Expression gÃ©nÃ©rale (figure 1.8 du cours)</span>
          <div class="formula">s(t) = S<sub>max</sub>Â·sin(Ï‰t + Ï†) = S<sub>eff</sub>Â·âˆš2Â·sin(Ï‰t + Ï†)</div>
          <div class="formula-explain">
            â€¢ S<sub>max</sub> = amplitude (valeur crÃªte) en V ou A<br>
            â€¢ Ï‰ = 2Ï€f = pulsation en rad/s &nbsp;|&nbsp; f = frÃ©quence en Hz &nbsp;|&nbsp; T = 1/f pÃ©riode en s<br>
            â€¢ Ï† = phase initiale Ã  t = 0 (en radians ou degrÃ©s)<br>
            â€¢ S<sub>eff</sub> = S<sub>max</sub>/âˆš2 = valeur efficace (RMS)
          </div>
        </div>
        <div class="tip"><div class="tip-icon">ğŸ’¡</div><div class="tip-text"><strong>RÃ©seau franÃ§ais :</strong> f = 50 Hz, T = 20 ms, Ï‰ = 2Ï€Ã—50 â‰ˆ 314,16 rad/s. Tension nominale : U = 230 V (eff.) â†’ U<sub>max</sub> = 230Ã—âˆš2 â‰ˆ 325 V.</div></div>

        <!-- SVG signal sinusoÃ¯dal -->
        <div class="diagram-container">
          <span class="diagram-label">Signal sinusoÃ¯dal â€” ParamÃ¨tres clÃ©s</span>
          <svg viewBox="0 0 500 200" class="diagram">
            <!-- Axes -->
            <line x1="30" y1="100" x2="480" y2="100" stroke="#3a3a5a" stroke-width="1.5"/>
            <line x1="50" y1="15" x2="50" y2="185" stroke="#3a3a5a" stroke-width="1.5"/>
            <!-- SinusoÃ¯de -->
            <path d="M 50,100 Q 100,15 160,100 Q 220,185 280,100 Q 340,15 400,100 Q 460,185 480,145" fill="none" stroke="#e8f428" stroke-width="2.5"/>
            <!-- Smax annotation -->
            <line x1="160" y1="15" x2="160" y2="100" stroke="#3af4c8" stroke-width="1" stroke-dasharray="4,3"/>
            <text x="165" y="58" fill="#3af4c8" font-size="11" font-family="Space Mono">S_max</text>
            <!-- Seff annotation -->
            <line x1="50" y1="29" x2="410" y2="29" stroke="#ff5e3a" stroke-width="1" stroke-dasharray="4,3"/>
            <text x="415" y="33" fill="#ff5e3a" font-size="10" font-family="Space Mono">S_eff</text>
            <!-- PÃ©riode T -->
            <line x1="50" y1="175" x2="280" y2="175" stroke="#e8f428" stroke-width="1"/>
            <line x1="50" y1="170" x2="50" y2="180" stroke="#e8f428" stroke-width="1"/>
            <line x1="280" y1="170" x2="280" y2="180" stroke="#e8f428" stroke-width="1"/>
            <text x="155" y="193" fill="#e8f428" font-size="11" text-anchor="middle" font-family="Space Mono">T (pÃ©riode)</text>
            <!-- Labels axes -->
            <text x="474" y="96" fill="#8888aa" font-size="11" font-family="Space Mono">t</text>
            <text x="55" y="14" fill="#8888aa" font-size="11" font-family="Space Mono">s(t)</text>
          </svg>
        </div>
      </div>

      <!-- 2.2 Valeurs caractÃ©ristiques -->
      <div class="content-block" id="s-valeurs">
        <div class="section-tag">2.2 â€” Valeurs caractÃ©ristiques</div>
        <h2 class="block-title">Valeur efficace, moyenne, crÃªte</h2>
        <div class="formula-box">
          <span class="formula-label">Valeur efficace (RMS â€” Root Mean Square)</span>
          <div class="formula">S<sub>eff</sub> = S<sub>max</sub>/âˆš2 â‰ˆ 0,707Â·S<sub>max</sub></div>
          <div class="formula-explain">C'est la valeur qui produit le mÃªme effet thermique (mÃªme puissance dissipÃ©e dans une rÃ©sistance) qu'une grandeur continue de mÃªme valeur. Formule gÃ©nÃ©rale : S<sub>eff</sub> = âˆš(1/TÂ·âˆ«â‚€áµ€ sÂ²(t)dt)</div>
        </div>
        <div class="formula-box">
          <span class="formula-label">Valeur moyenne d'un sinusoÃ¯de</span>
          <div class="formula">&lt;s&gt; = 0</div>
          <div class="formula-explain">Sur une pÃ©riode, autant positif que nÃ©gatif â†’ moyenne nulle. Pour un signal redressÃ© mono-alternance : &lt;s&gt; = S<sub>max</sub>/Ï€. Double alternance : &lt;s&gt; = 2S<sub>max</sub>/Ï€.</div>
        </div>
        <table class="vtable">
          <tr><th>Grandeur</th><th>Formule</th><th>230V rÃ©seau</th><th>UnitÃ©</th></tr>
          <tr><td class="accent">PÃ©riode T</td><td class="mono">T = 1/f</td><td class="mono">20 ms</td><td>s</td></tr>
          <tr><td class="accent">FrÃ©quence f</td><td class="mono">f = 1/T</td><td class="mono">50 Hz</td><td>Hz</td></tr>
          <tr><td class="accent">Pulsation Ï‰</td><td class="mono">Ï‰ = 2Ï€f</td><td class="mono">314,16 rad/s</td><td>rad/s</td></tr>
          <tr><td class="accent">Valeur crÃªte</td><td class="mono">S<sub>max</sub> = S<sub>eff</sub>Â·âˆš2</td><td class="mono">â‰ˆ 325 V</td><td>V</td></tr>
          <tr><td class="accent">Valeur efficace</td><td class="mono">S<sub>eff</sub> = S<sub>max</sub>/âˆš2</td><td class="mono">230 V</td><td>V</td></tr>
          <tr><td class="accent">Valeur crÃªte-Ã -crÃªte</td><td class="mono">2Â·S<sub>max</sub></td><td class="mono">â‰ˆ 650 V</td><td>V</td></tr>
        </table>
      </div>

      <!-- 2.3 Types de rÃ©gimes -->
      <div class="content-block" id="s-regimes">
        <div class="section-tag">2.3 â€” Classification (p.28)</div>
        <h2 class="block-title">Types de rÃ©gimes Ã©lectriques</h2>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin:1rem 0">
          <div style="background:var(--bg2);border:1px solid var(--accent);border-radius:8px;padding:1rem">
            <div style="color:var(--accent);font-weight:700;margin-bottom:.5rem">RÃ©gime continu (DC)</div>
            <p style="font-size:.85rem;color:var(--text2)">La grandeur ne change pas de signe ou est constante. Exemples : batteries, alimentations DC.</p>
            <p style="font-family:'Space Mono',monospace;font-size:.8rem;color:var(--accent);margin-top:.5rem">U = EÂ·R/(R+Rs) â€” Loi d'Ohm simple</p>
          </div>
          <div style="background:var(--bg2);border:1px solid var(--accent3);border-radius:8px;padding:1rem">
            <div style="color:var(--accent3);font-weight:700;margin-bottom:.5rem">RÃ©gime sinusoÃ¯dal (AC)</div>
            <p style="font-size:.85rem;color:var(--text2)">Grandeur pÃ©riodique sinusoÃ¯dale. Le rÃ©seau EDF, la grande majoritÃ© de l'Ã©nergie Ã©lectrique.</p>
            <p style="font-family:'Space Mono',monospace;font-size:.8rem;color:var(--accent3);margin-top:.5rem">Utilise impÃ©dances Z = R + jX</p>
          </div>
        </div>
        <div class="expand-card"><div class="expand-header" onclick="toggleExpand(this)"><span class="expand-header-text">ğŸ“Œ RÃ©gimes transitoires vs rÃ©gimes entretenus</span><span class="expand-icon">+</span></div>
        <div class="expand-content">
          <p><strong>RÃ©gimes transitoires :</strong> Ã©volutions lors de modifications brutales (interrupteur, court-circuit). Non rÃ©pÃ©tÃ©s, durÃ©e courte. Exemple : charge d'un condensateur via rÃ©sistance (e^{âˆ’t/RC}).</p>
          <p style="margin-top:.5rem"><strong>RÃ©gimes entretenus pÃ©riodiques :</strong> grandeurs qui se rÃ©pÃ¨tent Ã  chaque pÃ©riode T. Inclut le sinusoÃ¯dal, le carrÃ©, le triangulaire, etc.</p>
          <p style="margin-top:.5rem"><strong>En Ã©lectrotechnique :</strong> on Ã©tudie principalement le rÃ©gime sinusoÃ¯dal Ã©tabli car c'est le rÃ©gime de fonctionnement normal des machines et rÃ©seaux.</p>
        </div></div>
      </div>

      <!-- 2.4 RÃ©gime continu -->
      <div class="content-block" id="s-continu">
        <div class="section-tag">2.4 â€” Rappels rÃ©gime DC</div>
        <h2 class="block-title">RÃ©gime continu â€” Rappels</h2>
        <div class="formula-box">
          <span class="formula-label">Circuit gÃ©nÃ©rateur + charge (p.27)</span>
          <div class="formula">
            I = E/(R + R<sub>s</sub>) &nbsp;|&nbsp; U = RÂ·I = EÂ·R/(R+R<sub>s</sub>)<br>
            P<sub>charge</sub> = UÂ·I = RÂ·IÂ² &nbsp;|&nbsp; P<sub>gÃ©nÃ©rateur</sub> = EÂ·I
          </div>
          <div class="formula-explain">
            E = force Ã©lectromotrice (fÃ©m) | Rs = rÃ©sistance interne du gÃ©nÃ©rateur | R = charge<br>
            Cas idÃ©al (Rs = 0) : U = E (tension de sortie = fÃ©m)<br>
            Cas extrÃªme (R â†’ âˆ) : I = 0, U = E (circuit ouvert)
          </div>
        </div>
        <div class="alert"><div class="alert-icon">âš ï¸</div><div class="alert-text"><strong>Adaptation d'impÃ©dance :</strong> La puissance transmise Ã  la charge est maximale quand R = Rs (thÃ©orÃ¨me d'adaptation). P<sub>max</sub> = EÂ²/(4Rs). Ce cas est important en Ã©lectronique de signal mais Ã  Ã©viter en Ã©nergie (rendement 50%).</div></div>
      </div>

      <!-- 2.5 Notation phaseur -->
      <div class="content-block" id="s-phaseur">
        <div class="section-tag">2.5 â€” ReprÃ©sentation complexe</div>
        <h2 class="block-title">Notation phaseur (p.32-36)</h2>
        <p class="block-text">Un signal sinusoÃ¯dal est entiÃ¨rement caractÃ©risÃ© par sa <strong>valeur efficace</strong> et sa <strong>phase initiale</strong>. La notation complexe (phaseur) encode ces deux informations.</p>
        <div class="formula-box">
          <span class="formula-label">Convention de notation (rÃ©fÃ©rence Ã  la tension)</span>
          <div class="formula">
            u(t) = UÂ·âˆš2Â·sin(Ï‰t) â†’ <strong>U = UÂ·e<sup>jÂ·0</sup> = U</strong> (rÃ©fÃ©rence Ï†<sub>u</sub>=0)<br>
            i(t) = IÂ·âˆš2Â·sin(Ï‰tâˆ’Ï†) â†’ <strong>I = IÂ·e<sup>âˆ’jÏ†</sup></strong>
          </div>
          <div class="formula-explain">
            En Ã©lectrotechnique, on prend la tension comme rÃ©fÃ©rence de phase (Ï†<sub>u</sub> = 0).<br>
            Ï† = Ï†<sub>u</sub> âˆ’ Ï†<sub>i</sub> = dÃ©phasage tension-courant. Ï† > 0 â†’ charge inductive (courant en retard).<br>
            <strong>Passage temporel â†’ complexe :</strong> on garde la valeur efficace et la phase initiale.
          </div>
        </div>
        <div class="example-box">
          <span class="example-label">Exemple complet de passage temporel â†” complexe</span>
          <p>v(t) = 325Â·sin(314t) V â†’ V = 230Â·e<sup>jÂ·0</sup> = <strong>230 V</strong></p>
          <p>i(t) = 14,1Â·sin(314t âˆ’ Ï€/4) A â†’ I = 10Â·e<sup>âˆ’jÏ€/4</sup> = <strong>10âˆ âˆ’45Â° A</strong></p>
          <p style="margin-top:.5rem">ImpÃ©dance : Z = V/I = 230/10Â·e<sup>j45Â°</sup> = <strong>23âˆ 45Â° = 16,3+j16,3 Î©</strong></p>
          <p>â†’ Circuit RL avec R = 16,3 Î© et X<sub>L</sub> = Ï‰L = 16,3 Î© â†’ L = 16,3/314 â‰ˆ 52 mH</p>
        </div>
      </div>

      <!-- 2.6 Conventions G/R -->
      <div class="content-block" id="s-conventions">
        <div class="section-tag">2.6 â€” Conventions (p.24-25)</div>
        <h2 class="block-title">Conventions GÃ©nÃ©rateur & RÃ©cepteur</h2>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin:1rem 0">
          <div style="background:var(--bg2);border:1px solid rgba(232,244,40,.3);border-radius:8px;padding:1.2rem">
            <div style="color:var(--accent);font-weight:700;margin-bottom:.8rem">âš¡ Convention GÃ©nÃ©rateur</div>
            <p style="font-size:.85rem;color:var(--text2);margin-bottom:.5rem">Courant sort par la borne +. Tension et courant sont <strong>dans le mÃªme sens</strong>.</p>
            <div style="font-family:'Space Mono',monospace;font-size:.8rem;line-height:2;color:var(--accent)">
              p = uÂ·i<br>
              p > 0 â†’ fournit de l'Ã©nergie<br>
              p &lt; 0 â†’ reÃ§oit de l'Ã©nergie
            </div>
          </div>
          <div style="background:var(--bg2);border:1px solid rgba(58,244,200,.3);border-radius:8px;padding:1.2rem">
            <div style="color:var(--accent3);font-weight:700;margin-bottom:.8rem">ğŸ”Œ Convention RÃ©cepteur</div>
            <p style="font-size:.85rem;color:var(--text2);margin-bottom:.5rem">Courant entre par la borne +. Tension et courant sont <strong>en sens opposÃ©</strong>.</p>
            <div style="font-family:'Space Mono',monospace;font-size:.8rem;line-height:2;color:var(--accent3)">
              p = uÂ·i<br>
              p > 0 â†’ reÃ§oit de l'Ã©nergie<br>
              p &lt; 0 â†’ fournit de l'Ã©nergie
            </div>
          </div>
        </div>
        <div class="tip"><div class="tip-icon">ğŸ’¡</div><div class="tip-text"><strong>RÃ©cepteurs passifs R, L, C :</strong> toujours en convention rÃ©cepteur. Le gÃ©nÃ©rateur est en convention gÃ©nÃ©rateur. En pratique, si on ne prÃ©cise pas, on suppose convention rÃ©cepteur pour les composants.</div></div>
        <div class="formula-box">
          <span class="formula-label">Relations composants â€” Convention rÃ©cepteur (p.26)</span>
          <div class="formula">
            RÃ©sistance R : u<sub>R</sub> = RÂ·i &nbsp;â†’&nbsp; Z<sub>R</sub> = R<br>
            Inductance L : u<sub>L</sub> = LÂ·di/dt &nbsp;â†’&nbsp; Z<sub>L</sub> = jÏ‰L<br>
            Condensateur C : i<sub>C</sub> = CÂ·du/dt &nbsp;â†’&nbsp; Z<sub>C</sub> = 1/(jÏ‰C)
          </div>
        </div>
      </div>

      <!-- Calculatrice -->
      <div class="content-block" id="s-calc">
        <div class="section-tag">ğŸ§® Outil interactif</div>
        <h2 class="block-title">Calculatrice â€” Conversions signal</h2>
        <div class="calc-box">
          <div class="calc-title">âš¡ Convertisseur <span>Signal sinusoÃ¯dal</span></div>
          <div class="calc-grid">
            <div class="calc-field"><label class="calc-label">Valeur efficace S<sub>eff</sub> (V ou A)</label><input type="number" class="calc-input" id="s-eff" value="230" oninput="calcSignal()"></div>
            <div class="calc-field"><label class="calc-label">FrÃ©quence f (Hz)</label><input type="number" class="calc-input" id="s-freq" value="50" oninput="calcSignal()"></div>
            <div class="calc-field"><label class="calc-label">Phase initiale Ï† (Â°)</label><input type="number" class="calc-input" id="s-phi" value="0" oninput="calcSignal()"></div>
          </div>
          <button class="calc-btn" onclick="calcSignal()">Calculer â†’</button>
          <div class="calc-result" id="s-result"></div>
        </div>
      </div>

      <!-- QCM -->
      <div class="content-block" id="s-qcm">
        <div class="section-tag">ğŸ“‹ QCM</div>
        <h2 class="block-title">QCM â€” Signaux SinusoÃ¯daux</h2>
        <div id="qcm-signaux"></div>
      </div>

    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- MODULE 03 â€” LOIS & IMPÃ‰DANCES (enrichi) -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="lesson-impedances" class="section">
  <button class="back-btn" onclick="showSection('modules-elec')">â† Retour aux modules</button>
  <div class="lesson-layout">
    <aside class="lesson-sidebar">
      <div class="sidebar-title">MODULE 03</div>
      <ul class="sidebar-items">
        <li class="sidebar-item active" onclick="scrollTo(0,0)">3.1 Loi des mailles</li>
        <li class="sidebar-item" onclick="scrollToId('i-noeuds')">3.2 Loi des nÅ“uds</li>
        <li class="sidebar-item" onclick="scrollToId('i-rlc')">3.3 ImpÃ©dances R, L, C</li>
        <li class="sidebar-item" onclick="scrollToId('i-associations')">3.4 Associations</li>
        <li class="sidebar-item" onclick="scrollToId('i-dipoles')">3.5 DipÃ´les inductifs/capacitifs</li>
        <li class="sidebar-item" onclick="scrollToId('i-resonance')">3.6 RÃ©sonance</li>
        <li class="sidebar-item" onclick="scrollToId('i-calc')">ğŸ§® Calculatrice</li>
        <li class="sidebar-item" onclick="scrollToId('i-exercices')">ğŸ“ Exercices</li>
        <li class="sidebar-item" onclick="scrollToId('i-qcm')">ğŸ“‹ QCM</li>
      </ul>
    </aside>
    <div class="lesson-content">

      <!-- 3.1 Loi des mailles -->
      <div class="content-block">
        <div class="section-tag">3.1 â€” Kirchhoff (p.22)</div>
        <h2 class="block-title">Loi des mailles (KVL)</h2>
        <div class="formula-box">
          <span class="formula-label">Loi des mailles â€” Kirchhoff Voltage Law</span>
          <div class="formula">âˆ‘ U<sub>k</sub> = 0 (le long d'une maille fermÃ©e)</div>
          <div class="formula-explain">
            "La somme des tensions orientÃ©es le long d'une maille de circuit Ã©lectrique est nulle."<br>
            <strong>Valable :</strong> en valeurs instantanÃ©es u(t) ou en complexes U â€” mais <strong>PAS en valeurs efficaces scalaires</strong> (les phases s'additionnent vectoriellement).<br>
            Exemple pour un circuit sÃ©rie : U<sub>source</sub> = U<sub>R</sub> + U<sub>L</sub> + U<sub>C</sub>
          </div>
        </div>
        <div class="example-box">
          <span class="example-label">Application â€” Circuit RLC sÃ©rie</span>
          <p>V = 100 V (rÃ©f.), Z = R + jÏ‰L + 1/(jÏ‰C)</p>
          <p>Maille : <strong>V = Z<sub>R</sub>Â·I + Z<sub>L</sub>Â·I + Z<sub>C</sub>Â·I = ZÂ·I</strong></p>
          <p>â†’ I = V/Z (simple division complexe !)</p>
        </div>
        <div class="alert"><div class="alert-icon">âš ï¸</div><div class="alert-text"><strong>Erreur classique :</strong> On ne peut PAS Ã©crire V = U<sub>R</sub> + U<sub>L</sub> avec des valeurs efficaces scalaires, car U<sub>R</sub> et U<sub>L</sub> sont dÃ©phasÃ©es. Il faut travailler en complexes : <strong>V = U<sub>R</sub> + U<sub>L</sub></strong> (addition vectorielle).</div></div>
      </div>

      <!-- 3.2 Loi des nÅ“uds -->
      <div class="content-block" id="i-noeuds">
        <div class="section-tag">3.2 â€” Kirchhoff (p.23)</div>
        <h2 class="block-title">Loi des nÅ“uds (KCL)</h2>
        <div class="formula-box">
          <span class="formula-label">Loi des nÅ“uds â€” Kirchhoff Current Law</span>
          <div class="formula">âˆ‘ I<sub>k</sub> = 0 (en un nÅ“ud)</div>
          <div class="formula-explain">
            "La somme des courants orientÃ©s entrant/sortant en un nÅ“ud est nulle."<br>
            Valable en valeurs instantanÃ©es ou en complexes â€” PAS en valeurs efficaces scalaires.<br>
            Pour deux branches parallÃ¨les : I = Iâ‚ + Iâ‚‚ (en complexes)
          </div>
        </div>
        <div class="example-box">
          <span class="example-label">Application â€” Circuit parallÃ¨le</span>
          <p>R = 10 Î© en parallÃ¨le avec L (X<sub>L</sub> = 10 Î©), V = 100 V</p>
          <p>I<sub>R</sub> = 100/10 = 10 Aâˆ 0Â° &nbsp;|&nbsp; I<sub>L</sub> = 100/(j10) = âˆ’j10 A = 10âˆ âˆ’90Â° A</p>
          <p>I = I<sub>R</sub> + I<sub>L</sub> = 10 âˆ’ j10 = <strong>10âˆš2 âˆ âˆ’45Â° â‰ˆ 14,1 A</strong></p>
          <p>Si on avait additionnÃ© les modules : 10+10 = 20 A â†’ <span style="color:var(--accent2)">FAUX !</span></p>
        </div>
      </div>

      <!-- 3.3 ImpÃ©dances -->
      <div class="content-block" id="i-rlc">
        <div class="section-tag">3.3 â€” Composants (p.26, 35)</div>
        <h2 class="block-title">ImpÃ©dances R, L, C</h2>
        <p class="block-text">L'impÃ©dance Z est la gÃ©nÃ©ralisation de la rÃ©sistance au rÃ©gime sinusoÃ¯dal. C'est un nombre complexe : <strong>Z = R + jX</strong> oÃ¹ R est la rÃ©sistance et X la rÃ©actance.</p>
        <table class="vtable">
          <tr><th>Composant</th><th>Loi u/i</th><th>ImpÃ©dance Z</th><th>|Z|</th><th>Ï†<sub>Z</sub></th></tr>
          <tr>
            <td class="accent">RÃ©sistance R</td>
            <td class="mono">u = RÂ·i</td>
            <td class="mono">R (rÃ©el)</td>
            <td class="mono">R</td>
            <td>0Â° (en phase)</td>
          </tr>
          <tr>
            <td class="accent">Inductance L</td>
            <td class="mono">u = LÂ·di/dt</td>
            <td class="mono">jÏ‰L = jX<sub>L</sub></td>
            <td class="mono">Ï‰L</td>
            <td>+90Â° (u en avance)</td>
          </tr>
          <tr>
            <td class="accent">Condensateur C</td>
            <td class="mono">i = CÂ·du/dt</td>
            <td class="mono">1/(jÏ‰C) = âˆ’jX<sub>C</sub></td>
            <td class="mono">1/(Ï‰C)</td>
            <td>âˆ’90Â° (i en avance)</td>
          </tr>
          <tr>
            <td class="accent">RL sÃ©rie</td>
            <td class="mono">Z = R+jÏ‰L</td>
            <td class="mono">R + jX<sub>L</sub></td>
            <td class="mono">âˆš(RÂ²+X<sub>L</sub>Â²)</td>
            <td>+arctan(X<sub>L</sub>/R)</td>
          </tr>
          <tr>
            <td class="accent">RC sÃ©rie</td>
            <td class="mono">Z = Râˆ’j/(Ï‰C)</td>
            <td class="mono">R âˆ’ jX<sub>C</sub></td>
            <td class="mono">âˆš(RÂ²+X<sub>C</sub>Â²)</td>
            <td>âˆ’arctan(X<sub>C</sub>/R)</td>
          </tr>
        </table>
        <div class="formula-box">
          <span class="formula-label">Notation importante (p.40)</span>
          <div class="formula">Z = R + jX &nbsp;|&nbsp; |Z| = âˆš(RÂ²+XÂ²) &nbsp;|&nbsp; Ï† = arctan(X/R)</div>
          <div class="formula-explain">R = rÃ©sistance Ã©quivalente (Re(Z)) | X = rÃ©actance Ã©quivalente (Im(Z))<br>
          X > 0 â†’ circuit inductif (courant en retard) | X &lt; 0 â†’ circuit capacitif (courant en avance)</div>
        </div>
      </div>

      <!-- 3.4 Associations -->
      <div class="content-block" id="i-associations">
        <div class="section-tag">3.4 â€” Associations (p.41)</div>
        <h2 class="block-title">Associations d'impÃ©dances</h2>
        <p class="block-text">Les impÃ©dances s'associent comme des rÃ©sistances, mais en arithmÃ©tique complexe.</p>
        <div class="formula-box">
          <span class="formula-label">SÃ©rie et parallÃ¨le</span>
          <div class="formula">
            SÃ©rie : Z<sub>Ã©q</sub> = Zâ‚ + Zâ‚‚ + Zâ‚ƒ + â€¦<br>
            ParallÃ¨le : 1/Z<sub>Ã©q</sub> = 1/Zâ‚ + 1/Zâ‚‚ + â€¦ &nbsp;â†’&nbsp; Z<sub>Ã©q</sub> = Zâ‚Â·Zâ‚‚/(Zâ‚+Zâ‚‚)
          </div>
          <div class="formula-explain">
            Admittance Y = 1/Z : en parallÃ¨le, Y<sub>Ã©q</sub> = Yâ‚ + Yâ‚‚ + â€¦ (plus simple !)<br>
            Diviseur de tension : U<sub>k</sub> = V Ã— Z<sub>k</sub>/Z<sub>total</sub><br>
            Diviseur de courant : I<sub>k</sub> = I Ã— Z<sub>autre</sub>/(Zâ‚+Zâ‚‚)
          </div>
        </div>
        <div class="example-box">
          <span class="example-label">Exercice 2 du cours (p.55) â€” Circuit RLC mixte</span>
          <p>V = 100 V, f = 50 Hz. ImpÃ©dances : Zâ‚ = j10 Î©, Zâ‚‚ = âˆ’j5 Î©, Zâ‚ƒ = 20 Î© en sÃ©rie</p>
          <div class="expand-card"><div class="expand-header" onclick="toggleExpand(this)"><span class="expand-header-text">Solution dÃ©taillÃ©e</span><span class="expand-icon">+</span></div>
          <div class="expand-content">
            <p>Z<sub>total</sub> = j10 + (âˆ’j5) + 20 = 20 + j5 Î©</p>
            <p>|Z| = âˆš(400+25) = âˆš425 â‰ˆ 20,6 Î©</p>
            <p>Ï† = arctan(5/20) â‰ˆ 14Â° (inductif)</p>
            <p>I = V/|Z| = 100/20,6 â‰ˆ <strong>4,85 A</strong></p>
            <p>Expression temporelle : i(t) = 4,85âˆš2Â·sin(314t âˆ’ 14Â°) A</p>
            <p>VÃ©rif loi de maille : U<sub>total</sub> = ZÂ·I = (20+j5)Ã—(4,85âˆ âˆ’14Â°) = 100âˆ 0Â° V âœ“</p>
          </div></div>
        </div>
      </div>

      <!-- 3.5 DipÃ´les inductifs/capacitifs -->
      <div class="content-block" id="i-dipoles">
        <div class="section-tag">3.5 â€” Comportement (p.42-43)</div>
        <h2 class="block-title">DipÃ´les inductifs et capacitifs</h2>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin:1rem 0">
          <div style="background:var(--bg2);border:1px solid var(--accent);border-radius:8px;padding:1.2rem">
            <div style="color:var(--accent);font-weight:700;margin-bottom:.8rem">â¬† DipÃ´le INDUCTIF</div>
            <p style="font-size:.85rem;color:var(--text2);margin-bottom:.5rem">X > 0 (Im(Z) > 0). Le courant est en <strong>retard</strong> sur la tension.</p>
            <div style="font-family:'Space Mono',monospace;font-size:.8rem;color:var(--accent);line-height:2">
              Z = R + jX (X>0)<br>
              Ï† > 0 (Ï† = Ï†_u âˆ’ Ï†_i)<br>
              Exemples : moteurs, bobines, transfo
            </div>
          </div>
          <div style="background:var(--bg2);border:1px solid var(--accent3);border-radius:8px;padding:1.2rem">
            <div style="color:var(--accent3);font-weight:700;margin-bottom:.8rem">â¬‡ DipÃ´le CAPACITIF</div>
            <p style="font-size:.85rem;color:var(--text2);margin-bottom:.5rem">X &lt; 0 (Im(Z) &lt; 0). Le courant est en <strong>avance</strong> sur la tension.</p>
            <div style="font-family:'Space Mono',monospace;font-size:.8rem;color:var(--accent3);line-height:2">
              Z = R âˆ’ jX (X>0)<br>
              Ï† &lt; 0<br>
              Exemples : condensateurs, bancs de compensation
            </div>
          </div>
        </div>
        <div class="tip"><div class="tip-icon">ğŸ’¡</div><div class="tip-text"><strong>Moyen mnÃ©motechnique CIVIL :</strong> <strong>C</strong>ondensateur : <strong>I</strong> avant <strong>V</strong> (courant en avance). Pour l'inductance : <strong>V</strong> avant <strong>I</strong> (tension en avance = courant en retard).</div></div>

        <!-- SVG diagramme de Fresnel RL -->
        <div class="diagram-container">
          <span class="diagram-label">Diagrammes de Fresnel â€” RL sÃ©rie (inductif) et RC sÃ©rie (capacitif)</span>
          <svg viewBox="0 0 500 200" class="diagram">
            <!-- Circuit RL -->
            <text x="100" y="18" fill="#3af4c8" font-size="11" text-anchor="middle" font-family="Space Mono">Circuit RL (inductif)</text>
            <!-- Axes RL -->
            <line x1="30" y1="120" x2="200" y2="120" stroke="#3a3a5a" stroke-width="1"/>
            <line x1="80" y1="170" x2="80" y2="50" stroke="#3a3a5a" stroke-width="1"/>
            <!-- I horizontal -->
            <line x1="80" y1="120" x2="160" y2="120" stroke="#3af4c8" stroke-width="2.5"/>
            <polygon points="160,120 150,116 150,124" fill="#3af4c8"/>
            <text x="120" y="135" fill="#3af4c8" font-size="10" text-anchor="middle" font-family="Space Mono">I (ref)</text>
            <!-- V inclinÃ© -->
            <line x1="80" y1="120" x2="170" y2="70" stroke="#e8f428" stroke-width="2.5"/>
            <polygon points="170,70 162,78 174,80" fill="#e8f428"/>
            <text x="175" y="90" fill="#e8f428" font-size="10" font-family="Space Mono">V</text>
            <!-- U_R -->
            <line x1="80" y1="120" x2="140" y2="120" stroke="#8888aa" stroke-width="1.5" stroke-dasharray="4,3"/>
            <text x="108" y="113" fill="#8888aa" font-size="9" font-family="Space Mono">U_R</text>
            <!-- U_L vertical -->
            <line x1="140" y1="120" x2="170" y2="70" stroke="#ff5e3a" stroke-width="1.5" stroke-dasharray="4,3"/>
            <text x="158" y="100" fill="#ff5e3a" font-size="9" font-family="Space Mono">U_L</text>
            <!-- phi arc -->
            <path d="M 110,120 A 30,30 0 0,1 104,103" fill="none" stroke="#e8f428" stroke-width="1"/>
            <text x="116" y="107" fill="#e8f428" font-size="9" font-family="Space Mono">Ï†>0</text>

            <!-- Circuit RC -->
            <text x="380" y="18" fill="#3af4c8" font-size="11" text-anchor="middle" font-family="Space Mono">Circuit RC (capacitif)</text>
            <!-- Axes RC -->
            <line x1="300" y1="100" x2="480" y2="100" stroke="#3a3a5a" stroke-width="1"/>
            <line x1="350" y1="50" x2="350" y2="180" stroke="#3a3a5a" stroke-width="1"/>
            <!-- I horizontal -->
            <line x1="350" y1="100" x2="440" y2="100" stroke="#3af4c8" stroke-width="2.5"/>
            <polygon points="440,100 430,96 430,104" fill="#3af4c8"/>
            <text x="395" y="92" fill="#3af4c8" font-size="10" text-anchor="middle" font-family="Space Mono">I (ref)</text>
            <!-- V inclinÃ© vers le bas -->
            <line x1="350" y1="100" x2="440" y2="150" stroke="#e8f428" stroke-width="2.5"/>
            <polygon points="440,150 432,142 443,142" fill="#e8f428"/>
            <text x="448" y="155" fill="#e8f428" font-size="10" font-family="Space Mono">V</text>
            <!-- phi arc -->
            <path d="M 380,100 A 30,30 0 0,0 374,117" fill="none" stroke="#e8f428" stroke-width="1"/>
            <text x="388" y="118" fill="#e8f428" font-size="9" font-family="Space Mono">Ï†&lt;0</text>
          </svg>
        </div>
      </div>

      <!-- 3.6 RÃ©sonance -->
      <div class="content-block" id="i-resonance">
        <div class="section-tag">3.6 â€” Cas particulier important</div>
        <h2 class="block-title">RÃ©sonance sÃ©rie et parallÃ¨le</h2>
        <div class="formula-box">
          <span class="formula-label">RÃ©sonance sÃ©rie RLC â€” Condition</span>
          <div class="formula">X<sub>L</sub> = X<sub>C</sub> &nbsp;â†’&nbsp; Ï‰L = 1/(Ï‰C) &nbsp;â†’&nbsp; Ï‰â‚€ = 1/âˆš(LC) &nbsp;â†’&nbsp; fâ‚€ = 1/(2Ï€âˆšLC)</div>
          <div class="formula-explain">
            Ã€ la rÃ©sonance : Z = R (purement rÃ©sistif, minimum !), Ï† = 0, courant maximum.<br>
            Facteur de qualitÃ© Q = Ï‰â‚€L/R = 1/(Ï‰â‚€RC) = (1/R)Â·âˆš(L/C)<br>
            Surtension aux bornes de L et C : U<sub>L</sub> = U<sub>C</sub> = QÂ·V &nbsp;â†’&nbsp; peut Ãªtre >> V !
          </div>
        </div>
        <div class="example-box">
          <span class="example-label">Exercice de la mÃ©thodologie</span>
          <p>R = 5 Î©, L = 0,1 H, C = 100 ÂµF, f = 50 Hz</p>
          <p>X<sub>L</sub> = 314Ã—0,1 = 31,4 Î© &nbsp;|&nbsp; X<sub>C</sub> = 1/(314Ã—100Ã—10â»â¶) = 31,8 Î©</p>
          <p>X<sub>C</sub> > X<sub>L</sub> â†’ <strong>circuit lÃ©gÃ¨rement capacitif</strong> Ã  50 Hz</p>
          <p>fâ‚€ = 1/(2Ï€âˆš(0,1Ã—100Ã—10â»â¶)) = 1/(2Ï€Ã—0,00316) â‰ˆ <strong>50,3 Hz</strong> (trÃ¨s proche de 50 Hz !)</p>
        </div>
      </div>

      <!-- Calculateur impÃ©dance -->
      <div class="content-block" id="i-calc">
        <div class="section-tag">ğŸ§® Outil interactif</div>
        <h2 class="block-title">Calculateur d'impÃ©dance</h2>
        <div class="calc-box">
          <div class="calc-title">âš¡ Calcul <span>ImpÃ©dance RLC</span></div>
          <div class="calc-grid">
            <div class="calc-field"><label class="calc-label">RÃ©sistance R (Î©)</label><input type="number" class="calc-input" id="i-r" value="20" oninput="calcImpedance()"></div>
            <div class="calc-field"><label class="calc-label">Inductance L (mH)</label><input type="number" class="calc-input" id="i-l" value="50" oninput="calcImpedance()"></div>
            <div class="calc-field"><label class="calc-label">Condensateur C (ÂµF)</label><input type="number" class="calc-input" id="i-c" value="0" oninput="calcImpedance()"></div>
            <div class="calc-field"><label class="calc-label">FrÃ©quence f (Hz)</label><input type="number" class="calc-input" id="i-f" value="50" oninput="calcImpedance()"></div>
            <div class="calc-field"><label class="calc-label">Tension V (V)</label><input type="number" class="calc-input" id="i-v" value="230" oninput="calcImpedance()"></div>
          </div>
          <button class="calc-btn" onclick="calcImpedance()">Calculer â†’</button>
          <div class="calc-result" id="i-result"></div>
        </div>
      </div>

      <!-- Exercices -->
      <div class="content-block" id="i-exercices">
        <div class="section-tag">ğŸ“ Exercices</div>
        <h2 class="block-title">Exercice 3 â€” Diviseur de courant (p.56)</h2>
        <div class="example-box">
          <p>I = 2,5 A. Branche 1 : Zâ‚ = 4 âˆ’ j0,002 Î©. Branche 2 : Zâ‚‚ = 10 + j40 Î©.</p>
          <p>Calculer V, Iâ‚, Iâ‚‚, P, Q.</p>
          <div class="expand-card"><div class="expand-header" onclick="toggleExpand(this)"><span class="expand-header-text">Solution complÃ¨te</span><span class="expand-icon">+</span></div>
          <div class="expand-content">
            <p>|Zâ‚| â‰ˆ 4 Î© (partie imaginaire nÃ©gligeable), |Zâ‚‚| = âˆš(100+1600) = âˆš1700 â‰ˆ 41,2 Î©</p>
            <p>Z<sub>Ã©q</sub> = Zâ‚Â·Zâ‚‚/(Zâ‚+Zâ‚‚). Zâ‚+Zâ‚‚ = 14+j40 â†’ |Zâ‚+Zâ‚‚| â‰ˆ 42,4 Î©</p>
            <p>|Z<sub>Ã©q</sub>| â‰ˆ (4Ã—41,2)/42,4 â‰ˆ 3,89 Î©</p>
            <p>V = I Ã— |Z<sub>Ã©q</sub>| = 2,5 Ã— 3,89 â‰ˆ <strong>9,72 V</strong></p>
            <p>Iâ‚ = V/|Zâ‚| = 9,72/4 â‰ˆ <strong>2,43 A</strong> | Iâ‚‚ = 9,72/41,2 â‰ˆ <strong>0,236 A</strong></p>
            <p>P = Râ‚Â·Iâ‚Â² + Râ‚‚Â·Iâ‚‚Â² = 4Ã—2,43Â² + 10Ã—0,236Â² â‰ˆ 23,6 + 0,56 â‰ˆ <strong>24,2 W</strong></p>
            <p>Q â‰ˆ X<sub>L2</sub>Â·Iâ‚‚Â² = 40Ã—0,236Â² â‰ˆ <strong>+2,23 VAr</strong></p>
          </div></div>
        </div>
      </div>

      <!-- QCM -->
      <div class="content-block" id="i-qcm">
        <div class="section-tag">ğŸ“‹ QCM</div>
        <h2 class="block-title">QCM â€” Lois & ImpÃ©dances</h2>
        <div id="qcm-impedances"></div>
      </div>

    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- MODULE 04 â€” PUISSANCES (enrichi) -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="lesson-puissances" class="section">
  <button class="back-btn" onclick="showSection('modules-elec')">â† Retour aux modules</button>
  <div class="lesson-layout">
    <aside class="lesson-sidebar">
      <div class="sidebar-title">MODULE 04</div>
      <ul class="sidebar-items">
        <li class="sidebar-item active" onclick="scrollTo(0,0)">4.1 Puissance instantanÃ©e</li>
        <li class="sidebar-item" onclick="scrollToId('p-types')">4.2 P, Q, S â€” Triangle</li>
        <li class="sidebar-item" onclick="scrollToId('p-complexe')">4.3 Puissance complexe</li>
        <li class="sidebar-item" onclick="scrollToId('p-boucherot')">4.4 ThÃ©orÃ¨me de Boucherot</li>
        <li class="sidebar-item" onclick="scrollToId('p-compensation')">4.5 Compensation de Q</li>
        <li class="sidebar-item" onclick="scrollToId('p-calc')">ğŸ§® Calculatrice</li>
        <li class="sidebar-item" onclick="scrollToId('p-exercices')">ğŸ“ Exercices</li>
        <li class="sidebar-item" onclick="scrollToId('p-qcm')">ğŸ“‹ QCM</li>
      </ul>
    </aside>
    <div class="lesson-content">

      <!-- 4.1 Puissance instantanÃ©e -->
      <div class="content-block">
        <div class="section-tag">4.1 â€” Puissance instantanÃ©e (p.41-42)</div>
        <h2 class="block-title">Puissance instantanÃ©e</h2>
        <div class="formula-box">
          <span class="formula-label">Puissance instantanÃ©e â€” DÃ©composition</span>
          <div class="formula">
            p(t) = v(t)Â·i(t) = VÂ·IÂ·cos(Ï†) âˆ’ VÂ·IÂ·cos(2Ï‰tâˆ’Ï†)
          </div>
          <div class="formula-explain">
            Avec v(t) = Vâˆš2Â·sin(Ï‰t) et i(t) = Iâˆš2Â·sin(Ï‰tâˆ’Ï†) :<br>
            p(t) = 2VIÂ·sin(Ï‰t)Â·sin(Ï‰tâˆ’Ï†) = VIÂ·[cos(Ï†) âˆ’ cos(2Ï‰tâˆ’Ï†)]<br>
            â€¢ Partie constante = puissance active P = VÂ·IÂ·cosÏ†<br>
            â€¢ Partie fluctuante Ã  2Ï‰ = composante pulsatoire (s'annule en moyenne)<br>
            <strong>Remarque :</strong> la puissance fluctue Ã  deux fois la frÃ©quence du signal !
          </div>
        </div>
        <div class="alert"><div class="alert-icon">âš ï¸</div><div class="alert-text"><strong>En monophasÃ© :</strong> la puissance instantanÃ©e est pulsatoire Ã  2Ï‰ (fluctue entre 0 et 2P). En <strong>triphasÃ© Ã©quilibrÃ©</strong> : les 3 composantes s'annulent â†’ puissance instantanÃ©e <em>constante</em> = 3VIÂ·cosÏ†. C'est l'avantage majeur du triphasÃ© pour les moteurs !</div></div>
      </div>

      <!-- 4.2 P, Q, S -->
      <div class="content-block" id="p-types">
        <div class="section-tag">4.2 â€” Triangle des puissances (p.43-45)</div>
        <h2 class="block-title">Puissances P, Q, S</h2>
        <table class="vtable">
          <tr><th>Grandeur</th><th>Nom</th><th>Formule</th><th>UnitÃ©</th><th>Signification physique</th></tr>
          <tr>
            <td class="accent">P</td><td>Puissance active</td>
            <td class="mono">P = VÂ·IÂ·cosÏ†</td><td>W (watts)</td>
            <td>Travail rÃ©el, chaleur, mouvement. Ã‰nergie effectivement consommÃ©e.</td>
          </tr>
          <tr>
            <td class="accent">Q</td><td>Puissance rÃ©active</td>
            <td class="mono">Q = VÂ·IÂ·sinÏ†</td><td>VAr</td>
            <td>Ã‰nergie oscillant entre source et champ magnÃ©tique/Ã©lectrique. Aucun travail utile.</td>
          </tr>
          <tr>
            <td class="accent">S</td><td>Puissance apparente</td>
            <td class="mono">S = VÂ·I = âˆš(PÂ²+QÂ²)</td><td>VA</td>
            <td>Dimensionnement des cÃ¢bles, disjoncteurs, gÃ©nÃ©ratrices. S = |Åœ|.</td>
          </tr>
          <tr>
            <td class="accent">cosÏ†</td><td>Facteur de puissance</td>
            <td class="mono">cosÏ† = P/S</td><td>sans unitÃ©</td>
            <td>Rapport P/S. Plus cosÏ† proche de 1, meilleur est le rendement du rÃ©seau.</td>
          </tr>
        </table>
        <div class="formula-box">
          <span class="formula-label">Triangle des puissances (Pythagore)</span>
          <div class="formula">SÂ² = PÂ² + QÂ² &nbsp;â†’&nbsp; S = âˆš(PÂ²+QÂ²)</div>
          <div class="formula-explain">
            S est l'hypotÃ©nuse, P la base (cÃ´tÃ© rÃ©el), Q le cÃ´tÃ© vertical (rÃ©actif).<br>
            Charge inductive : Q > 0 (angle Ï† > 0). Charge capacitive : Q &lt; 0 (angle Ï† &lt; 0).<br>
            Charge purement rÃ©sistive : Q = 0, cosÏ† = 1, S = P (idÃ©al !).
          </div>
        </div>

        <!-- SVG triangle des puissances -->
        <div class="diagram-container">
          <span class="diagram-label">Triangle des puissances</span>
          <svg viewBox="0 0 400 220" class="diagram">
            <!-- Triangle -->
            <line x1="60" y1="160" x2="300" y2="160" stroke="#3af4c8" stroke-width="2.5"/>
            <line x1="300" y1="160" x2="300" y2="70" stroke="#ff5e3a" stroke-width="2.5"/>
            <line x1="60" y1="160" x2="300" y2="70" stroke="#e8f428" stroke-width="3"/>
            <!-- Labels -->
            <text x="175" y="180" fill="#3af4c8" font-size="13" text-anchor="middle" font-family="Space Mono">P (W)</text>
            <text x="320" y="120" fill="#ff5e3a" font-size="13" font-family="Space Mono">Q (VAr)</text>
            <text x="150" y="100" fill="#e8f428" font-size="14" text-anchor="middle" font-family="Space Mono" transform="rotate(-22,160,120)">S (VA)</text>
            <!-- Angle phi -->
            <path d="M 110,160 A 50,50 0 0,0 96,128" fill="none" stroke="#e8f428" stroke-width="1.5"/>
            <text x="118" y="142" fill="#e8f428" font-size="11" font-family="Space Mono">Ï†</text>
            <!-- Angle droit -->
            <rect x="292" y="152" width="8" height="8" fill="none" stroke="#8888aa" stroke-width="1"/>
            <!-- Formules -->
            <text x="30" y="210" fill="#8888aa" font-size="10" font-family="Space Mono">cosÏ† = P/S &nbsp;|&nbsp; sinÏ† = Q/S &nbsp;|&nbsp; SÂ² = PÂ²+QÂ²</text>
          </svg>
        </div>
      </div>

      <!-- 4.3 Puissance complexe -->
      <div class="content-block" id="p-complexe">
        <div class="section-tag">4.3 â€” Puissance complexe (p.45-51)</div>
        <h2 class="block-title">Puissance complexe Åœ</h2>
        <div class="formula-box">
          <span class="formula-label">DÃ©finitions Ã©quivalentes</span>
          <div class="formula">
            Åœ = VÂ·I* = P + jQ<br>
            Åœ = ZÂ·|I|Â² = ZÂ·IÂ·I*<br>
            Åœ = |V|Â²/Z* = VÂ²/Z*
          </div>
          <div class="formula-explain">
            I* = conjuguÃ© de I. Le conjuguÃ© garantit que Re(Åœ) = P > 0 pour un rÃ©cepteur passif.<br>
            |Åœ| = S = âˆš(PÂ²+QÂ²) â€” le module donne la puissance apparente.<br>
            <strong>Identification :</strong> P = Re(Åœ) = Re(Z)Â·|I|Â² = RÂ·IÂ² &nbsp;|&nbsp; Q = Im(Åœ) = Im(Z)Â·|I|Â² = XÂ·IÂ²
          </div>
        </div>
        <div class="example-box">
          <span class="example-label">Calcul complet â€” Exercice 1 (p.54)</span>
          <p>V = 230 V, f = 50 Hz. Charge : Râ‚ = 20 Î© en parallÃ¨le avec Râ‚‚ = 10 Î©, L = 20 mH en sÃ©rie avec Râ‚.</p>
          <div class="expand-card"><div class="expand-header" onclick="toggleExpand(this)"><span class="expand-header-text">Solution dÃ©taillÃ©e</span><span class="expand-icon">+</span></div>
          <div class="expand-content">
            <p>Ï‰ = 2Ï€Ã—50 = 314 rad/s &nbsp;|&nbsp; X<sub>L</sub> = 314Ã—0,02 = 6,28 Î©</p>
            <p>Zâ‚ (branche Râ‚+L) = 20 + j6,28 Î© &nbsp;|&nbsp; |Zâ‚| = âˆš(400+39,4) = âˆš439,4 â‰ˆ 20,96 Î©</p>
            <p>Iâ‚ = 230/20,96 â‰ˆ <strong>10,97 A</strong> &nbsp;|&nbsp; Iâ‚‚ = 230/10 = <strong>23 A</strong></p>
            <p>Pâ‚ = Râ‚Â·Iâ‚Â² = 20Ã—10,97Â² â‰ˆ 2408 W &nbsp;|&nbsp; Qâ‚ = X<sub>L</sub>Â·Iâ‚Â² = 6,28Ã—10,97Â² â‰ˆ 756 VAr</p>
            <p>Pâ‚‚ = Râ‚‚Â·Iâ‚‚Â² = 10Ã—23Â² = 5290 W &nbsp;|&nbsp; Qâ‚‚ = 0</p>
            <p>P<sub>tot</sub> = 2408+5290 = <strong>7698 W</strong> &nbsp;|&nbsp; Q<sub>tot</sub> = <strong>756 VAr</strong></p>
            <p>S = âˆš(7698Â²+756Â²) â‰ˆ <strong>7735 VA</strong></p>
            <p>I = S/V = 7735/230 â‰ˆ <strong>33,6 A</strong> &nbsp;|&nbsp; cosÏ† = P/S = 7698/7735 â‰ˆ <strong>0,995</strong></p>
          </div></div>
        </div>
      </div>

      <!-- 4.4 Boucherot -->
      <div class="content-block" id="p-boucherot">
        <div class="section-tag">4.4 â€” ThÃ©orÃ¨me fondamental (p.52-53)</div>
        <h2 class="block-title">ThÃ©orÃ¨me de Boucherot</h2>
        <div class="formula-box">
          <span class="formula-label">Ã‰noncÃ© et corollaires</span>
          <div class="formula">
            P<sub>tot</sub> = Î£P<sub>i</sub> âœ“ &nbsp;&nbsp; Q<sub>tot</sub> = Î£Q<sub>i</sub> âœ“ &nbsp;&nbsp; Åœ<sub>tot</sub> = Î£Åœ<sub>i</sub> âœ“<br>
            <span style="color:var(--accent2)">S<sub>tot</sub> â‰  Î£S<sub>i</sub> âœ—</span> &nbsp;&nbsp; S<sub>tot</sub> = âˆš(P<sub>tot</sub>Â²+Q<sub>tot</sub>Â²)
          </div>
          <div class="formula-explain">
            P et Q sont additives (scalaires rÃ©els). Åœ est additive (complexe).<br>
            Mais S<sub>tot</sub> (module de Åœ<sub>tot</sub>) n'est PAS la somme des modules â€” Ã  cause des dÃ©phasages diffÃ©rents !<br>
            <strong>MÃ©thode :</strong> 1) Calculer P<sub>i</sub> et Q<sub>i</sub> de chaque charge. 2) Sommer : P<sub>tot</sub>, Q<sub>tot</sub>. 3) S<sub>tot</sub> = âˆš(PÂ²+QÂ²). 4) cosÏ†<sub>tot</sub> = P<sub>tot</sub>/S<sub>tot</sub>.
          </div>
        </div>
        <div class="tip"><div class="tip-icon">ğŸ’¡</div><div class="tip-text"><strong>Application directe :</strong> Un atelier avec plusieurs machines de facteurs de puissance diffÃ©rents. On calcule P et Q de chacune, on additionne, puis S<sub>tot</sub> = âˆš(Î£P)Â²+(Î£Q)Â²). On ne fait JAMAIS S<sub>tot</sub> = Î£S<sub>i</sub>.</div></div>
      </div>

      <!-- 4.5 Compensation -->
      <div class="content-block" id="p-compensation">
        <div class="section-tag">4.5 â€” AmÃ©liorer cosÏ†</div>
        <h2 class="block-title">Compensation de puissance rÃ©active</h2>
        <p class="block-text">Les charges inductives (moteurs, transformateurs) consomment de la puissance rÃ©active Q > 0. Cela augmente S et le courant I, surchargeant inutilement les cÃ¢bles et gÃ©nÃ©ratrices. On compense avec des condensateurs (Q &lt; 0).</p>
        <div class="formula-box">
          <span class="formula-label">Calcul du condensateur de compensation</span>
          <div class="formula">
            Q<sub>C</sub> = PÂ·(tanÏ† âˆ’ tanÏ†')<br>
            C = Q<sub>C</sub>/(Ï‰VÂ²) &nbsp;(monophasÃ©)<br>
            C = Q<sub>C</sub>/(3Ï‰VÂ²) &nbsp;(triphasÃ© Ã©toile)
          </div>
          <div class="formula-explain">
            Ï† = dÃ©phasage initial (cosÏ† donnÃ©) | Ï†' = dÃ©phasage cible (cosÏ†' voulu)<br>
            Q<sub>C</sub> = puissance rÃ©active capacitive Ã  fournir (valeur positive = capacitÃ© Ã  installer)<br>
            Un condensateur produit Q &lt; 0 â†’ il "consomme" du Q nÃ©gatif = fournit du Q positif compensant le Q inductif.
          </div>
        </div>
        <div class="example-box">
          <span class="example-label">Exemple numÃ©rique</span>
          <p>P = 10 kW, cosÏ† = 0,7 (inductif) â†’ cosÏ†' = 0,95. V = 230 V, f = 50 Hz.</p>
          <div class="expand-card"><div class="expand-header" onclick="toggleExpand(this)"><span class="expand-header-text">Calcul complet</span><span class="expand-icon">+</span></div>
          <div class="expand-content">
            <p>Ï† = arccos(0,7) = 45,57Â° â†’ tanÏ† = 1,020</p>
            <p>Ï†' = arccos(0,95) = 18,19Â° â†’ tanÏ†' = 0,329</p>
            <p>Q<sub>C</sub> = 10000Ã—(1,020âˆ’0,329) = <strong>6910 VAr</strong></p>
            <p>C = 6910/(2Ï€Ã—50Ã—230Â²) = 6910/16616 â‰ˆ <strong>416 ÂµF</strong></p>
            <p>VÃ©rif : aprÃ¨s compensation, Q' = Qâˆ’Q<sub>C</sub> = 10200âˆ’6910 = 3290 VAr</p>
            <p>S' = âˆš(10000Â²+3290Â²) â‰ˆ 10530 VA &nbsp;|&nbsp; cosÏ†' = 10000/10530 â‰ˆ 0,950 âœ“</p>
            <p>Gain : courant avant = S/V = 14300/230 â‰ˆ 62 A â†’ aprÃ¨s = 10530/230 â‰ˆ 46 A (25% moins !)</p>
          </div></div>
        </div>
      </div>

      <!-- Calculatrice puissances -->
      <div class="content-block" id="p-calc">
        <div class="section-tag">ğŸ§® Outil interactif</div>
        <h2 class="block-title">Calculatrice â€” Puissances Ã©lectriques</h2>
        <div class="calc-box">
          <div class="calc-title">âš¡ Calculatrice <span>P, Q, S &amp; Compensation</span></div>
          <div style="margin-bottom:1rem">
            <label style="font-size:.8rem;color:var(--text2);font-family:'Space Mono',monospace;display:block;margin-bottom:.5rem">MODE DE CALCUL</label>
            <select id="p-mode" onchange="calcPuissance()" style="background:var(--bg2);border:1px solid var(--border);color:var(--text);padding:.6rem .8rem;border-radius:6px;font-family:'Space Mono',monospace;font-size:.85rem;width:100%;outline:none">
              <option value="pqs">P, Q â†’ S, cosÏ†</option>
              <option value="scosphi">S, cosÏ† â†’ P, Q</option>
              <option value="comp">Compensation de puissance rÃ©active</option>
            </select>
          </div>
          <div class="calc-grid">
            <div class="calc-field"><label class="calc-label" id="p-l1">P (W)</label><input type="number" class="calc-input" id="p-in1" value="5000" oninput="calcPuissance()"></div>
            <div class="calc-field"><label class="calc-label" id="p-l2">Q (VAr)</label><input type="number" class="calc-input" id="p-in2" value="3750" oninput="calcPuissance()"></div>
            <div class="calc-field"><label class="calc-label" id="p-l3">V (V)</label><input type="number" class="calc-input" id="p-in3" value="230" oninput="calcPuissance()"></div>
            <div class="calc-field"><label class="calc-label" id="p-l4">cosÏ†' cible</label><input type="number" class="calc-input" id="p-in4" value="0.95" step="0.01" oninput="calcPuissance()"></div>
          </div>
          <button class="calc-btn" onclick="calcPuissance()">Calculer â†’</button>
          <div class="calc-result" id="p-result"></div>
        </div>
      </div>

      <!-- Exercices -->
      <div class="content-block" id="p-exercices">
        <div class="section-tag">ğŸ“ Exercices rÃ©solus</div>
        <h2 class="block-title">Exercices du cours</h2>
        <div class="example-box" style="margin-bottom:1rem">
          <span class="example-label">Exercice 1 â€” Charge monophasÃ©e (p.54)</span>
          <p>V = 230 V, f = 50 Hz. Râ‚ = 20 Î© // L=20mH en sÃ©rie avec Râ‚‚ = 10 Î© en parallÃ¨le.</p>
          <p><strong>RÃ©sultats :</strong> Iâ‚ â‰ˆ 10,97 A | Iâ‚‚ = 23 A | I â‰ˆ 33,6 A | P â‰ˆ 7698 W | Q â‰ˆ 756 VAr | S â‰ˆ 7735 VA | cosÏ† â‰ˆ 0,995</p>
        </div>
        <div class="example-box">
          <span class="example-label">Exercice â€” Boucherot : atelier industriel</span>
          <p>3 charges : M1 (P=5kW, cosÏ†=0,8 AR), M2 (P=8kW, cosÏ†=0,9 AR), Ã‰clairage (P=2kW, cosÏ†=1)</p>
          <div class="expand-card"><div class="expand-header" onclick="toggleExpand(this)"><span class="expand-header-text">Solution Boucherot</span><span class="expand-icon">+</span></div>
          <div class="expand-content">
            <p>M1 : tanÏ†=0,75 â†’ Qâ‚=5000Ã—0,75=3750 VAr</p>
            <p>M2 : tanÏ†=0,484 â†’ Qâ‚‚=8000Ã—0,484=3873 VAr</p>
            <p>Ã‰clairage : Qâ‚ƒ=0</p>
            <p>P<sub>tot</sub> = 5+8+2 = <strong>15 kW</strong></p>
            <p>Q<sub>tot</sub> = 3750+3873+0 = <strong>7623 VAr</strong></p>
            <p>S<sub>tot</sub> = âˆš(15000Â²+7623Â²) = âˆš(225Ã—10â¶+58Ã—10â¶) â‰ˆ <strong>16830 VA = 16,83 kVA</strong></p>
            <p>cosÏ†<sub>tot</sub> = 15000/16830 â‰ˆ <strong>0,892</strong></p>
          </div></div>
        </div>
      </div>

      <!-- QCM -->
      <div class="content-block" id="p-qcm">
        <div class="section-tag">ğŸ“‹ QCM</div>
        <h2 class="block-title">QCM â€” Puissances Ã‰lectriques</h2>
        <div id="qcm-puissances"></div>
      </div>

    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- MODULE 05 â€” MÃ‰THODOLOGIE (enrichi) -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="lesson-methodologie" class="section">
  <button class="back-btn" onclick="showSection('modules-elec')">â† Retour aux modules</button>
  <div class="lesson-layout">
    <aside class="lesson-sidebar">
      <div class="sidebar-title">MODULE 05</div>
      <ul class="sidebar-items">
        <li class="sidebar-item active" onclick="scrollTo(0,0)">5.1 MÃ©thode gÃ©nÃ©rale</li>
        <li class="sidebar-item" onclick="scrollToId('m-etapes')">5.2 Les 5 Ã©tapes</li>
        <li class="sidebar-item" onclick="scrollToId('m-serie')">5.3 Circuits sÃ©rie</li>
        <li class="sidebar-item" onclick="scrollToId('m-parallele')">5.4 Circuits parallÃ¨le</li>
        <li class="sidebar-item" onclick="scrollToId('m-mixte')">5.5 Circuits mixtes</li>
        <li class="sidebar-item" onclick="scrollToId('m-erreurs')">5.6 Erreurs classiques</li>
        <li class="sidebar-item" onclick="scrollToId('m-synthese')">5.7 Fiche synthÃ¨se</li>
        <li class="sidebar-item" onclick="scrollToId('m-qcm')">ğŸ“‹ QCM Final</li>
      </ul>
    </aside>
    <div class="lesson-content">

      <!-- 5.1 MÃ©thode -->
      <div class="content-block">
        <div class="section-tag">5.1 â€” Approche (p.44)</div>
        <h2 class="block-title">MÃ©thodologie pour les circuits AC</h2>
        <p class="block-text">En rÃ©gime sinusoÃ¯dal, toutes les grandeurs sont traitÃ©es en <strong>notation complexe</strong>. La mÃ©thode est rigoureuse et systÃ©matique â€” une fois acquise, tout circuit se rÃ©sout de la mÃªme faÃ§on.</p>
        <div class="tip"><div class="tip-icon">ğŸ’¡</div><div class="tip-text"><strong>RÃ¨gle d'or :</strong> On travaille TOUJOURS en complexes. On ne revient au temporel qu'Ã  la fin si nÃ©cessaire. Les lois de Kirchhoff s'appliquent exactement comme en continu, mais avec des nombres complexes.</div></div>
      </div>

      <!-- 5.2 Les 5 Ã©tapes -->
      <div class="content-block" id="m-etapes">
        <div class="section-tag">5.2 â€” ProcÃ©dure</div>
        <h2 class="block-title">Les 5 Ã©tapes universelles</h2>
        <div style="display:flex;flex-direction:column;gap:.75rem;margin:1rem 0">
          <div style="background:var(--bg2);border-left:3px solid var(--accent);padding:1rem;border-radius:0 8px 8px 0">
            <strong style="color:var(--accent)">1. Calculer Ï‰ et les impÃ©dances</strong>
            <p style="font-size:.85rem;color:var(--text2);margin-top:.3rem">Ï‰ = 2Ï€f. Puis Z<sub>R</sub>=R, Z<sub>L</sub>=jÏ‰L, Z<sub>C</sub>=1/(jÏ‰C) = âˆ’j/(Ï‰C).</p>
          </div>
          <div style="background:var(--bg2);border-left:3px solid var(--accent3);padding:1rem;border-radius:0 8px 8px 0">
            <strong style="color:var(--accent3)">2. Simplifier le circuit</strong>
            <p style="font-size:.85rem;color:var(--text2);margin-top:.3rem">Associations sÃ©rie/parallÃ¨le. Z<sub>sÃ©rie</sub> = Î£Z<sub>i</sub>. 1/Z<sub>para</sub> = Î£(1/Z<sub>i</sub>).</p>
          </div>
          <div style="background:var(--bg2);border-left:3px solid var(--accent2);padding:1rem;border-radius:0 8px 8px 0">
            <strong style="color:var(--accent2)">3. Appliquer les lois de Kirchhoff</strong>
            <p style="font-size:.85rem;color:var(--text2);margin-top:.3rem">Loi des mailles et des nÅ“uds en complexes. RÃ©soudre le systÃ¨me d'Ã©quations.</p>
          </div>
          <div style="background:var(--bg2);border-left:3px solid #a78bfa;padding:1rem;border-radius:0 8px 8px 0">
            <strong style="color:#a78bfa">4. Calculer les grandeurs demandÃ©es</strong>
            <p style="font-size:.85rem;color:var(--text2);margin-top:.3rem">I = V/Z. U<sub>k</sub> = Z<sub>k</sub>Â·I. |I| = valeur efficace. arg(I) = phase.</p>
          </div>
          <div style="background:var(--bg2);border-left:3px solid #34d399;padding:1rem;border-radius:0 8px 8px 0">
            <strong style="color:#34d399">5. Calculer P, Q, S si demandÃ©</strong>
            <p style="font-size:.85rem;color:var(--text2);margin-top:.3rem">Åœ = VÂ·I*. P = Re(Åœ) = RÂ·|I|Â². Q = Im(Åœ) = XÂ·|I|Â². Boucherot si plusieurs charges.</p>
          </div>
        </div>
      </div>

      <!-- 5.3 Circuits sÃ©rie -->
      <div class="content-block" id="m-serie">
        <div class="section-tag">5.3 â€” Exemple type</div>
        <h2 class="block-title">Circuit RL sÃ©rie â€” Exemple complet</h2>
        <div class="example-box">
          <span class="example-label">DonnÃ©es</span>
          <p>V = 100 V, f = 50 Hz, R = 30 Î©, L = 127 mH</p>
        </div>
        <div class="expand-card"><div class="expand-header" onclick="toggleExpand(this)"><span class="expand-header-text">Solution pas Ã  pas</span><span class="expand-icon">+</span></div>
        <div class="expand-content">
          <p><strong>Ã‰tape 1 :</strong> Ï‰ = 2Ï€Ã—50 = 314 rad/s</p>
          <p>Z<sub>L</sub> = jÏ‰L = jÃ—314Ã—0,127 = <strong>j40 Î©</strong></p>
          <p><strong>Ã‰tape 2 :</strong> Z<sub>total</sub> = R + Z<sub>L</sub> = 30 + j40 Î©</p>
          <p>|Z| = âˆš(900+1600) = âˆš2500 = <strong>50 Î©</strong> &nbsp;|&nbsp; Ï† = arctan(40/30) = <strong>53,1Â°</strong></p>
          <p><strong>Ã‰tape 3 :</strong> V = 100âˆ 0Â° V (rÃ©fÃ©rence)</p>
          <p><strong>Ã‰tape 4 :</strong> I = V/Z = 100/(50âˆ 53,1Â°) = <strong>2âˆ âˆ’53,1Â° A</strong></p>
          <p>i(t) = 2âˆš2Â·sin(314t âˆ’ 53,1Â°) A</p>
          <p>U<sub>R</sub> = RÂ·I = 30Ã—2âˆ âˆ’53,1Â° = <strong>60âˆ âˆ’53,1Â° V</strong></p>
          <p>U<sub>L</sub> = Z<sub>L</sub>Â·I = j40Ã—2âˆ âˆ’53,1Â° = 40âˆ 90Â°Ã—2âˆ âˆ’53,1Â° = <strong>80âˆ 36,9Â° V</strong></p>
          <p><strong>VÃ©rif maille :</strong> U<sub>R</sub> + U<sub>L</sub> = (36âˆ’j48) + (64+j48) = 100 = V âœ“</p>
          <p><strong>Ã‰tape 5 :</strong> P = RÂ·IÂ² = 30Ã—4 = <strong>120 W</strong> &nbsp;|&nbsp; Q = X<sub>L</sub>Â·IÂ² = 40Ã—4 = <strong>160 VAr</strong></p>
          <p>S = VÂ·I = 100Ã—2 = <strong>200 VA</strong> &nbsp;|&nbsp; cosÏ† = 120/200 = <strong>0,6</strong> âœ“ (= cos53,1Â°)</p>
        </div></div>
      </div>

      <!-- 5.4 Circuits parallÃ¨le -->
      <div class="content-block" id="m-parallele">
        <div class="section-tag">5.4 â€” Exemple type</div>
        <h2 class="block-title">Circuit RC parallÃ¨le â€” Exemple complet</h2>
        <div class="example-box">
          <span class="example-label">DonnÃ©es</span>
          <p>V = 230 V, f = 50 Hz, R = 23 Î©, C = 100 ÂµF</p>
        </div>
        <div class="expand-card"><div class="expand-header" onclick="toggleExpand(this)"><span class="expand-header-text">Solution pas Ã  pas</span><span class="expand-icon">+</span></div>
        <div class="expand-content">
          <p><strong>Ã‰tape 1 :</strong> Ï‰ = 314 rad/s. Z<sub>C</sub> = 1/(jÃ—314Ã—100Ã—10â»â¶) = âˆ’j31,85 Î©</p>
          <p><strong>Ã‰tape 2 :</strong> ParallÃ¨le â†’ courants s'additionnent</p>
          <p>I<sub>R</sub> = V/R = 230/23 = <strong>10âˆ 0Â° A</strong></p>
          <p>I<sub>C</sub> = V/Z<sub>C</sub> = 230/(âˆ’j31,85) = j7,22 A = <strong>7,22âˆ +90Â° A</strong></p>
          <p><strong>Ã‰tape 3/4 :</strong> I = I<sub>R</sub> + I<sub>C</sub> = 10 + j7,22</p>
          <p>|I| = âˆš(100+52,1) = âˆš152,1 â‰ˆ <strong>12,33 A</strong></p>
          <p>Ï† = arctan(7,22/10) â‰ˆ <strong>+35,8Â°</strong> (courant en avance â†’ capacitif)</p>
          <p><strong>Ã‰tape 5 :</strong> P = RÂ·I<sub>R</sub>Â² = 23Ã—100 = <strong>2300 W</strong></p>
          <p>Q = âˆ’X<sub>C</sub>Â·I<sub>C</sub>Â² = âˆ’31,85Ã—52,1 â‰ˆ <strong>âˆ’1660 VAr</strong></p>
          <p>S = VÂ·I = 230Ã—12,33 â‰ˆ <strong>2836 VA</strong> &nbsp;|&nbsp; cosÏ† = 2300/2836 â‰ˆ <strong>0,811</strong></p>
        </div></div>
      </div>

      <!-- 5.5 Circuit mixte -->
      <div class="content-block" id="m-mixte">
        <div class="section-tag">5.5 â€” Exercice complet</div>
        <h2 class="block-title">Circuit RLC mixte sÃ©rie-parallÃ¨le</h2>
        <div class="example-box">
          <span class="example-label">Exercice avancÃ©</span>
          <p>V = 100âˆ 0Â° V, f = 50 Hz. Râ‚ = 10 Î© en sÃ©rie avec (Râ‚‚ = 20 Î© // C = 100 ÂµF)</p>
          <div class="expand-card"><div class="expand-header" onclick="toggleExpand(this)"><span class="expand-header-text">Solution dÃ©taillÃ©e</span><span class="expand-icon">+</span></div>
          <div class="expand-content">
            <p>Ï‰ = 314 rad/s. Z<sub>C</sub> = âˆ’j31,85 Î©</p>
            <p>Z<sub>parallÃ¨le</sub> = Râ‚‚Â·Z<sub>C</sub>/(Râ‚‚+Z<sub>C</sub>) = 20Ã—(âˆ’j31,85)/(20âˆ’j31,85)</p>
            <p>|20âˆ’j31,85| = âˆš(400+1014) = âˆš1414 = 37,6 Î©</p>
            <p>NumÃ©rateur : |20Ã—(âˆ’j31,85)| = 637 ; arg = âˆ’90Â°</p>
            <p>Z<sub>para</sub> = 637âˆ âˆ’90Â° / 37,6âˆ âˆ’57,8Â° = 16,94âˆ âˆ’32,2Â° = 14,33 âˆ’ j9,06 Î©</p>
            <p>Z<sub>total</sub> = Râ‚ + Z<sub>para</sub> = 10 + 14,33 âˆ’ j9,06 = 24,33 âˆ’ j9,06 Î©</p>
            <p>|Z<sub>total</sub>| = âˆš(592+82) = âˆš674 = 25,96 Î© &nbsp;|&nbsp; Ï† = arctan(âˆ’9,06/24,33) = âˆ’20,4Â°</p>
            <p>I = 100/25,96 â‰ˆ <strong>3,85 A</strong> &nbsp;|&nbsp; Ï†<sub>I</sub> = +20,4Â° (capacitif)</p>
            <p>P = Re(Z<sub>total</sub>)Â·IÂ² = 24,33Ã—14,82 â‰ˆ <strong>360 W</strong></p>
          </div></div>
        </div>
      </div>

      <!-- 5.6 Erreurs classiques -->
      <div class="content-block" id="m-erreurs">
        <div class="section-tag">5.6 â€” PiÃ¨ges Ã  Ã©viter</div>
        <h2 class="block-title">Erreurs classiques Ã  ne pas commettre</h2>
        <div style="display:flex;flex-direction:column;gap:1rem">
          <div class="alert"><div class="alert-icon">âŒ</div><div class="alert-text"><strong>Additionner des valeurs efficaces scalaires :</strong> U<sub>R</sub> + U<sub>L</sub> â‰  V (sauf si en phase). Il faut toujours additionner les phaseurs (complexes).</div></div>
          <div class="alert"><div class="alert-icon">âŒ</div><div class="alert-text"><strong>Additionner des puissances apparentes :</strong> S<sub>tot</sub> â‰  Sâ‚ + Sâ‚‚. Seulement P et Q sont additives. Calculer S<sub>tot</sub> = âˆš(P<sub>tot</sub>Â²+Q<sub>tot</sub>Â²).</div></div>
          <div class="alert"><div class="alert-icon">âŒ</div><div class="alert-text"><strong>Oublier le facteur âˆš2 :</strong> La valeur efficace V = V<sub>max</sub>/âˆš2. Ne pas confondre valeur crÃªte et valeur efficace dans les formules de puissance (P = V<sub>eff</sub>Â·I<sub>eff</sub>Â·cosÏ†).</div></div>
          <div class="alert"><div class="alert-icon">âŒ</div><div class="alert-text"><strong>Mauvais quadrant pour l'argument :</strong> arctan(b/a) donne toujours un angle entre âˆ’90Â° et +90Â°. Si a &lt; 0, ajouter Â±180Â° selon le signe de b.</div></div>
        </div>
      </div>

      <!-- 5.7 Fiche synthÃ¨se -->
      <div class="content-block" id="m-synthese">
        <div class="section-tag">5.7 â€” RÃ©sumÃ©</div>
        <h2 class="block-title">Fiche de synthÃ¨se â€” Tout en un tableau</h2>
        <table class="vtable">
          <tr><th>Grandeur</th><th>Formule</th><th>Domaine</th></tr>
          <tr><td class="accent">ImpÃ©dance R</td><td class="mono">Z = R</td><td>RÃ©el, Ï†=0Â°</td></tr>
          <tr><td class="accent">ImpÃ©dance L</td><td class="mono">Z = jÏ‰L</td><td>Imaginaire pur +, Ï†=+90Â°</td></tr>
          <tr><td class="accent">ImpÃ©dance C</td><td class="mono">Z = 1/(jÏ‰C) = âˆ’j/(Ï‰C)</td><td>Imaginaire pur âˆ’, Ï†=âˆ’90Â°</td></tr>
          <tr><td class="accent">Courant</td><td class="mono">I = V/Z</td><td>Complexe</td></tr>
          <tr><td class="accent">Puissance active</td><td class="mono">P = Re(Åœ) = R|I|Â²</td><td>W</td></tr>
          <tr><td class="accent">Puissance rÃ©active</td><td class="mono">Q = Im(Åœ) = X|I|Â²</td><td>VAr</td></tr>
          <tr><td class="accent">Puissance apparente</td><td class="mono">S = |Åœ| = âˆš(PÂ²+QÂ²)</td><td>VA</td></tr>
          <tr><td class="accent">Facteur de puissance</td><td class="mono">cosÏ† = P/S</td><td>0 Ã  1</td></tr>
          <tr><td class="accent">Boucherot</td><td class="mono">P<sub>tot</sub>=Î£P, Q<sub>tot</sub>=Î£Q, S<sub>tot</sub>=âˆš(PÂ²+QÂ²)</td><td>Additif P et Q seulement</td></tr>
        </table>
      </div>

      <!-- QCM -->
      <div class="content-block" id="m-qcm">
        <div class="section-tag">ğŸ“‹ QCM Final</div>
        <h2 class="block-title">QCM â€” MÃ©thodologie & SynthÃ¨se</h2>
        <div id="qcm-methodologie"></div>
      </div>

    </div>
  </div>
</div>


<!-- â•â•â• LESSON: PUISSANCES â•â•â• -->
 <div id="lesson-aop-bases" class="section">
  <button class="back-btn" onclick="showSection('modules-aop')">â† Retour aux modules AOP</button>
  
  <div class="lesson-layout">
    <aside class="lesson-sidebar">
      <div class="sidebar-title">MODULE AOP-01</div>
      <ul class="sidebar-items">
        <li class="sidebar-item active" onclick="scrollTo(0,0)">1. Les 4 Amplificateurs</li>
        <li class="sidebar-item" onclick="scrollToId('aop-ideal')">2. ModÃ¨le AOP IdÃ©al</li>
        <li class="sidebar-item" onclick="scrollToId('aop-cr')">3. La Contre-RÃ©action</li>
        <li class="sidebar-item" onclick="scrollToId('aop-qcm')">ğŸ“‹ QCM</li>
      </ul>
    </aside>

    <div class="lesson-content">
      <div class="content-block">
        <div class="section-tag" style="color: var(--accent3);">1 â€” GÃ©nÃ©ralitÃ©s</div>
        <h2 class="block-title">Les 4 types d'amplification</h2>
        <p class="block-text">Un amplificateur se modÃ©lise par 3 composants : une impÃ©dance d'entrÃ©e (R<sub>in</sub>), un gain interne, et une impÃ©dance de sortie (R<sub>out</sub>).</p>
        
        <table class="vtable">
          <tr><th>Type</th><th>Gain</th><th>UnitÃ©</th><th>Formule</th></tr>
          <tr><td>Tension</td><td class="accent">A<sub>V</sub></td><td>V/V</td><td class="mono">A<sub>V</sub> = V<sub>S</sub> / V<sub>E</sub> (Ã  vide)</td></tr>
          <tr><td>Courant</td><td class="accent">A<sub>I</sub></td><td>A/A</td><td class="mono">A<sub>I</sub> = I<sub>S</sub> / I<sub>E</sub> (en court-circuit)</td></tr>
          <tr><td>Transconductance</td><td class="accent">A<sub>G</sub></td><td>A/V</td><td class="mono">A<sub>G</sub> = I<sub>S</sub> / V<sub>E</sub></td></tr>
          <tr><td>TransrÃ©sistance</td><td class="accent">A<sub>R</sub></td><td>V/A</td><td class="mono">A<sub>R</sub> = V<sub>S</sub> / I<sub>E</sub></td></tr>
        </table>
      </div>

      <div class="content-block" id="aop-ideal">
        <div class="section-tag" style="color: var(--accent3);">2 â€” Composant</div>
        <h2 class="block-title">L'AOP IdÃ©al vs RÃ©el</h2>
        <p class="block-text">L'AOP amplifie la diffÃ©rence de tension entre ses deux entrÃ©es : <strong>&epsilon; = e<sup>+</sup> - e<sup>-</sup></strong></p>
        
        <div class="formula-box" style="border-color: var(--accent3);">
          <span class="formula-label" style="color: var(--accent3);">CaractÃ©ristiques de l'AOP IDÃ‰AL</span>
          <div class="formula">
            R<sub>in</sub> &rarr; &infin; &nbsp; (I<sub>&epsilon;</sub> = 0)<br>
            R<sub>out</sub> = 0 &Omega;<br>
            A &rarr; &infin;
          </div>
          <div class="formula-explain">
            ConsÃ©quence majeure en rÃ©gime linÃ©aire : Puisque A est infini et que la tension de sortie S est bornÃ©e, <strong>&epsilon; = S/A &rarr; 0</strong>. Donc <strong>e<sup>+</sup> = e<sup>-</sup></strong>.
          </div>
        </div>
        
        <div class="alert">
          <div class="alert-icon">âš ï¸</div>
          <div class="alert-text"><strong>AOP RÃ©el :</strong> En rÃ©alitÃ©, R<sub>in</sub> > 10<sup>5</sup> &Omega;, R<sub>out</sub> < 200 &Omega; et A > 10<sup>4</sup>. Il existe aussi une tension de dÃ©calage (Offset) et une vitesse de balayage limitÃ©e (Slew Rate de 0.5 Ã  20 V/Âµs).</div>
        </div>
      </div>

      <div class="content-block" id="aop-cr">
        <div class="section-tag" style="color: var(--accent3);">3 â€” RÃ©gimes de fonctionnement</div>
        <h2 class="block-title">La Contre-RÃ©action (CR)</h2>
        
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin:1.2rem 0">
          <div style="background:var(--bg2);border:1px solid var(--accent3);border-radius:8px;padding:1rem">
            <div style="color:var(--accent3);font-weight:700;margin-bottom:.7rem">CR NÃ©gative (Boucle sur eâ»)</div>
            <p style="font-size: .85rem; color: var(--text2);">Si S augmente, eâ» augmente, ce qui fait diminuer &epsilon; et ramÃ¨ne S vers 0. C'est un Ã©tat d'Ã©quilibre.</p>
            <p style="font-family:'Space Mono',monospace;color:var(--text);margin-top:.5rem;">&rarr; Fonctionnement LINÃ‰AIRE (&epsilon; = 0)</p>
          </div>
          <div style="background:var(--bg2);border:1px solid var(--accent2);border-radius:8px;padding:1rem">
            <div style="color:var(--accent2);font-weight:700;margin-bottom:.7rem">CR Positive (Boucle sur eâº)</div>
            <p style="font-size: .85rem; color: var(--text2);">Si S augmente, eâº augmente, ce qui fait augmenter &epsilon; et pousse S encore plus haut. Effet cumulatif.</p>
            <p style="font-family:'Space Mono',monospace;color:var(--text);margin-top:.5rem;">&rarr; SATURATION (Comparateurs)</p>
          </div>
        </div>
      </div>

      <div class="content-block" id="aop-qcm">
        <div class="section-tag" style="color: var(--accent3);">ğŸ“‹ Test de connaissance</div>
        <h2 class="block-title">QCM â€” Bases de l'AOP</h2>
        <div id="qcm-aop_bases"></div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- MODULE AOP-02 â€” MONTAGES LINÃ‰AIRES -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="lesson-aop-lineaire" class="section">
  <button class="back-btn" onclick="showSection('modules-aop')">â† Retour aux modules AOP</button>
  <div class="lesson-layout">
    <aside class="lesson-sidebar">
      <div class="sidebar-title">MODULE AOP-02</div>
      <ul class="sidebar-items">
        <li class="sidebar-item active" onclick="scrollTo(0,0)">1. Inverseur</li>
        <li class="sidebar-item" onclick="scrollToId('aop2-noninv')">2. Non-inverseur</li>
        <li class="sidebar-item" onclick="scrollToId('aop2-suiveur')">3. Suiveur</li>
        <li class="sidebar-item" onclick="scrollToId('aop2-sommateur')">4. Sommateur</li>
        <li class="sidebar-item" onclick="scrollToId('aop2-soustracteur')">5. Soustracteur</li>
        <li class="sidebar-item" onclick="scrollToId('aop2-integrateur')">6. IntÃ©grateur</li>
        <li class="sidebar-item" onclick="scrollToId('aop2-derivateur')">7. DÃ©rivateur</li>
        <li class="sidebar-item" onclick="scrollToId('aop2-filtres')">8. Filtres actifs</li>
        <li class="sidebar-item" onclick="scrollToId('aop2-calc')">ğŸ”¢ Calculateur</li>
        <li class="sidebar-item" onclick="scrollToId('aop2-qcm')">ğŸ“‹ QCM</li>
      </ul>
    </aside>
    <div class="lesson-content">

      <!-- â”€â”€ 1. INVERSEUR â”€â”€ -->
      <div class="content-block">
        <div class="section-tag" style="color:var(--accent3)">1 â€” Montage de base</div>
        <h2 class="block-title">Montage Inverseur</h2>
        <p class="block-text">L'inverseur est le montage AOP le plus fondamental. Le signal d'entrÃ©e est appliquÃ© sur l'entrÃ©e inverseuse (eâ») via Râ‚, et la contre-rÃ©action se fait via Râ‚‚. Le rÃ©sultat est une amplification avec <strong>inversion de signe</strong>.</p>

        <!-- SchÃ©ma SVG inverseur -->
        <div class="diagram-container">
          <span class="diagram-label">SchÃ©ma â€” Montage Inverseur</span>
          <svg viewBox="0 0 500 220" class="diagram" xmlns="http://www.w3.org/2000/svg">
            <!-- Fils horizontaux entrÃ©e -->
            <line x1="30" y1="110" x2="110" y2="110" stroke="#8888aa" stroke-width="1.5"/>
            <!-- R1 -->
            <rect x="110" y="98" width="60" height="24" rx="4" fill="none" stroke="#e8f428" stroke-width="1.5"/>
            <text x="140" y="92" fill="#e8f428" font-size="11" text-anchor="middle" font-family="Space Mono">Râ‚</text>
            <!-- Fil vers e- -->
            <line x1="170" y1="110" x2="230" y2="110" stroke="#8888aa" stroke-width="1.5"/>
            <!-- AOP triangle -->
            <polygon points="230,70 230,160 330,115" fill="none" stroke="#3af4c8" stroke-width="2"/>
            <!-- e- label -->
            <text x="238" y="118" fill="#ff5e3a" font-size="13" font-family="Space Mono">âˆ’</text>
            <!-- e+ label -->
            <text x="238" y="90" fill="#3af4c8" font-size="13" font-family="Space Mono">+</text>
            <!-- e+ vers masse -->
            <line x1="240" y1="82" x2="240" y2="66" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="224" y1="66" x2="256" y2="66" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="229" y1="61" x2="251" y2="61" stroke="#8888aa" stroke-width="1"/>
            <line x1="234" y1="56" x2="246" y2="56" stroke="#8888aa" stroke-width="0.7"/>
            <!-- Sortie S -->
            <line x1="330" y1="115" x2="420" y2="115" stroke="#8888aa" stroke-width="1.5"/>
            <text x="428" y="119" fill="#e8f428" font-size="12" font-family="Space Mono">S</text>
            <!-- R2 contre-rÃ©action -->
            <line x1="200" y1="110" x2="200" y2="55" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="200" y1="55" x2="370" y2="55" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="370" y1="55" x2="370" y2="115" stroke="#8888aa" stroke-width="1.5"/>
            <rect x="262" y="43" width="60" height="24" rx="4" fill="none" stroke="#ff5e3a" stroke-width="1.5"/>
            <text x="292" y="37" fill="#ff5e3a" font-size="11" text-anchor="middle" font-family="Space Mono">Râ‚‚</text>
            <!-- Labels -->
            <text x="30" y="104" fill="#3af4c8" font-size="11" font-family="Space Mono">Ve</text>
            <text x="128" y="140" fill="#8888aa" font-size="10" font-family="Space Mono">CR nÃ©gative</text>
            <!-- NÅ“ud point -->
            <circle cx="200" cy="110" r="3" fill="#e8f428"/>
          </svg>
        </div>

        <div class="formula-box">
          <span class="formula-label">Formule du gain en tension</span>
          <div class="formula">A<sub>v</sub> = S / Ve = âˆ’ Râ‚‚ / Râ‚</div>
          <div class="formula-explain">
            <strong>DÃ©monstration (rÃ¨gle du nÅ“ud virtuel) :</strong><br>
            En rÃ©gime linÃ©aire : Îµ = 0 â†’ eâ» = eâº = 0 V (masse virtuelle)<br>
            Courant dans Râ‚ : iâ‚ = Ve / Râ‚<br>
            Courant dans Râ‚‚ : iâ‚‚ = âˆ’S / Râ‚‚ (car eâ» = 0)<br>
            Loi des nÅ“uds en eâ» (I_entrÃ©e AOP = 0) : iâ‚ = iâ‚‚ â†’ Ve/Râ‚ = âˆ’S/Râ‚‚<br>
            Donc : <strong>S = âˆ’(Râ‚‚/Râ‚) Ã— Ve</strong>
          </div>
        </div>

        <div class="tip">
          <div class="tip-icon">ğŸ’¡</div>
          <div class="tip-text"><strong>Masse virtuelle :</strong> Le point eâ» est Ã  0 V (masse virtuelle) car eâº = 0 et Îµ = 0. Aucun courant ne rentre dans l'AOP, donc tout le courant de Râ‚ passe dans Râ‚‚. C'est la clÃ© de tous les calculs d'inverseur.</div>
        </div>

        <div class="example-box">
          <span class="example-label">Exemple chiffrÃ©</span>
          <p style="color:var(--text2);font-size:.9rem;margin-bottom:.8rem">Râ‚ = 10 kÎ©, Râ‚‚ = 47 kÎ©, Ve = 0,5 V</p>
          <div class="formula" style="font-size:.95rem">
            Av = âˆ’47/10 = <span style="color:#ff5e3a">âˆ’4,7</span><br>
            S = âˆ’4,7 Ã— 0,5 = <span style="color:#ff5e3a">âˆ’2,35 V</span><br>
            |Av|<sub>dB</sub> = 20 log(4,7) â‰ˆ <span style="color:#3af4c8">13,4 dB</span>
          </div>
        </div>

        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">ğŸ“ Exercice rÃ©solu â€” Trouver Râ‚‚ pour un gain de âˆ’20</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p><strong>Ã‰noncÃ© :</strong> On veut Av = âˆ’20. Râ‚ = 2,2 kÎ©. Trouver Râ‚‚. VÃ©rifier que Ve = 1 V donne S = âˆ’20 V avec Vcc = Â±15 V.</p>
            <p style="margin-top:.8rem"><strong>Solution :</strong></p>
            <p>|Av| = Râ‚‚/Râ‚ â†’ Râ‚‚ = 20 Ã— 2200 = <strong>44 000 Î© â†’ on choisit 47 kÎ©</strong> (valeur normalisÃ©e E24)</p>
            <p>Gain rÃ©el = âˆ’47/2,2 = âˆ’21,4 (lÃ©gÃ¨rement diffÃ©rent, acceptable en pratique)</p>
            <p>S = âˆ’21,4 Ã— 1 = âˆ’21,4 V â†’ <span style="color:var(--accent2)">SATURATION !</span> Car |S| > Vccâˆ’2V = 13 V</p>
            <p>â†’ Il faut rÃ©duire Ve ou Vcc. Avec Ve = 0,5 V : S = âˆ’10,7 V âœ“ (dans la plage de sortie)</p>
          </div>
        </div>
      </div>

      <!-- â”€â”€ 2. NON-INVERSEUR â”€â”€ -->
      <div class="content-block" id="aop2-noninv">
        <div class="section-tag" style="color:var(--accent3)">2 â€” Amplification sans inversion</div>
        <h2 class="block-title">Montage Non-Inverseur</h2>
        <p class="block-text">L'entrÃ©e est appliquÃ©e sur eâº (entrÃ©e non-inverseuse). Le signal de sortie est <strong>en phase</strong> avec l'entrÃ©e. Gain toujours â‰¥ 1.</p>

        <div class="diagram-container">
          <span class="diagram-label">SchÃ©ma â€” Montage Non-Inverseur</span>
          <svg viewBox="0 0 500 220" class="diagram" xmlns="http://www.w3.org/2000/svg">
            <!-- EntrÃ©e sur e+ -->
            <line x1="30" y1="85" x2="230" y2="85" stroke="#8888aa" stroke-width="1.5"/>
            <text x="30" y="78" fill="#3af4c8" font-size="11" font-family="Space Mono">Ve</text>
            <!-- AOP -->
            <polygon points="230,70 230,160 330,115" fill="none" stroke="#3af4c8" stroke-width="2"/>
            <text x="238" y="118" fill="#ff5e3a" font-size="13" font-family="Space Mono">âˆ’</text>
            <text x="238" y="93" fill="#3af4c8" font-size="13" font-family="Space Mono">+</text>
            <!-- Sortie -->
            <line x1="330" y1="115" x2="430" y2="115" stroke="#8888aa" stroke-width="1.5"/>
            <text x="434" y="119" fill="#e8f428" font-size="12" font-family="Space Mono">S</text>
            <!-- Pont R1/R2 entre sortie et e- -->
            <line x1="380" y1="115" x2="380" y2="175" stroke="#8888aa" stroke-width="1.5"/>
            <rect x="350" y="175" width="60" height="22" rx="4" fill="none" stroke="#ff5e3a" stroke-width="1.5"/>
            <text x="380" y="172" fill="#ff5e3a" font-size="11" text-anchor="middle" font-family="Space Mono">Râ‚‚</text>
            <line x1="380" y1="197" x2="380" y2="215" stroke="#8888aa" stroke-width="1.5"/>
            <rect x="350" y="215" width="60" height="22" rx="4" fill="none" stroke="#e8f428" stroke-width="1.5"/>
            <text x="380" y="213" fill="#e8f428" font-size="11" text-anchor="middle" font-family="Space Mono">Râ‚</text>
            <!-- Masse -->
            <line x1="380" y1="237" x2="380" y2="248" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="364" y1="248" x2="396" y2="248" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="369" y1="253" x2="391" y2="253" stroke="#8888aa" stroke-width="1"/>
            <line x1="374" y1="258" x2="386" y2="258" stroke="#8888aa" stroke-width=".7"/>
            <!-- Liaison nÅ“ud â†’ e- -->
            <line x1="380" y1="197" x2="200" y2="197" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="200" y1="197" x2="200" y2="130" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="200" y1="130" x2="230" y2="130" stroke="#8888aa" stroke-width="1.5"/>
            <circle cx="380" cy="197" r="3" fill="#e8f428"/>
          </svg>
        </div>

        <div class="formula-box">
          <span class="formula-label">Formule du gain en tension</span>
          <div class="formula">A<sub>v</sub> = 1 + Râ‚‚ / Râ‚</div>
          <div class="formula-explain">
            DÃ©monstration : Îµ = 0 â†’ eâ» = Ve<br>
            Diviseur de tension en eâ» : eâ» = S Ã— Râ‚/(Râ‚+Râ‚‚)<br>
            Donc Ve = S Ã— Râ‚/(Râ‚+Râ‚‚) â†’ <strong>S = Ve Ã— (1 + Râ‚‚/Râ‚)</strong><br>
            <span style="color:var(--accent3)">Le gain est toujours â‰¥ 1, jamais nÃ©gatif.</span>
          </div>
        </div>

        <div class="alert">
          <div class="alert-icon">âš ï¸</div>
          <div class="alert-text"><strong>DiffÃ©rence clÃ© inverseur vs non-inverseur :</strong> L'inverseur prÃ©sente une impÃ©dance d'entrÃ©e = Râ‚ (peut charger la source). Le non-inverseur prÃ©sente Rin â†’ âˆ (n'affecte jamais la source). Pour mesurer un signal sans le perturber, prÃ©fÃ©rer le non-inverseur ou le suiveur.</div>
        </div>

        <div class="example-box">
          <span class="example-label">Exemple chiffrÃ©</span>
          <p style="color:var(--text2);font-size:.9rem;margin-bottom:.8rem">Râ‚ = 10 kÎ©, Râ‚‚ = 90 kÎ© â†’ Av = 1 + 90/10 = <strong style="color:var(--accent3)">10</strong> (gain Ã—10, en phase)</p>
          <p style="color:var(--text2);font-size:.9rem">Râ‚ = âˆ (circuit ouvert), Râ‚‚ = 0 â†’ Av = <strong style="color:var(--accent3)">1</strong> (suiveur)</p>
        </div>
      </div>

      <!-- â”€â”€ 3. SUIVEUR â”€â”€ -->
      <div class="content-block" id="aop2-suiveur">
        <div class="section-tag" style="color:var(--accent3)">3 â€” Adaptateur d'impÃ©dance</div>
        <h2 class="block-title">Montage Suiveur (Buffer)</h2>
        <p class="block-text">Cas particulier du non-inverseur avec Râ‚ = âˆ et Râ‚‚ = 0 : la sortie est directement rebouclÃ©e sur l'entrÃ©e inverseuse. Gain = 1 exactement, mais rÃ´le crucial d'<strong>adaptation d'impÃ©dance</strong>.</p>

        <div class="formula-box">
          <span class="formula-label">CaractÃ©ristiques du suiveur</span>
          <div class="formula">
            A<sub>v</sub> = 1 &nbsp;â†’&nbsp; S = Ve<br>
            R<sub>in</sub> â†’ âˆ &nbsp;|&nbsp; R<sub>out</sub> â‰ˆ 0
          </div>
          <div class="formula-explain">
            Le suiveur ne fait pas de gain en tension, mais il isole la source de la charge. Un capteur Ã  haute impÃ©dance (R_source Ã©levÃ©e) peut piloter une charge Ã  faible impÃ©dance sans perte de signal. C'est un <strong>convertisseur d'impÃ©dance parfait</strong>.
          </div>
        </div>

        <div class="tip">
          <div class="tip-icon">ğŸ’¡</div>
          <div class="tip-text"><strong>Cas d'usage typique :</strong> Un microphone piÃ©zoÃ©lectrique a R_source = 1 MÎ©. Si branchÃ© directement sur une charge de 1 kÎ©, il perd 99,9% du signal (diviseur de tension). Avec un suiveur AOP entre les deux â†’ signal intÃ©gral transmis, quelle que soit la charge.</div>
        </div>

        <div class="example-box">
          <span class="example-label">Exercice rÃ©solu â€” Gain en charge</span>
          <p style="color:var(--text2);font-size:.9rem;margin-bottom:.75rem">Source : Ve = 5 V, R_source = 100 kÎ©. Charge : R_L = 1 kÎ©.</p>
          <div class="formula" style="font-size:.85rem">
            Sans suiveur : V_charge = 5 Ã— 1k/(100k+1k) = <span style="color:var(--accent2)">0,049 V</span> (perte 99%)<br>
            Avec suiveur : V_charge = S = Ve = <span style="color:var(--accent3)">5 V</span> âœ“ (aucune perte)
          </div>
        </div>
      </div>

      <!-- â”€â”€ 4. SOMMATEUR â”€â”€ -->
      <div class="content-block" id="aop2-sommateur">
        <div class="section-tag" style="color:var(--accent3)">4 â€” Combinaison de signaux</div>
        <h2 class="block-title">Montage Sommateur Inverseur</h2>
        <p class="block-text">Extension de l'inverseur Ã  plusieurs entrÃ©es. Chaque entrÃ©e est pondÃ©rÃ©e par son propre gain, et les contributions s'additionnent grÃ¢ce Ã  la masse virtuelle en eâ».</p>

        <div class="formula-box">
          <span class="formula-label">Formule gÃ©nÃ©rale (n entrÃ©es)</span>
          <div class="formula">S = âˆ’ R<sub>f</sub> Ã— (Veâ‚/Râ‚ + Veâ‚‚/Râ‚‚ + Veâ‚ƒ/Râ‚ƒ + â€¦)</div>
          <div class="formula-explain">
            GrÃ¢ce Ã  la masse virtuelle (eâ» = 0 V), les courants iâ‚ = Veâ‚/Râ‚, iâ‚‚ = Veâ‚‚/Râ‚‚â€¦ ne s'influencent pas mutuellement.<br>
            Loi des nÅ“uds : i_f = iâ‚ + iâ‚‚ + â€¦ â†’ S = âˆ’Rf Ã— (iâ‚ + iâ‚‚ + â€¦)<br>
            <strong>Cas particulier Rf = Râ‚ = Râ‚‚ = â€¦ = R :</strong> S = âˆ’(Veâ‚ + Veâ‚‚ + â€¦)
          </div>
        </div>

        <div class="example-box">
          <span class="example-label">Application â€” Convertisseur numÃ©rique-analogique (CNA)</span>
          <p style="color:var(--text2);font-size:.9rem;margin-bottom:.75rem">3 bits : Veâ‚ (bit 2Â²), Veâ‚‚ (bit 2Â¹), Veâ‚ƒ (bit 2â°). Râ‚ = 20kÎ©, Râ‚‚ = 40kÎ©, Râ‚ƒ = 80kÎ©, Rf = 80kÎ©</p>
          <div class="formula" style="font-size:.85rem">
            S = âˆ’80k Ã— (Veâ‚/20k + Veâ‚‚/40k + Veâ‚ƒ/80k)<br>
            S = âˆ’(4Â·Veâ‚ + 2Â·Veâ‚‚ + Veâ‚ƒ)<br>
            Si (Veâ‚,Veâ‚‚,Veâ‚ƒ) = (1V,0,1V) â†’ mot binaire 101 = 5<br>
            S = âˆ’(4 + 0 + 1) = <span style="color:var(--accent3)">âˆ’5 V</span> âœ“
          </div>
        </div>

        <div class="tip">
          <div class="tip-icon">ğŸ’¡</div>
          <div class="tip-text"><strong>Sommateur non-inverseur :</strong> En plaÃ§ant les rÃ©sistances sur eâº avec un pont de contre-rÃ©action sur eâ», on obtient un sommateur non-inverseur. Plus complexe, moins courant en pratique.</div>
        </div>
      </div>

      <!-- â”€â”€ 5. SOUSTRACTEUR â”€â”€ -->
      <div class="content-block" id="aop2-soustracteur">
        <div class="section-tag" style="color:var(--accent3)">5 â€” Amplificateur diffÃ©rentiel</div>
        <h2 class="block-title">Montage Soustracteur</h2>
        <p class="block-text">Combine les deux entrÃ©es de l'AOP pour rÃ©aliser <strong>S = kÂ·(Veâ‚‚ âˆ’ Veâ‚)</strong>. Indispensable pour mesurer des diffÃ©rences (capteurs en pont de Wheatstone, lignes balancÃ©esâ€¦).</p>

        <div class="formula-box">
          <span class="formula-label">Formule â€” Soustracteur symÃ©trique (Râ‚ = Râ‚‚ = Râ‚ƒ = Râ‚„ = R)</span>
          <div class="formula">S = Veâ‚‚ âˆ’ Veâ‚</div>
          <div class="formula-explain">
            Cas gÃ©nÃ©ral avec Râ‚ƒ/Râ‚ = Râ‚„/Râ‚‚ :<br>
            S = (Râ‚„/Râ‚ƒ) Ã— (1 + Râ‚‚/Râ‚) / (1 + Râ‚„/Râ‚ƒ) Ã— Veâ‚‚ âˆ’ (Râ‚‚/Râ‚) Ã— Veâ‚<br>
            Si Râ‚=Râ‚‚=Râ‚ƒ=Râ‚„ : <strong>S = Veâ‚‚ âˆ’ Veâ‚</strong><br>
            Si Râ‚ƒ=Râ‚ et Râ‚„=Râ‚‚ : <strong>S = (Râ‚‚/Râ‚) Ã— (Veâ‚‚ âˆ’ Veâ‚)</strong>
          </div>
        </div>

        <div class="alert">
          <div class="alert-icon">âš ï¸</div>
          <div class="alert-text"><strong>RÃ©sistances bien appairÃ©es :</strong> La qualitÃ© du soustracteur (taux de rÃ©jection du mode commun, CMRR) dÃ©pend de la prÃ©cision des rÃ©sistances. Des rÃ©sistances Ã  1% ou 0,1% sont nÃ©cessaires pour un bon CMRR en pratique.</div>
        </div>

        <div class="example-box">
          <span class="example-label">Application â€” Capteur en pont</span>
          <p style="color:var(--text2);font-size:.9rem;margin-bottom:.75rem">Un thermocouple produit Veâ‚‚ = 5,023 V et Veâ‚ = 5,000 V (rÃ©fÃ©rence). La diffÃ©rence utile est 23 mV.</p>
          <div class="formula" style="font-size:.85rem">
            Avec Râ‚=Râ‚ƒ=10kÎ©, Râ‚‚=Râ‚„=470kÎ© :<br>
            Av = Râ‚‚/Râ‚ = 47<br>
            S = 47 Ã— (5,023 âˆ’ 5,000) = 47 Ã— 0,023 = <span style="color:var(--accent3)">1,08 V</span>
          </div>
        </div>
      </div>

      <!-- â”€â”€ 6. INTÃ‰GRATEUR â”€â”€ -->
      <div class="content-block" id="aop2-integrateur">
        <div class="section-tag" style="color:var(--accent3)">6 â€” Traitement temporel</div>
        <h2 class="block-title">Montage IntÃ©grateur</h2>
        <p class="block-text">Remplace Râ‚‚ par un condensateur C. RÃ©alise l'<strong>intÃ©gration temporelle</strong> du signal d'entrÃ©e. En frÃ©quentiel : fonction de transfert en 1/jÏ‰ (filtre passe-bas du 1er ordre).</p>

        <div class="diagram-container">
          <span class="diagram-label">SchÃ©ma â€” Montage IntÃ©grateur</span>
          <svg viewBox="0 0 500 200" class="diagram" xmlns="http://www.w3.org/2000/svg">
            <line x1="30" y1="110" x2="110" y2="110" stroke="#8888aa" stroke-width="1.5"/>
            <rect x="110" y="98" width="60" height="24" rx="4" fill="none" stroke="#e8f428" stroke-width="1.5"/>
            <text x="140" y="92" fill="#e8f428" font-size="11" text-anchor="middle" font-family="Space Mono">Râ‚</text>
            <line x1="170" y1="110" x2="230" y2="110" stroke="#8888aa" stroke-width="1.5"/>
            <polygon points="230,70 230,160 330,115" fill="none" stroke="#3af4c8" stroke-width="2"/>
            <text x="238" y="118" fill="#ff5e3a" font-size="13" font-family="Space Mono">âˆ’</text>
            <text x="238" y="90" fill="#3af4c8" font-size="13" font-family="Space Mono">+</text>
            <line x1="240" y1="82" x2="240" y2="66" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="224" y1="66" x2="256" y2="66" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="229" y1="61" x2="251" y2="61" stroke="#8888aa" stroke-width="1"/>
            <line x1="234" y1="56" x2="246" y2="56" stroke="#8888aa" stroke-width=".7"/>
            <line x1="330" y1="115" x2="420" y2="115" stroke="#8888aa" stroke-width="1.5"/>
            <text x="428" y="119" fill="#e8f428" font-size="12" font-family="Space Mono">S</text>
            <!-- Condensateur C en contre-rÃ©action -->
            <line x1="200" y1="110" x2="200" y2="45" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="200" y1="45" x2="285" y2="45" stroke="#8888aa" stroke-width="1.5"/>
            <!-- Condo symbol -->
            <line x1="285" y1="38" x2="285" y2="52" stroke="#ff5e3a" stroke-width="2.5"/>
            <line x1="295" y1="38" x2="295" y2="52" stroke="#ff5e3a" stroke-width="2.5"/>
            <line x1="295" y1="45" x2="370" y2="45" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="370" y1="45" x2="370" y2="115" stroke="#8888aa" stroke-width="1.5"/>
            <text x="282" y="32" fill="#ff5e3a" font-size="11" font-family="Space Mono">C</text>
            <text x="30" y="104" fill="#3af4c8" font-size="11" font-family="Space Mono">Ve</text>
            <circle cx="200" cy="110" r="3" fill="#e8f428"/>
          </svg>
        </div>

        <div class="formula-box">
          <span class="formula-label">Formules â€” IntÃ©grateur idÃ©al</span>
          <div class="formula">
            Domaine temporel : S(t) = âˆ’1/(Râ‚C) Ã— âˆ«Ve(t) dt<br>
            Domaine frÃ©quentiel : H(jÏ‰) = âˆ’1/(jÏ‰Râ‚C)<br>
            FrÃ©quence de coupure : f<sub>c</sub> = 1/(2Ï€Râ‚C)
          </div>
          <div class="formula-explain">
            Le gain |H| = 1/(Ï‰Râ‚C) â†’ dÃ©croÃ®t de <strong>âˆ’20 dB/dÃ©cade</strong> (filtre passe-bas du 1er ordre).<br>
            Ã€ f = fc : |H| = 1 (gain unitaire). Pour f &lt; fc, le gain est supÃ©rieur Ã  1.
          </div>
        </div>

        <div class="alert">
          <div class="alert-icon">âš ï¸</div>
          <div class="alert-text"><strong>ProblÃ¨me de dÃ©rive en continu :</strong> En pratique, une lÃ©gÃ¨re tension de dÃ©calage (offset) ou un courant de polarisation est intÃ©grÃ© sans fin â†’ saturation lente. Solution : ajouter une rÃ©sistance R_f en parallÃ¨le avec C (filtre passe-bas rÃ©el) pour limiter le gain en DC.</div>
        </div>

        <div class="example-box">
          <span class="example-label">Exemple â€” IntÃ©grateur d'un crÃ©neau</span>
          <p style="color:var(--text2);font-size:.9rem;margin-bottom:.75rem">Râ‚ = 10 kÎ©, C = 100 nF. Ve = signal carrÃ© Â±1 V, f = 1 kHz.</p>
          <div class="formula" style="font-size:.85rem">
            Ï„ = Râ‚C = 10k Ã— 100n = <span style="color:var(--accent3)">1 ms</span><br>
            f_c = 1/(2Ï€ Ã— 1ms) â‰ˆ <span style="color:var(--accent3)">159 Hz</span><br>
            Ã€ 1 kHz : |H| = fc/f = 159/1000 = <span style="color:var(--accent3)">0,159</span><br>
            â†’ Le crÃ©neau est intÃ©grÃ© en signal triangulaire d'amplitude 0,159 V
          </div>
        </div>
      </div>

      <!-- â”€â”€ 7. DÃ‰RIVATEUR â”€â”€ -->
      <div class="content-block" id="aop2-derivateur">
        <div class="section-tag" style="color:var(--accent3)">7 â€” Traitement temporel</div>
        <h2 class="block-title">Montage DÃ©rivateur</h2>
        <p class="block-text">L'intÃ©grateur inversÃ© : condensateur sur l'entrÃ©e, rÃ©sistance en contre-rÃ©action. RÃ©alise la <strong>dÃ©rivation temporelle</strong>. Gain proportionnel Ã  la frÃ©quence (filtre passe-haut).</p>

        <div class="formula-box">
          <span class="formula-label">Formules â€” DÃ©rivateur idÃ©al</span>
          <div class="formula">
            Domaine temporel : S(t) = âˆ’R<sub>f</sub>C Ã— dVe/dt<br>
            Domaine frÃ©quentiel : H(jÏ‰) = âˆ’jÏ‰R<sub>f</sub>C<br>
            FrÃ©quence de coupure : f<sub>c</sub> = 1/(2Ï€R<sub>f</sub>C)
          </div>
          <div class="formula-explain">
            Le gain |H| = Ï‰RfC â†’ croÃ®t de <strong>+20 dB/dÃ©cade</strong> (filtre passe-haut du 1er ordre).<br>
            Ã€ haute frÃ©quence, le bruit est amplifiÃ© : le dÃ©rivateur est trÃ¨s sensible au bruit. On ajoute toujours Râ‚ en sÃ©rie avec C pour limiter le gain en HF.
          </div>
        </div>

        <div class="alert">
          <div class="alert-icon">âš ï¸</div>
          <div class="alert-text"><strong>InstabilitÃ© en pratique :</strong> Le dÃ©rivateur pur est instable (oscillations) car son gain croÃ®t indÃ©finiment avec f. Solution : ajouter Râ‚ en sÃ©rie avec C â†’ gain limitÃ© Ã  Rf/Râ‚ en haute frÃ©quence. Le dÃ©rivateur devient un filtre passe-bande.</div>
        </div>

        <div class="example-box">
          <span class="example-label">Exemple â€” DÃ©rivateur d'un signal triangulaire</span>
          <p style="color:var(--text2);font-size:.9rem;margin-bottom:.75rem">Rf = 10 kÎ©, C = 10 nF. Ve = triangulaire Â±1 V, f = 1 kHz (pente = Î”V/Î”t = 4Ã—1VÃ—1kHz = 4000 V/s)</p>
          <div class="formula" style="font-size:.85rem">
            Ï„ = RfC = 10k Ã— 10n = <span style="color:var(--accent3)">100 Âµs</span><br>
            S(t) = âˆ’Ï„ Ã— dVe/dt = âˆ’100Âµs Ã— 4000 = <span style="color:var(--accent3)">âˆ’0,4 V</span> (pendant la montÃ©e)<br>
            â†’ Signal triangulaire â†’ crÃ©neau de Â±0,4 V Ã  la sortie
          </div>
        </div>

        <div class="tip">
          <div class="tip-icon">ğŸ’¡</div>
          <div class="tip-text"><strong>IntÃ©grateur vs DÃ©rivateur en frÃ©quentiel :</strong> IntÃ©grateur : H âˆ 1/jÏ‰ â†’ passe-bas, pente âˆ’20 dB/dec. DÃ©rivateur : H âˆ jÏ‰ â†’ passe-haut, pente +20 dB/dec. Ce sont des opÃ©rations mathÃ©matiques duales.</div>
        </div>
      </div>

      <!-- â”€â”€ 8. FILTRES ACTIFS â”€â”€ -->
      <div class="content-block" id="aop2-filtres">
        <div class="section-tag" style="color:var(--accent3)">8 â€” Filtrage actif</div>
        <h2 class="block-title">Filtres Actifs du 1er et 2nd Ordre</h2>
        <p class="block-text">Les filtres actifs combinent AOP et rÃ©seaux RC pour sÃ©lectionner des plages de frÃ©quence avec gain contrÃ´lable. Ils Ã©vitent les attÃ©nuations des filtres passifs et peuvent amplifier le signal filtrÃ©.</p>

        <table class="vtable">
          <tr><th>Type</th><th>Montage</th><th>H(jÏ‰)</th><th>Pente</th><th>Usage</th></tr>
          <tr>
            <td class="accent">Passe-bas 1er</td>
            <td class="mono">Inverseur + C // Rf</td>
            <td class="mono">âˆ’Rf/Râ‚ Ã— 1/(1+jÏ‰RfC)</td>
            <td>âˆ’20 dB/dec</td>
            <td>Anti-repliement, lissage</td>
          </tr>
          <tr>
            <td class="accent">Passe-haut 1er</td>
            <td class="mono">Inverseur + C sÃ©rie Râ‚</td>
            <td class="mono">âˆ’Rf/Râ‚ Ã— jÏ‰Râ‚C/(1+jÏ‰Râ‚C)</td>
            <td>+20 dB/dec</td>
            <td>Ã‰limination DC, AC coupling</td>
          </tr>
          <tr>
            <td class="accent">Passe-bande</td>
            <td class="mono">PH + PB en cascade</td>
            <td class="mono">Gain Ã— jÏ‰Ï„/(1+jÏ‰Ï„)Â²</td>
            <td>Â±20 dB/dec</td>
            <td>Ã‰galiseurs, dÃ©tection frÃ©quence</td>
          </tr>
          <tr>
            <td class="accent">Passe-bas 2nd (Sallen-Key)</td>
            <td class="mono">Non-inv + 2 RC</td>
            <td class="mono">1/(1+jÏ‰Ï„)Â² avec Q</td>
            <td>âˆ’40 dB/dec</td>
            <td>Coupure nette, audio</td>
          </tr>
        </table>

        <div class="formula-box">
          <span class="formula-label">Filtre passe-bas actif du 1er ordre (le plus courant)</span>
          <div class="formula">
            H(jÏ‰) = âˆ’G<sub>0</sub> / (1 + jÏ‰/Ï‰<sub>c</sub>)<br>
            Gâ‚€ = Rf/Râ‚ &nbsp;|&nbsp; f<sub>c</sub> = 1/(2Ï€R<sub>f</sub>C)
          </div>
          <div class="formula-explain">
            Gain en DC (Ï‰=0) : |H(0)| = Gâ‚€ = Rf/Râ‚<br>
            Ã€ f = fc : |H| = Gâ‚€/âˆš2 (âˆ’3 dB)<br>
            Pour f >> fc : |H| dÃ©croÃ®t Ã  âˆ’20 dB/dÃ©cade
          </div>
        </div>

        <div class="example-box">
          <span class="example-label">Exercice rÃ©solu â€” Filtre anti-bruit audio</span>
          <p style="color:var(--text2);font-size:.9rem;margin-bottom:.75rem">SpÃ©c : gain Gâ‚€ = 10, frÃ©quence de coupure fc = 20 kHz (limite audible)</p>
          <div class="formula" style="font-size:.85rem">
            Gain : Rf/Râ‚ = 10 â†’ choisir Râ‚ = 10 kÎ©, Rf = 100 kÎ©<br>
            Coupure : fc = 1/(2Ï€RfC) â†’ C = 1/(2Ï€ Ã— 100k Ã— 20k) = <span style="color:var(--accent3)">79,6 pF â‰ˆ 82 pF</span><br>
            VÃ©rif : fc = 1/(2Ï€ Ã— 100k Ã— 82p) = <span style="color:var(--accent3)">19,4 kHz</span> âœ“
          </div>
        </div>
      </div>

      <!-- â”€â”€ CALCULATEUR INTERACTIF â”€â”€ -->
      <div class="content-block" id="aop2-calc">
        <div class="section-tag" style="color:var(--accent3)">ğŸ”¢ Outil interactif</div>
        <h2 class="block-title">Calculateur de Montages AOP LinÃ©aires</h2>

        <div class="calc-box">
          <div class="calc-title">âš¡ Calculateur <span>AOP-02</span></div>

          <div style="margin-bottom:1.2rem">
            <label style="font-size:.8rem;color:var(--text2);font-family:'Space Mono',monospace;display:block;margin-bottom:.5rem">TYPE DE MONTAGE</label>
            <select id="aop2-type" onchange="calcAOP2()" style="background:var(--bg2);border:1px solid var(--border);color:var(--text);padding:.6rem .8rem;border-radius:6px;font-family:'Space Mono',monospace;font-size:.85rem;width:100%;outline:none">
              <option value="inv">Inverseur</option>
              <option value="noninv">Non-inverseur</option>
              <option value="suiveur">Suiveur (buffer)</option>
              <option value="integ">IntÃ©grateur (frÃ©quenciel)</option>
              <option value="filtre">Filtre passe-bas actif</option>
            </select>
          </div>

          <div class="calc-grid" id="aop2-inputs">
            <div class="calc-field">
              <label class="calc-label">Râ‚ (kÎ©)</label>
              <input type="number" class="calc-input" id="aop2-r1" value="10" oninput="calcAOP2()">
            </div>
            <div class="calc-field">
              <label class="calc-label">Râ‚‚ ou Rf (kÎ©)</label>
              <input type="number" class="calc-input" id="aop2-r2" value="47" oninput="calcAOP2()">
            </div>
            <div class="calc-field">
              <label class="calc-label">Ve (V)</label>
              <input type="number" class="calc-input" id="aop2-ve" value="1" step="0.1" oninput="calcAOP2()">
            </div>
            <div class="calc-field">
              <label class="calc-label">C (nF) â€” si filtre</label>
              <input type="number" class="calc-input" id="aop2-c" value="100" oninput="calcAOP2()">
            </div>
          </div>
          <button class="calc-btn" onclick="calcAOP2()">Calculer â†’</button>
          <div class="calc-result" id="aop2-result"></div>
        </div>
      </div>

      <!-- â”€â”€ QCM AOP-02 â”€â”€ -->
      <div class="content-block" id="aop2-qcm">
        <div class="section-tag" style="color:var(--accent3)">ğŸ“‹ Test de connaissance</div>
        <h2 class="block-title">QCM â€” Montages LinÃ©aires</h2>
        <div id="qcm-aop_lineaire"></div>
      </div>

    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- MODULE AOP-03 â€” OSCILLATEURS & COMPARATEURS -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="lesson-aop-oscillateurs" class="section">
  <button class="back-btn" onclick="showSection('modules-aop')">â† Retour aux modules AOP</button>
  <div class="lesson-layout">
    <aside class="lesson-sidebar">
      <div class="sidebar-title">MODULE AOP-03</div>
      <ul class="sidebar-items">
        <li class="sidebar-item active" onclick="scrollTo(0,0)">1. Comparateur simple</li>
        <li class="sidebar-item" onclick="scrollToId('aop3-schmitt')">2. Trigger de Schmitt</li>
        <li class="sidebar-item" onclick="scrollToId('aop3-astable')">3. Astable / relaxation</li>
        <li class="sidebar-item" onclick="scrollToId('aop3-wien')">4. Oscillateur de Wien</li>
        <li class="sidebar-item" onclick="scrollToId('aop3-barkhausen')">5. CritÃ¨re de Barkhausen</li>
        <li class="sidebar-item" onclick="scrollToId('aop3-calc')">ğŸ”¢ Calculateur</li>
        <li class="sidebar-item" onclick="scrollToId('aop3-qcm')">ğŸ“‹ QCM</li>
      </ul>
    </aside>
    <div class="lesson-content">

      <!-- â”€â”€ 1. COMPARATEUR SIMPLE â”€â”€ -->
      <div class="content-block">
        <div class="section-tag" style="color:var(--accent3)">1 â€” RÃ©gime non-linÃ©aire</div>
        <h2 class="block-title">Comparateur Simple</h2>
        <p class="block-text">L'AOP <strong>sans contre-rÃ©action</strong> (ou avec CR positive) fonctionne en rÃ©gime non-linÃ©aire. Son gain immense A â†’ âˆ fait basculer la sortie immÃ©diatement Ã  +Vsat ou âˆ’Vsat selon le signe de Îµ.</p>

        <div class="formula-box">
          <span class="formula-label">Loi de fonctionnement du comparateur</span>
          <div class="formula">
            Si Ve &gt; V<sub>ref</sub> : S = +V<sub>sat</sub> â‰ˆ +V<sub>cc</sub> âˆ’ 1 V<br>
            Si Ve &lt; V<sub>ref</sub> : S = âˆ’V<sub>sat</sub> â‰ˆ âˆ’V<sub>cc</sub> + 1 V
          </div>
          <div class="formula-explain">
            Vref est la tension de rÃ©fÃ©rence sur eâº (ou eâ»). Typiquement Vsat â‰ˆ Vcc âˆ’ 1 Ã  1,5 V pour un AOP standard (LM741, TL071â€¦). Les comparateurs dÃ©diÃ©s (LM339) ont une sortie collecteur ouvert pouvant atteindre 0/Vcc.
          </div>
        </div>

        <div class="diagram-container">
          <span class="diagram-label">CaractÃ©ristique de transfert â€” Comparateur</span>
          <svg viewBox="0 0 400 220" class="diagram" xmlns="http://www.w3.org/2000/svg">
            <!-- Axes -->
            <line x1="200" y1="20" x2="200" y2="200" stroke="#3a3a5a" stroke-width="2"/>
            <line x1="30" y1="110" x2="380" y2="110" stroke="#3a3a5a" stroke-width="2"/>
            <text x="370" y="106" fill="#8888aa" font-size="11" font-family="Space Mono">Ve</text>
            <text x="205" y="18" fill="#8888aa" font-size="11" font-family="Space Mono">S</text>
            <!-- Vref marker -->
            <line x1="200" y1="105" x2="200" y2="115" stroke="#e8f428" stroke-width="1.5"/>
            <text x="196" y="128" fill="#e8f428" font-size="10" font-family="Space Mono" text-anchor="middle">Vref</text>
            <!-- +Vsat line -->
            <line x1="30" y1="40" x2="200" y2="40" stroke="#2a2a3a" stroke-width="1" stroke-dasharray="4,4"/>
            <text x="35" y="35" fill="#8888aa" font-size="10" font-family="Space Mono">+Vsat</text>
            <!-- -Vsat line -->
            <line x1="200" y1="180" x2="380" y2="180" stroke="#2a2a3a" stroke-width="1" stroke-dasharray="4,4"/>
            <text x="305" y="195" fill="#8888aa" font-size="10" font-family="Space Mono">âˆ’Vsat</text>
            <!-- CaractÃ©ristique -->
            <polyline points="30,180 200,180 200,40 380,40" fill="none" stroke="#3af4c8" stroke-width="3"/>
            <!-- Transition verticale -->
            <line x1="200" y1="40" x2="200" y2="180" stroke="#3af4c8" stroke-width="3"/>
            <!-- Label -->
            <text x="280" y="55" fill="#3af4c8" font-size="11" font-family="Space Mono">S=+Vsat</text>
            <text x="50" y="170" fill="#3af4c8" font-size="11" font-family="Space Mono">S=âˆ’Vsat</text>
          </svg>
        </div>

        <div class="example-box">
          <span class="example-label">Application â€” DÃ©tecteur de passage par zÃ©ro</span>
          <p style="color:var(--text2);font-size:.9rem;margin-bottom:.75rem">Vref = 0 V (eâº Ã  la masse). Ve = signal sinusoÃ¯dal. S bascule entre +Vsat et âˆ’Vsat Ã  chaque passage par zÃ©ro â†’ signal carrÃ© de mÃªme frÃ©quence.</p>
          <p style="color:var(--text2);font-size:.9rem">UtilisÃ© pour : mesure de frÃ©quence, synchronisation de phase, conversion sinus â†’ carrÃ©.</p>
        </div>

        <div class="tip">
          <div class="tip-icon">ğŸ’¡</div>
          <div class="tip-text"><strong>ProblÃ¨me du comparateur simple :</strong> Si Ve est bruitÃ© autour de Vref, la sortie commute de faÃ§on anarchique (claquements multiples). Solution : ajouter une hystÃ©rÃ©sis â†’ Trigger de Schmitt.</div>
        </div>
      </div>

      <!-- â”€â”€ 2. TRIGGER DE SCHMITT â”€â”€ -->
      <div class="content-block" id="aop3-schmitt">
        <div class="section-tag" style="color:var(--accent3)">2 â€” HystÃ©rÃ©sis & robustesse</div>
        <h2 class="block-title">Trigger de Schmitt (Comparateur Ã  HystÃ©rÃ©sis)</h2>
        <p class="block-text">CR positive sur eâº : la tension de rÃ©fÃ©rence change selon l'Ã©tat de sortie. Cela crÃ©e deux seuils distincts Vâº et Vâ» â€” la sortie ne commute que si Ve franchit ces seuils, rendant le systÃ¨me <strong>insensible au bruit</strong>.</p>

        <div class="diagram-container">
          <span class="diagram-label">CaractÃ©ristique avec hystÃ©rÃ©sis â€” Trigger de Schmitt</span>
          <svg viewBox="0 0 400 240" class="diagram" xmlns="http://www.w3.org/2000/svg">
            <!-- Axes -->
            <line x1="200" y1="20" x2="200" y2="215" stroke="#3a3a5a" stroke-width="1.5"/>
            <line x1="30" y1="120" x2="380" y2="120" stroke="#3a3a5a" stroke-width="1.5"/>
            <text x="370" y="116" fill="#8888aa" font-size="11" font-family="Space Mono">Ve</text>
            <text x="206" y="18" fill="#8888aa" font-size="11" font-family="Space Mono">S</text>
            <!-- Seuils -->
            <line x1="260" y1="115" x2="260" y2="125" stroke="#e8f428" stroke-width="1.5"/>
            <text x="256" y="138" fill="#e8f428" font-size="10" font-family="Space Mono" text-anchor="middle">Vâº</text>
            <line x1="140" y1="115" x2="140" y2="125" stroke="#ff5e3a" stroke-width="1.5"/>
            <text x="136" y="138" fill="#ff5e3a" font-size="10" font-family="Space Mono" text-anchor="middle">Vâ»</text>
            <!-- HystÃ©rÃ©sis annotation -->
            <line x1="140" y1="145" x2="260" y2="145" stroke="#3af4c8" stroke-width="1" stroke-dasharray="3,3"/>
            <text x="200" y="158" fill="#3af4c8" font-size="10" text-anchor="middle" font-family="Space Mono">â† Î”VH â†’</text>
            <!-- Vsat levels -->
            <line x1="30" y1="50" x2="380" y2="50" stroke="#2a2a3a" stroke-width="1" stroke-dasharray="4,4"/>
            <text x="35" y="45" fill="#8888aa" font-size="10" font-family="Space Mono">+Vsat</text>
            <line x1="30" y1="190" x2="380" y2="190" stroke="#2a2a3a" stroke-width="1" stroke-dasharray="4,4"/>
            <text x="310" y="205" fill="#8888aa" font-size="10" font-family="Space Mono">âˆ’Vsat</text>
            <!-- Courbe hystÃ©rÃ©sis (boucle) -->
            <!-- Chemin montant : de gauche Ã  V+ puis bascule -->
            <polyline points="30,190 260,190 260,50 380,50" fill="none" stroke="#e8f428" stroke-width="2.5"/>
            <!-- Chemin descendant : de droite Ã  V- puis bascule -->
            <polyline points="380,190 140,190 140,50 30,50" fill="none" stroke="#ff5e3a" stroke-width="2.5" stroke-dasharray="6,3"/>
            <!-- FlÃ¨ches direction -->
            <polygon points="310,190 296,184 296,196" fill="#e8f428"/>
            <polygon points="80,50 94,44 94,56" fill="#ff5e3a"/>
            <!-- LÃ©gende -->
            <text x="35" y="175" fill="#e8f428" font-size="9" font-family="Space Mono">Ve montant â†’</text>
            <text x="35" y="65" fill="#ff5e3a" font-size="9" font-family="Space Mono">â† Ve descendant</text>
          </svg>
        </div>

        <div class="formula-box">
          <span class="formula-label">Formules â€” Trigger de Schmitt non-inverseur (Vref = 0)</span>
          <div class="formula">
            Vâº = +V<sub>sat</sub> Ã— Râ‚/(Râ‚ + Râ‚‚) &nbsp;(seuil haut)<br>
            Vâ» = âˆ’V<sub>sat</sub> Ã— Râ‚/(Râ‚ + Râ‚‚) &nbsp;(seuil bas)<br>
            Î”V<sub>H</sub> = Vâº âˆ’ Vâ» = 2V<sub>sat</sub> Ã— Râ‚/(Râ‚ + Râ‚‚)
          </div>
          <div class="formula-explain">
            Quand S = +Vsat : eâº = Vsat Ã— Râ‚/(Râ‚+Râ‚‚) = Vâº. La sortie bascule Ã  âˆ’Vsat uniquement si Ve > Vâº.<br>
            Quand S = âˆ’Vsat : eâº = âˆ’Vsat Ã— Râ‚/(Râ‚+Râ‚‚) = Vâ». La sortie bascule Ã  +Vsat uniquement si Ve &lt; Vâ».<br>
            <strong>La largeur d'hystÃ©rÃ©sis Î”VH doit Ãªtre supÃ©rieure Ã  l'amplitude du bruit</strong>.
          </div>
        </div>

        <div class="example-box">
          <span class="example-label">Exemple â€” DÃ©tecteur de seuil robuste</span>
          <p style="color:var(--text2);font-size:.9rem;margin-bottom:.75rem">Vsat = Â±12 V, Râ‚ = 10 kÎ©, Râ‚‚ = 100 kÎ©. Bruit sur Ve â‰ˆ 500 mV crÃªte.</p>
          <div class="formula" style="font-size:.85rem">
            Vâº = 12 Ã— 10/(10+100) = <span style="color:var(--accent)">1,09 V</span><br>
            Vâ» = âˆ’12 Ã— 10/110 = <span style="color:var(--accent2)">âˆ’1,09 V</span><br>
            Î”VH = 2,18 V &gt; 500 mV bruit â†’ <span style="color:var(--accent3)">Aucune commutation intempestive âœ“</span>
          </div>
        </div>

        <div class="expand-card">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span class="expand-header-text">ğŸ“ Trigger de Schmitt inverseur â€” formules et exercice</span>
            <span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p><strong>Montage :</strong> Ve sur eâ» (inverseur), Râ‚ entre sortie et eâº, Râ‚‚ entre eâº et masse (ou Vref).</p>
            <p style="margin-top:.5rem"><strong>Formules :</strong> Vâº = Vref Ã— (1 + Râ‚/Râ‚‚) âˆ’ S Ã— Râ‚/Râ‚‚</p>
            <p>Quand S = +Vsat : Vâº = Vref + (Vref âˆ’ Vsat) Ã— Râ‚/Râ‚‚</p>
            <p style="margin-top:.5rem"><strong>Exercice :</strong> Vsat = 13 V, Vref = 0 V, Râ‚ = 47 kÎ©, Râ‚‚ = 10 kÎ©.</p>
            <p>Vâº = 0 âˆ’ 13 Ã— 47/10 = âˆ’61,1 V â†’ limitÃ© Ã  âˆ’Vsat â†’ Vâ» = 13 Ã— 47/10 â€¦ recalcul avec les bonnes bornes :</p>
            <p>Seuils : Â±Vsat Ã— Râ‚‚/(Râ‚+Râ‚‚) = Â±13 Ã— 10/57 = <strong>Â±2,28 V</strong></p>
          </div>
        </div>
      </div>

      <!-- â”€â”€ 3. ASTABLE â”€â”€ -->
      <div class="content-block" id="aop3-astable">
        <div class="section-tag" style="color:var(--accent3)">3 â€” GÃ©nÃ©ration de signaux</div>
        <h2 class="block-title">Bascule Astable (Oscillateur Ã  Relaxation)</h2>
        <p class="block-text">Combinaison d'un trigger de Schmitt et d'un condensateur qui se charge/dÃ©charge en CR nÃ©gative. Sans signal d'entrÃ©e, l'AOP <strong>oscille spontanÃ©ment</strong> â€” c'est un gÃ©nÃ©rateur de signal carrÃ©.</p>

        <div class="diagram-container">
          <span class="diagram-label">SchÃ©ma â€” Astable Ã  AOP</span>
          <svg viewBox="0 0 500 240" class="diagram" xmlns="http://www.w3.org/2000/svg">
            <!-- AOP -->
            <polygon points="200,80 200,180 300,130" fill="none" stroke="#3af4c8" stroke-width="2"/>
            <text x="208" y="133" fill="#ff5e3a" font-size="13" font-family="Space Mono">âˆ’</text>
            <text x="208" y="105" fill="#3af4c8" font-size="13" font-family="Space Mono">+</text>
            <!-- Sortie S -->
            <line x1="300" y1="130" x2="420" y2="130" stroke="#8888aa" stroke-width="1.5"/>
            <text x="424" y="134" fill="#e8f428" font-size="12" font-family="Space Mono">S</text>
            <!-- RC en contre-rÃ©action nÃ©gative (sur e-) -->
            <line x1="175" y1="145" x2="80" y2="145" stroke="#8888aa" stroke-width="1.5"/>
            <rect x="80" y="133" width="50" height="24" rx="4" fill="none" stroke="#e8f428" stroke-width="1.5"/>
            <text x="105" y="127" fill="#e8f428" font-size="11" text-anchor="middle" font-family="Space Mono">R</text>
            <line x1="130" y1="145" x2="165" y2="145" stroke="#8888aa" stroke-width="1.5"/>
            <!-- Condensateur vers masse -->
            <line x1="175" y1="125" x2="175" y2="145" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="163" y1="125" x2="187" y2="125" stroke="#ff5e3a" stroke-width="2.5"/>
            <line x1="163" y1="118" x2="187" y2="118" stroke="#ff5e3a" stroke-width="2.5"/>
            <line x1="175" y1="110" x2="175" y2="118" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="175" y1="125" x2="175" y2="155" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="159" y1="155" x2="191" y2="155" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="164" y1="160" x2="186" y2="160" stroke="#8888aa" stroke-width="1"/>
            <line x1="169" y1="165" x2="181" y2="165" stroke="#8888aa" stroke-width=".7"/>
            <text x="175" y="108" fill="#ff5e3a" font-size="10" text-anchor="middle" font-family="Space Mono">C</text>
            <!-- CR positive (R1, R2 sur e+) -->
            <line x1="340" y1="130" x2="340" y2="60" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="340" y1="60" x2="165" y2="60" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="165" y1="60" x2="165" y2="97" stroke="#8888aa" stroke-width="1.5"/>
            <rect x="190" y="48" width="50" height="24" rx="4" fill="none" stroke="#ff5e3a" stroke-width="1.5"/>
            <text x="215" y="44" fill="#ff5e3a" font-size="11" text-anchor="middle" font-family="Space Mono">Râ‚‚</text>
            <rect x="248" y="48" width="50" height="24" rx="4" fill="none" stroke="#ff5e3a" stroke-width="1.5"/>
            <text x="273" y="44" fill="#ff5e3a" font-size="11" text-anchor="middle" font-family="Space Mono">Râ‚</text>
            <line x1="165" y1="97" x2="200" y2="97" stroke="#8888aa" stroke-width="1.5"/>
            <circle cx="340" cy="130" r="3" fill="#e8f428"/>
            <!-- Labels -->
            <text x="52" y="140" fill="#3af4c8" font-size="10" font-family="Space Mono">V_C</text>
          </svg>
        </div>

        <div class="formula-box">
          <span class="formula-label">Formule de la pÃ©riode d'oscillation</span>
          <div class="formula">
            Î² = Râ‚‚/(Râ‚ + Râ‚‚) &nbsp;(coefficient de rÃ©injection)<br>
            T = 2RC Ã— ln((1+Î²)/(1âˆ’Î²))<br>
            <span style="font-size:.85rem">Cas particulier Râ‚ = Râ‚‚ (Î² = 0,5) : T = 2RC Ã— ln(3) â‰ˆ <strong>2,2 RC</strong></span>
          </div>
          <div class="formula-explain">
            Le condensateur se charge vers +Vsat Ã  travers R, jusqu'au seuil Vâº = Î²Â·Vsat. Alors S bascule Ã  âˆ’Vsat, et C se dÃ©charge vers âˆ’Vsat jusqu'au seuil Vâ» = âˆ’Î²Â·Vsat. Et ainsi de suite.<br>
            Rapport cyclique : Î± = 0,5 (signal carrÃ© symÃ©trique) si Râ‚ = Râ‚‚.
          </div>
        </div>

        <div class="example-box">
          <span class="example-label">Exercice rÃ©solu â€” GÃ©nÃ©rer 1 kHz</span>
          <p style="color:var(--text2);font-size:.9rem;margin-bottom:.75rem">On veut f = 1 kHz avec Râ‚ = Râ‚‚ (Î² = 0,5). Choisir R = 10 kÎ©. Trouver C.</p>
          <div class="formula" style="font-size:.85rem">
            T = 1/f = 1 ms<br>
            T = 2RC Ã— ln(3) = 2 Ã— 10k Ã— C Ã— 1,099<br>
            C = T / (2 Ã— R Ã— ln3) = 1Ã—10â»Â³ / (2 Ã— 10â´ Ã— 1,099) = <span style="color:var(--accent3)">45,5 nF â‰ˆ 47 nF</span> (valeur normalisÃ©e)
          </div>
        </div>
      </div>

      <!-- â”€â”€ 4. OSCILLATEUR DE WIEN â”€â”€ -->
      <div class="content-block" id="aop3-wien">
        <div class="section-tag" style="color:var(--accent3)">4 â€” Oscillateur sinusoÃ¯dal</div>
        <h2 class="block-title">Oscillateur de Wien</h2>
        <p class="block-text">GÃ©nÃ¨re un signal <strong>sinusoÃ¯dal</strong> de faible distorsion. Utilise un rÃ©seau RC sÃ©lectif (pont de Wien) en CR positive et un amplificateur non-inverseur en CR nÃ©gative pour maintenir les oscillations.</p>

        <div class="formula-box">
          <span class="formula-label">FrÃ©quence d'oscillation et condition de gain</span>
          <div class="formula">
            fâ‚€ = 1/(2Ï€RC)<br>
            Gain requis : A<sub>v</sub> = 1 + R<sub>f</sub>/Râ‚ = 3
          </div>
          <div class="formula-explain">
            Ã€ f = fâ‚€, le pont de Wien a un dÃ©phasage nul et une attÃ©nuation de 1/3.<br>
            Pour que la boucle ait un gain de boucle = 1 (condition d'oscillation stable), il faut Av = 3.<br>
            Donc : Rf/Râ‚ = 2 â†’ Rf = 2Râ‚ (typiquement Râ‚ = 10 kÎ©, Rf = 22 kÎ© avec NTC pour stabilisation).<br>
            En pratique, Av lÃ©gÃ¨rement > 3 pour dÃ©marrer, puis rÃ©gulÃ© par une rÃ©sistance NTC.
          </div>
        </div>

        <div class="diagram-container">
          <span class="diagram-label">Pont de Wien â€” sÃ©lecteur de frÃ©quence</span>
          <svg viewBox="0 0 400 180" class="diagram" xmlns="http://www.w3.org/2000/svg">
            <!-- ReprÃ©sentation pont de Wien simplifiÃ© -->
            <!-- Branche sÃ©rie RC (haut) -->
            <line x1="30" y1="90" x2="80" y2="90" stroke="#8888aa" stroke-width="1.5"/>
            <rect x="80" y="78" width="50" height="24" rx="4" fill="none" stroke="#e8f428" stroke-width="1.5"/>
            <text x="105" y="73" fill="#e8f428" font-size="11" text-anchor="middle" font-family="Space Mono">R</text>
            <line x1="130" y1="90" x2="155" y2="90" stroke="#8888aa" stroke-width="1.5"/>
            <!-- Condo sÃ©rie -->
            <line x1="155" y1="82" x2="155" y2="98" stroke="#ff5e3a" stroke-width="2.5"/>
            <line x1="165" y1="82" x2="165" y2="98" stroke="#ff5e3a" stroke-width="2.5"/>
            <line x1="165" y1="90" x2="200" y2="90" stroke="#8888aa" stroke-width="1.5"/>
            <text x="160" y="73" fill="#ff5e3a" font-size="11" text-anchor="middle" font-family="Space Mono">C</text>
            <!-- NÅ“ud sortie -->
            <circle cx="200" cy="90" r="3" fill="#e8f428"/>
            <text x="210" y="94" fill="#e8f428" font-size="10" font-family="Space Mono">vers eâº</text>
            <!-- Branche parallÃ¨le RC (bas) -->
            <line x1="200" y1="90" x2="200" y2="140" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="200" y1="140" x2="165" y2="140" stroke="#8888aa" stroke-width="1.5"/>
            <!-- R parallÃ¨le -->
            <rect x="105" y="128" width="60" height="24" rx="4" fill="none" stroke="#e8f428" stroke-width="1.5"/>
            <text x="135" y="123" fill="#e8f428" font-size="11" text-anchor="middle" font-family="Space Mono">R</text>
            <line x1="105" y1="140" x2="80" y2="140" stroke="#8888aa" stroke-width="1.5"/>
            <!-- C parallÃ¨le -->
            <line x1="80" y1="128" x2="80" y2="152" stroke="#ff5e3a" stroke-width="2.5"/>
            <line x1="70" y1="128" x2="70" y2="152" stroke="#ff5e3a" stroke-width="2.5"/>
            <text x="75" y="123" fill="#ff5e3a" font-size="11" text-anchor="middle" font-family="Space Mono">C</text>
            <line x1="70" y1="140" x2="30" y2="140" stroke="#8888aa" stroke-width="1.5"/>
            <!-- EntrÃ©e/sortie labels -->
            <text x="10" y="94" fill="#3af4c8" font-size="10" font-family="Space Mono">Ve</text>
            <line x1="30" y1="90" x2="30" y2="140" stroke="#8888aa" stroke-width="1.5"/>
            <!-- masse -->
            <line x1="30" y1="155" x2="200" y2="155" stroke="#8888aa" stroke-width="1.5"/>
            <line x1="82" y1="160" x2="148" y2="160" stroke="#8888aa" stroke-width="1"/>
            <line x1="95" y1="165" x2="135" y2="165" stroke="#8888aa" stroke-width=".7"/>
            <!-- Annotation Ã  f0 -->
            <text x="220" y="145" fill="#3af4c8" font-size="10" font-family="Space Mono">Ã€ fâ‚€ : Ï†=0Â°</text>
            <text x="220" y="160" fill="#3af4c8" font-size="10" font-family="Space Mono">|H|=1/3</text>
          </svg>
        </div>

        <div class="example-box">
          <span class="example-label">Exercice rÃ©solu â€” Oscillateur 440 Hz (La musical)</span>
          <p style="color:var(--text2);font-size:.9rem;margin-bottom:.75rem">Concevoir un oscillateur de Wien Ã  440 Hz. Choisir C = 10 nF.</p>
          <div class="formula" style="font-size:.85rem">
            fâ‚€ = 1/(2Ï€RC) â†’ R = 1/(2Ï€ Ã— fâ‚€ Ã— C)<br>
            R = 1/(2Ï€ Ã— 440 Ã— 10Ã—10â»â¹) = 1/(2,765Ã—10â»âµ) = <span style="color:var(--accent3)">36,2 kÎ© â†’ 36 kÎ©</span><br>
            Gain : Rf = 2Râ‚. Choisir Râ‚ = 10 kÎ©, Rf = 22 kÎ© (E24)<br>
            Av rÃ©el = 1 + 22/10 = 3,2 â†’ oscillations dÃ©marrent mais amplitude peut saturer.<br>
            â†’ Ajouter NTC (CTP100Î©) en // avec Râ‚ pour autorÃ©guler le gain.
          </div>
        </div>
      </div>

      <!-- â”€â”€ 5. CRITÃˆRE DE BARKHAUSEN â”€â”€ -->
      <div class="content-block" id="aop3-barkhausen">
        <div class="section-tag" style="color:var(--accent3)">5 â€” ThÃ©orie des oscillateurs</div>
        <h2 class="block-title">CritÃ¨re de Barkhausen</h2>
        <p class="block-text">Condition nÃ©cessaire et suffisante pour qu'un systÃ¨me bouclÃ© oscille de faÃ§on stable Ã  une frÃ©quence fâ‚€ unique. S'applique Ã  tout oscillateur linÃ©aire (Wien, LC, quartzâ€¦).</p>

        <div class="formula-box">
          <span class="formula-label">CritÃ¨re de Barkhausen (boucle ouverte)</span>
          <div class="formula">
            |A(jÏ‰â‚€) Ã— Î²(jÏ‰â‚€)| = 1<br>
            arg[A(jÏ‰â‚€) Ã— Î²(jÏ‰â‚€)] = 0Â° [2Ï€]
          </div>
          <div class="formula-explain">
            A(jÏ‰) = gain de l'amplificateur en boucle ouverte.<br>
            Î²(jÏ‰) = fonction de transfert du rÃ©seau de contre-rÃ©action.<br>
            <strong>Condition 1 :</strong> Le module du gain de boucle doit Ãªtre exactement 1 Ã  fâ‚€.<br>
            <strong>Condition 2 :</strong> Le dÃ©phasage total de la boucle doit Ãªtre 0Â° (ou multiple de 360Â°).<br>
            Si |AÎ²| > 1 â†’ oscillations croissantes (saturation). Si |AÎ²| &lt; 1 â†’ oscillations amorties.
          </div>
        </div>

        <table class="vtable">
          <tr><th>Oscillateur</th><th>RÃ©seau Î²</th><th>fâ‚€</th><th>Condition gain</th></tr>
          <tr>
            <td class="accent">Wien</td>
            <td class="mono">Pont RC</td>
            <td class="mono">1/(2Ï€RC)</td>
            <td>Av = 3 (Rf = 2Râ‚)</td>
          </tr>
          <tr>
            <td class="accent">LC (Colpitts)</td>
            <td class="mono">Diviseur LC</td>
            <td class="mono">1/(2Ï€âˆšLC)</td>
            <td>Av = Câ‚‚/Câ‚</td>
          </tr>
          <tr>
            <td class="accent">Quartz</td>
            <td class="mono">RÃ©sonateur quartz</td>
            <td class="mono">f_sÃ©rie quartz</td>
            <td>TrÃ¨s stable (Q > 10âµ)</td>
          </tr>
          <tr>
            <td class="accent">Astable</td>
            <td class="mono">RC + seuils</td>
            <td class="mono">1/(2,2RC) si Î²=0,5</td>
            <td>Non-linÃ©aire (Vsat)</td>
          </tr>
        </table>

        <div class="tip">
          <div class="tip-icon">ğŸ’¡</div>
          <div class="tip-text"><strong>DÃ©marrage des oscillations :</strong> En pratique, on conÃ§oit |AÎ²| lÃ©gÃ¨rement supÃ©rieur Ã  1 au dÃ©marrage pour que les oscillations croissent. Un Ã©lÃ©ment non-linÃ©aire (NTC, diode, limiteur) stabilise ensuite l'amplitude en rÃ©duisant le gain quand le signal est trop grand.</div>
        </div>

        <div class="example-box">
          <span class="example-label">Exercice rÃ©solu â€” VÃ©rifier le critÃ¨re pour Wien Ã  1 kHz</span>
          <div class="formula" style="font-size:.85rem">
            R = 15,9 kÎ©, C = 10 nF : fâ‚€ = 1/(2Ï€Ã—15,9kÃ—10n) = <span style="color:var(--accent3)">1 kHz âœ“</span><br>
            Ã€ fâ‚€ : Î²(jÏ‰â‚€) = 1/3 âˆ 0Â°<br>
            Av = 3 â†’ A(jÏ‰â‚€)Ã—Î²(jÏ‰â‚€) = 3 Ã— 1/3 = <span style="color:var(--accent3)">1 âˆ 0Â° âœ“</span><br>
            Les deux critÃ¨res sont satisfaits â†’ oscillations stables Ã  1 kHz.
          </div>
        </div>
      </div>

      <!-- â”€â”€ CALCULATEUR AOP-03 â”€â”€ -->
      <div class="content-block" id="aop3-calc">
        <div class="section-tag" style="color:var(--accent3)">ğŸ”¢ Outil interactif</div>
        <h2 class="block-title">Calculateur â€” Oscillateurs & Comparateurs</h2>

        <div class="calc-box">
          <div class="calc-title">âš¡ Calculateur <span>AOP-03</span></div>

          <div style="margin-bottom:1.2rem">
            <label style="font-size:.8rem;color:var(--text2);font-family:'Space Mono',monospace;display:block;margin-bottom:.5rem">TYPE DE CALCUL</label>
            <select id="aop3-type" onchange="calcAOP3()" style="background:var(--bg2);border:1px solid var(--border);color:var(--text);padding:.6rem .8rem;border-radius:6px;font-family:'Space Mono',monospace;font-size:.85rem;width:100%;outline:none">
              <option value="schmitt">Trigger de Schmitt â€” Seuils</option>
              <option value="astable">Astable â€” PÃ©riode & FrÃ©quence</option>
              <option value="wien">Oscillateur de Wien â€” FrÃ©quence</option>
            </select>
          </div>

          <div class="calc-grid" id="aop3-inputs">
            <div class="calc-field">
              <label class="calc-label">Râ‚ (kÎ©)</label>
              <input type="number" class="calc-input" id="aop3-r1" value="10" oninput="calcAOP3()">
            </div>
            <div class="calc-field">
              <label class="calc-label">Râ‚‚ (kÎ©)</label>
              <input type="number" class="calc-input" id="aop3-r2" value="100" oninput="calcAOP3()">
            </div>
            <div class="calc-field">
              <label class="calc-label">R (kÎ©) â€” si astable/Wien</label>
              <input type="number" class="calc-input" id="aop3-r" value="10" oninput="calcAOP3()">
            </div>
            <div class="calc-field">
              <label class="calc-label">C (nF)</label>
              <input type="number" class="calc-input" id="aop3-c" value="100" oninput="calcAOP3()">
            </div>
            <div class="calc-field">
              <label class="calc-label">Vsat (V)</label>
              <input type="number" class="calc-input" id="aop3-vsat" value="12" oninput="calcAOP3()">
            </div>
          </div>
          <button class="calc-btn" onclick="calcAOP3()">Calculer â†’</button>
          <div class="calc-result" id="aop3-result"></div>
        </div>
      </div>

      <!-- â”€â”€ QCM AOP-03 â”€â”€ -->
      <div class="content-block" id="aop3-qcm">
        <div class="section-tag" style="color:var(--accent3)">ğŸ“‹ Test de connaissance</div>
        <h2 class="block-title">QCM â€” Oscillateurs & Comparateurs</h2>
        <div id="qcm-aop_oscillateurs"></div>
      </div>

    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- MODULE 06 â€” SYSTÃˆMES TRIPHASÃ‰S -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="lesson-triphasÃ©" class="section">
  <div class="lesson-wrap">
    <aside class="sidebar">
      <button class="back-btn" onclick="showHome()">â† Accueil</button>
      <div class="sidebar-title">MODULE 06</div>
      <ul class="sidebar-nav">
        <li><a href="#tri-intro">SystÃ¨me triphasÃ©</a></li>
        <li><a href="#tri-tensions">Tensions simples & composÃ©es</a></li>
        <li><a href="#tri-recepteur">RÃ©cepteur Ã©toile</a></li>
        <li><a href="#tri-triangle">RÃ©cepteur triangle</a></li>
        <li><a href="#tri-resume">Tableau rÃ©capitulatif</a></li>
        <li><a href="#tri-boucherot">ThÃ©orÃ¨me de Boucherot</a></li>
        <li><a href="#tri-compensation">Compensation de Q</a></li>
        <li><a href="#tri-exercices">Exercices</a></li>
        <li><a href="#tri-desequilibre">DÃ©sÃ©quilibre</a></li>
        <li><a href="#tri-synthese">SynthÃ¨se</a></li>
        <li><a href="#tri-qcm">QCM</a></li>
      </ul>
    </aside>
    <main class="lesson-main">
      <div class="lesson-header">
        <div class="lesson-num">MODULE 06</div>
        <h1 class="lesson-title">SystÃ¨mes TriphasÃ©s</h1>
        <p class="lesson-intro">Le triphasÃ© est le standard mondial de la distribution d'Ã©nergie Ã©lectrique. Il permet de transporter trois fois plus de puissance avec seulement 50% de conducteurs supplÃ©mentaires par rapport au monophasÃ©, et offre une puissance instantanÃ©e <strong>parfaitement constante</strong> â€” aucune vibration mÃ©canique dans les moteurs.</p>
      </div>

      <!-- SECTION 1: INTRO TRIPHASÃ‰ -->
      <div class="block" id="tri-intro">
        <h2 class="block-title">1. PrÃ©sentation du systÃ¨me triphasÃ©</h2>
        <p>Un rÃ©seau triphasÃ© comprend <strong>3 phases</strong> (notÃ©es 1,2,3 ou A,B,C ou R,S,T) et un neutre N. On distingue :</p>
        <div class="formula-box">
          <div class="formula-sym">âš¡</div>
          <p><strong>SystÃ¨me Ã©quilibrÃ© direct :</strong> Trois tensions sinusoÃ¯dales de mÃªme amplitude V, dÃ©phasÃ©es entre elles de <strong>120Â° = 2Ï€/3 rad</strong>.</p>
        </div>
        <div class="example-box">
          <div class="example-label">Vecteurs de Fresnel (tensions simples)</div>
          <div style="text-align:center;margin:1rem 0">
            <svg viewBox="-180 -160 360 320" width="300" height="260" style="display:inline-block">
              <!-- Axes -->
              <line x1="-170" y1="0" x2="170" y2="0" stroke="#444" stroke-width="1"/>
              <line x1="0" y1="-150" x2="0" y2="150" stroke="#444" stroke-width="1"/>
              <!-- V1 (0Â°) -->
              <line x1="0" y1="0" x2="120" y2="0" stroke="#e8f428" stroke-width="2.5"/>
              <polygon points="120,0 108,-5 108,5" fill="#e8f428"/>
              <text x="128" y="5" fill="#e8f428" font-size="13" font-family="Space Mono">Vâ‚</text>
              <!-- V2 (-120Â°) -->
              <line x1="0" y1="0" x2="-60" y2="103.9" stroke="#3af4c8" stroke-width="2.5"/>
              <polygon points="-60,103.9 -51.5,94.7 -68.5,93.9" fill="#3af4c8"/>
              <text x="-85" y="118" fill="#3af4c8" font-size="13" font-family="Space Mono">Vâ‚‚</text>
              <!-- V3 (+120Â°) -->
              <line x1="0" y1="0" x2="-60" y2="-103.9" stroke="#ff5e3a" stroke-width="2.5"/>
              <polygon points="-60,-103.9 -51.5,-94.7 -68.5,-93.9" fill="#ff5e3a"/>
              <text x="-85" y="-108" fill="#ff5e3a" font-size="13" font-family="Space Mono">Vâ‚ƒ</text>
              <!-- Angles -->
              <path d="M 40,0 A 40,40 0 0,0 -20,-34.6" stroke="#888" fill="none" stroke-dasharray="4"/>
              <text x="10" y="-20" fill="#888" font-size="11">120Â°</text>
              <text x="-160" y="-5" fill="#666" font-size="11">Im</text>
              <text x="155" y="-8" fill="#666" font-size="11">Re</text>
              <text x="20" y="-145" fill="#666" font-size="11">+</text>
            </svg>
          </div>
          <p style="text-align:center">Î£Vâƒ—áµ¢ = 0 &nbsp;â†’&nbsp; La somme vectorielle est nulle</p>
        </div>

        <div class="expandable">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span>Ã‰quations horaires et reprÃ©sentation complexe</span><span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p>Les trois tensions simples s'Ã©crivent :</p>
            <div style="background:#111;border-radius:6px;padding:1.2rem;margin:.8rem 0;font-family:'Space Mono',monospace;color:#e8f428;line-height:2">
              vâ‚(t) = Vâˆš2 Â· sin(Ï‰t)<br>
              vâ‚‚(t) = Vâˆš2 Â· sin(Ï‰t âˆ’ 2Ï€/3)<br>
              vâ‚ƒ(t) = Vâˆš2 Â· sin(Ï‰t + 2Ï€/3)
            </div>
            <p>En notation complexe (vecteurs de Fresnel) :</p>
            <div style="background:#111;border-radius:6px;padding:1.2rem;margin:.8rem 0;font-family:'Space Mono',monospace;color:#3af4c8;line-height:2">
              <u>V</u>â‚ = VÂ·e<sup>jÂ·0</sup><br>
              <u>V</u>â‚‚ = VÂ·e<sup>j(-2Ï€/3)</sup><br>
              <u>V</u>â‚ƒ = VÂ·e<sup>j(+2Ï€/3)</sup>
            </div>
          </div>
        </div>
      </div>

      <!-- SECTION 2: TENSIONS COMPOSÃ‰ES -->
      <div class="block" id="tri-tensions">
        <h2 class="block-title">2. Tensions composÃ©es</h2>
        <p>Les <strong>tensions composÃ©es</strong> (ou tensions de ligne) sont les diffÃ©rences entre phases :</p>
        <div style="background:#111;border-radius:6px;padding:1.2rem;margin:.8rem 0;font-family:'Space Mono',monospace;color:#e8f428;line-height:2.2;font-size:.9rem">
          <u>U</u>â‚â‚‚ = <u>V</u>â‚ âˆ’ <u>V</u>â‚‚ &nbsp;â†’&nbsp; uâ‚â‚‚(t) = Uâˆš2Â·sin(Ï‰t + Ï€/6)<br>
          <u>U</u>â‚‚â‚ƒ = <u>V</u>â‚‚ âˆ’ <u>V</u>â‚ƒ &nbsp;â†’&nbsp; uâ‚‚â‚ƒ(t) = Uâˆš2Â·sin(Ï‰t âˆ’ Ï€/2)<br>
          <u>U</u>â‚ƒâ‚ = <u>V</u>â‚ƒ âˆ’ <u>V</u>â‚ &nbsp;â†’&nbsp; uâ‚ƒâ‚(t) = Uâˆš2Â·sin(Ï‰t âˆ’ 7Ï€/6)
        </div>
        <div class="formula-box">
          <div class="formula-sym">âˆš3</div>
          <div>
            <p><strong>Relation fondamentale tension composÃ©e / simple :</strong></p>
            <p style="font-size:1.4rem;font-family:'Space Mono',monospace;color:#e8f428">U = âˆš3 Â· V</p>
            <p>En France : V = 230 V (simple) â†’ U = 400 V (composÃ©e)</p>
          </div>
        </div>
        <div class="tip-box">
          ğŸ’¡ <strong>Moyen mÃ©mo :</strong> Les tensions composÃ©es sont en avance de <strong>Ï€/6 = 30Â°</strong> sur les tensions simples correspondantes, et leur amplitude est multipliÃ©e par âˆš3 â‰ˆ 1,732.
        </div>
      </div>

      <!-- SECTION 3: RÃ‰CEPTEUR Ã‰TOILE -->
      <div class="block" id="tri-recepteur">
        <h2 class="block-title">3. RÃ©cepteur Ã©toile (Y)</h2>
        <p>Dans un couplage Ã©toile, chaque phase du rÃ©cepteur est connectÃ©e entre une ligne et le neutre.</p>

        <div class="formula-box">
          <div class="formula-sym">Y</div>
          <div>
            <p><strong>Relations courant/tension (Ã©toile) :</strong></p>
            <div style="font-family:'Space Mono',monospace;line-height:2.2;color:#e8f428">
              I = J &nbsp;&nbsp;&nbsp;&nbsp;(courant de ligne = courant de phase)<br>
              V<sub>ph</sub> = V = U/âˆš3 &nbsp;&nbsp;(tension de phase = tension simple)
            </div>
          </div>
        </div>

        <h3 style="color:#3af4c8;margin:1.5rem 0 .8rem">Puissances â€” rÃ©cepteur Ã©toile</h3>
        <div style="display:grid;gap:1rem">
          <div class="formula-box" style="border-color:#3af4c8">
            <div class="formula-sym" style="color:#3af4c8">P</div>
            <div>
              <p>Puissance active (W) :</p>
              <p style="font-size:1.2rem;font-family:'Space Mono',monospace;color:#3af4c8">P = 3Â·VÂ·IÂ·cosÏ† = âˆš3Â·UÂ·IÂ·cosÏ†</p>
            </div>
          </div>
          <div class="formula-box" style="border-color:#ff5e3a">
            <div class="formula-sym" style="color:#ff5e3a">Q</div>
            <div>
              <p>Puissance rÃ©active (VAr) :</p>
              <p style="font-size:1.2rem;font-family:'Space Mono',monospace;color:#ff5e3a">Q = 3Â·VÂ·IÂ·sinÏ† = âˆš3Â·UÂ·IÂ·sinÏ†</p>
            </div>
          </div>
          <div class="formula-box">
            <div class="formula-sym">S</div>
            <div>
              <p>Puissance apparente (VA) :</p>
              <p style="font-size:1.2rem;font-family:'Space Mono',monospace;color:#e8f428">S = 3Â·VÂ·I = âˆš3Â·UÂ·I</p>
              <p>Puissance complexe : <span style="font-family:'Space Mono',monospace;color:#e8f428"><u>S</u> = 3Â·VÂ²/<u>Z</u>*</span></p>
            </div>
          </div>
        </div>

        <div class="alert-box" style="margin-top:1.2rem">
          âš¡ <strong>Avantage triphasÃ© :</strong> La puissance instantanÃ©e totale pâ‚ƒÏ† = 3VIÂ·cos(Ï†) est <strong>CONSTANTE</strong> (pas de pulsation Ã  2Ï‰ comme en monophasÃ©). Cela explique pourquoi les moteurs triphasÃ©s tournent sans vibrations.
        </div>

        <div class="expandable">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span>Pertes Joule â€” rÃ©cepteur Ã©toile rÃ©sistif (3 rÃ©sistances r)</span><span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p>Pour un rÃ©cepteur Ã©toile purement rÃ©sistif (3 rÃ©sistances r identiques) :</p>
            <div style="font-family:'Space Mono',monospace;color:#e8f428;background:#111;padding:1rem;border-radius:6px;line-height:2">
              P_J = 3Â·rÂ·JÂ² = 3Â·VÂ²<sub>ph</sub>/r
            </div>
            <p style="margin-top:.8rem">RÃ©sistance Ã©quivalente vue du rÃ©seau : <strong>R' = 2r</strong></p>
          </div>
        </div>
      </div>

      <!-- SECTION 4: RÃ‰CEPTEUR TRIANGLE -->
      <div class="block" id="tri-triangle">
        <h2 class="block-title">4. RÃ©cepteur triangle (Î”)</h2>
        <p>Dans un couplage triangle, les phases du rÃ©cepteur sont connectÃ©es directement entre les lignes. Chaque impÃ©dance voit la tension composÃ©e U.</p>

        <div class="formula-box">
          <div class="formula-sym">Î”</div>
          <div>
            <p><strong>Relations courant/tension (triangle) :</strong></p>
            <div style="font-family:'Space Mono',monospace;line-height:2.2;color:#e8f428">
              V<sub>ph</sub> = U &nbsp;&nbsp;&nbsp;&nbsp;(tension de phase = tension composÃ©e)<br>
              I = JÂ·âˆš3 &nbsp;&nbsp;(courant de ligne = âˆš3 Ã— courant de phase)<br>
              J<sub>k</sub> = U<sub>kl</sub> / Z &nbsp;&nbsp;(courant dans chaque bras)
            </div>
          </div>
        </div>

        <h3 style="color:#3af4c8;margin:1.5rem 0 .8rem">Puissances â€” rÃ©cepteur triangle</h3>
        <div class="formula-box">
          <div class="formula-sym">âš¡</div>
          <div style="font-family:'Space Mono',monospace;line-height:2.2;color:#e8f428">
            P = 3Â·JÂ·UÂ·cosÏ† = âˆš3Â·UÂ·IÂ·cosÏ† (W)<br>
            Q = 3Â·JÂ·UÂ·sinÏ† = âˆš3Â·UÂ·IÂ·sinÏ† (VAr)<br>
            S = 3Â·JÂ·U = âˆš3Â·UÂ·I (VA)
          </div>
        </div>

        <div class="tip-box">
          âœ… <strong>RÃ©sultat important :</strong> Les formules de puissance <strong>P = âˆš3Â·UÂ·IÂ·cosÏ†</strong>, <strong>Q = âˆš3Â·UÂ·IÂ·sinÏ†</strong> et <strong>S = âˆš3Â·UÂ·I</strong> sont <strong>identiques</strong> pour les couplages Ã©toile ET triangle. La diffÃ©rence est dans les relations entre V, U, I et J.
        </div>

        <div class="expandable">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span>Pertes Joule â€” rÃ©cepteur triangle rÃ©sistif (3 rÃ©sistances r)</span><span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <div style="font-family:'Space Mono',monospace;color:#e8f428;background:#111;padding:1rem;border-radius:6px;line-height:2">
              P_J = 3Â·rÂ·JÂ² = 3Â·rÂ·(I/âˆš3)Â² = rÂ·IÂ²
            </div>
            <p style="margin-top:.8rem">RÃ©sistance Ã©quivalente vue du rÃ©seau : <strong>R' = (2/3)r</strong></p>
            <p>On remarque que les pertes Joule en triangle sont <strong>3 fois plus faibles</strong> qu'en Ã©toile pour la mÃªme rÃ©sistance r â†’ d'oÃ¹ l'intÃ©rÃªt du dÃ©marrage Ã©toile-triangle des moteurs !</p>
          </div>
        </div>
      </div>

      <!-- SECTION 5: TABLEAU RÃ‰CAP -->
      <div class="block" id="tri-resume">
        <h2 class="block-title">5. Tableau rÃ©capitulatif</h2>
        <div style="overflow-x:auto">
          <table style="width:100%;border-collapse:collapse;font-size:.85rem">
            <thead>
              <tr style="background:#1a1a2e">
                <th style="padding:.8rem;border:1px solid #333;text-align:left;color:#888">Grandeur</th>
                <th style="padding:.8rem;border:1px solid #333;text-align:center;color:#e8f428">Couplage Ã©toile (Y)</th>
                <th style="padding:.8rem;border:1px solid #333;text-align:center;color:#3af4c8">Couplage triangle (Î”)</th>
              </tr>
            </thead>
            <tbody>
              <tr><td style="padding:.7rem .8rem;border:1px solid #222">V<sub>ph</sub> (tension de phase)</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#e8f428">V = U/âˆš3</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#3af4c8">V<sub>ph</sub> = U</td></tr>
              <tr style="background:#111"><td style="padding:.7rem .8rem;border:1px solid #222">I (courant de ligne) vs J (phase)</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#e8f428">J = I</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#3af4c8">I = Jâˆš3</td></tr>
              <tr><td style="padding:.7rem .8rem;border:1px solid #222">Puissance active P</td><td colspan="2" style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#e8f428">3VIÂ·cosÏ† = âˆš3Â·UÂ·IÂ·cosÏ†</td></tr>
              <tr style="background:#111"><td style="padding:.7rem .8rem;border:1px solid #222">Puissance rÃ©active Q</td><td colspan="2" style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#ff5e3a">3VIÂ·sinÏ† = âˆš3Â·UÂ·IÂ·sinÏ†</td></tr>
              <tr><td style="padding:.7rem .8rem;border:1px solid #222">Puissance apparente S</td><td colspan="2" style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#e8f428">3VI = âˆš3Â·UÂ·I</td></tr>
              <tr style="background:#111"><td style="padding:.7rem .8rem;border:1px solid #222">Puissance complexe <u>S</u></td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#e8f428">3Â·VÂ²/<u>Z</u>*</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#3af4c8">3Â·UÂ²/<u>Z</u>*</td></tr>
              <tr><td style="padding:.7rem .8rem;border:1px solid #222">Pertes Joule (charge rÃ©sistive r)</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#e8f428">3rIÂ²&nbsp; (R'=2r)</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#3af4c8">rIÂ²&nbsp; (R'=2r/3)</td></tr>
              <tr style="background:#111"><td style="padding:.7rem .8rem;border:1px solid #222">DÃ©phasage Ï†</td><td style="padding:.7rem;border:1px solid #222;text-align:center">Ï†(Iâ‚,Vâ‚)</td><td style="padding:.7rem;border:1px solid #222;text-align:center">Ï†(Jâ‚,Uâ‚â‚‚) = Ï†(Iâ‚,Vâ‚)</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- SECTION 6: BOUCHEROT -->
      <div class="block" id="tri-boucherot">
        <h2 class="block-title">6. ThÃ©orÃ¨me de Boucherot</h2>
        <div class="formula-box">
          <div class="formula-sym">Î£</div>
          <div>
            <p><strong>ThÃ©orÃ¨me de Boucherot :</strong></p>
            <p>La puissance active <strong>P<sub>tot</sub></strong> d'un systÃ¨me est la <em>somme</em> des puissances actives des Ã©lÃ©ments qui le constituent. Idem pour la puissance rÃ©active <strong>Q<sub>tot</sub></strong> et la puissance apparente complexe <strong><u>S</u><sub>tot</sub></strong>.</p>
            <div style="font-family:'Space Mono',monospace;line-height:2.2;color:#e8f428;margin-top:.8rem">
              P<sub>tot</sub> = Î£Páµ¢ &nbsp;&nbsp; Q<sub>tot</sub> = Î£Qáµ¢ &nbsp;&nbsp; <u>S</u><sub>tot</sub> = Î£<u>S</u>áµ¢
            </div>
          </div>
        </div>
        <div class="alert-box">
          âš ï¸ <strong>Attention !</strong> La puissance apparente <em>scalaire</em> S n'est <strong>PAS</strong> additive : S<sub>tot</sub> â‰  Î£Sáµ¢. On calcule S<sub>tot</sub> = |<u>S</u><sub>tot</sub>| = âˆš(P<sub>tot</sub>Â² + Q<sub>tot</sub>Â²).
        </div>
        <p style="margin-top:1rem">Application pratique pour un systÃ¨me avec n charges :</p>
        <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.2">
          P<sub>tot</sub> = Pâ‚ + Pâ‚‚ + ... + Pâ‚™<br>
          Q<sub>tot</sub> = Qâ‚ + Qâ‚‚ + ... + Qâ‚™<br>
          S<sub>tot</sub> = âˆš(P<sub>tot</sub>Â² + Q<sub>tot</sub>Â²)<br>
          cosÏ†<sub>tot</sub> = P<sub>tot</sub>/S<sub>tot</sub>
        </div>
      </div>

      <!-- SECTION 7: COMPENSATION -->
      <div class="block" id="tri-compensation">
        <h2 class="block-title">7. Compensation de puissance rÃ©active (relÃ¨vement du cosÏ†)</h2>
        <p>Les charges inductives (moteurs) consomment de la puissance rÃ©active Q > 0, ce qui dÃ©grade le facteur de puissance. On ajoute des condensateurs pour compenser Q.</p>

        <h3 style="color:#3af4c8;margin:1.2rem 0 .8rem">Puissance rÃ©active d'un banc de 3 condensateurs</h3>
        <div class="formula-box" style="border-color:#3af4c8">
          <div class="formula-sym" style="color:#3af4c8">C</div>
          <div style="font-family:'Space Mono',monospace;line-height:2.2;color:#e8f428">
            Q_c = âˆ’3Ï‰CVÂ² &nbsp;&nbsp; (couplage Ã©toile)<br>
            Q_c = âˆ’3Ï‰CUÂ² &nbsp;&nbsp; (couplage triangle)
          </div>
        </div>

        <div style="overflow-x:auto;margin-top:1rem">
          <table style="width:100%;border-collapse:collapse;font-size:.85rem">
            <thead>
              <tr style="background:#1a1a2e">
                <th style="padding:.8rem;border:1px solid #333;text-align:left;color:#888">Situation</th>
                <th style="padding:.8rem;border:1px solid #333;text-align:center;color:#e8f428">P active</th>
                <th style="padding:.8rem;border:1px solid #333;text-align:center;color:#ff5e3a">Q rÃ©active</th>
                <th style="padding:.8rem;border:1px solid #333;text-align:center;color:#888">cosÏ†</th>
              </tr>
            </thead>
            <tbody>
              <tr><td style="padding:.7rem .8rem;border:1px solid #222">Charge seule</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace">P</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#ff5e3a">Q = PÂ·tgÏ†</td><td style="padding:.7rem;border:1px solid #222;text-align:center">cosÏ†</td></tr>
              <tr style="background:#111"><td style="padding:.7rem .8rem;border:1px solid #222">3 condensateurs seuls</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace">0</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#3af4c8">Q_c = âˆ’3CÏ‰UÂ²</td><td style="padding:.7rem;border:1px solid #222;text-align:center">0</td></tr>
              <tr><td style="padding:.7rem .8rem;border:1px solid #222">Charge + condensateurs</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace">P</td><td style="padding:.7rem;border:1px solid #222;text-align:center;font-family:'Space Mono',monospace;color:#e8f428">Q' = Q + Q_c = PÂ·tgÏ†'</td><td style="padding:.7rem;border:1px solid #222;text-align:center;color:#3af4c8">cosÏ†' &gt; cosÏ† âœ“</td></tr>
            </tbody>
          </table>
        </div>

        <div class="expandable" style="margin-top:1.2rem">
          <div class="expand-header" onclick="toggleExpand(this)">
            <span>Calcul de la capacitÃ© C pour atteindre un cosÏ†' cible</span><span class="expand-icon">+</span>
          </div>
          <div class="expand-content">
            <p>Pour relever le facteur de puissance de cosÏ† Ã  cosÏ†' :</p>
            <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.5">
              Q_c = PÂ·(tgÏ† âˆ’ tgÏ†')<br><br>
              En Ã©toile : C = Q_c / (3Ï‰VÂ²)<br>
              En triangle : C = Q_c / (3Ï‰UÂ²) = C_Ã©toile / 3
            </div>
            <div class="tip-box" style="margin-top:1rem">
              â„¹ï¸ Le condensateur en <strong>triangle</strong> est 3Ã— plus petit qu'en Ã©toile pour le mÃªme effet. On prÃ©fÃ¨re souvent le triangle pour rÃ©duire la valeur et le coÃ»t des condensateurs.
            </div>
          </div>
        </div>

        <!-- Calculatrice compensation -->
        <div class="calculator-box" style="margin-top:1.5rem">
          <div class="calc-title">ğŸ”§ Calculatrice â€” Compensation de puissance rÃ©active</div>
          <div class="calc-grid">
            <div class="calc-field"><label>P (kW)</label><input type="number" id="comp-P" value="25" step="0.1"></div>
            <div class="calc-field"><label>cosÏ† initial</label><input type="number" id="comp-cosphi1" value="0.7" step="0.01" min="0.1" max="1"></div>
            <div class="calc-field"><label>cosÏ†' cible</label><input type="number" id="comp-cosphi2" value="0.92" step="0.01" min="0.1" max="1"></div>
            <div class="calc-field"><label>U (V) tension composÃ©e</label><input type="number" id="comp-U" value="400" step="1"></div>
            <div class="calc-field"><label>f (Hz)</label><input type="number" id="comp-f" value="50" step="1"></div>
          </div>
          <button class="calc-btn" onclick="calcCompensation()">Calculer</button>
          <div id="comp-result" class="calc-result"></div>
        </div>
      </div>

      <!-- SECTION 8: EXERCICES -->
      <div class="block" id="tri-exercices">
        <h2 class="block-title">8. Exercices rÃ©solus</h2>

        <!-- Exercice 1 -->
        <div class="example-box" style="margin-bottom:1.5rem">
          <div class="example-label">Exercice 1 â€” Charge monophasÃ©e (p.54)</div>
          <p><strong>Circuit :</strong> V = 230 V, f = 50 Hz. L = 20 mH en sÃ©rie avec Râ‚ = 20 Î©, le tout en parallÃ¨le avec Râ‚‚ = 10 Î©.</p>
          <div class="expandable">
            <div class="expand-header" onclick="toggleExpand(this)"><span>Voir la solution complÃ¨te</span><span class="expand-icon">+</span></div>
            <div class="expand-content">
              <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.2;font-size:.85rem">
                Ï‰ = 2Ï€Ã—50 = 314.2 rad/s<br>
                Z_L = jLÏ‰ = jÃ—0.02Ã—314.2 = j6.28 Î©<br>
                Z_branche1 = Râ‚ + jLÏ‰ = 20 + j6.28 Î©<br>
                |Zâ‚| = âˆš(20Â² + 6.28Â²) = âˆš(400+39.4) = 20.97 Î©<br><br>
                Iâ‚ = V/|Zâ‚| = 230/20.97 = <span style="color:#3af4c8">10.97 A</span><br>
                Iâ‚‚ = V/Râ‚‚ = 230/10 = <span style="color:#3af4c8">23 A</span><br><br>
                Par Boucherot :<br>
                P = Râ‚Â·Iâ‚Â² + Râ‚‚Â·Iâ‚‚Â² = 20Ã—10.97Â² + 10Ã—23Â²<br>
                P = 2408 + 5290 = <span style="color:#3af4c8">7698 W</span><br>
                Q = LÏ‰Â·Iâ‚Â² = 6.28Ã—10.97Â² = <span style="color:#ff5e3a">756 VAr</span><br>
                S = âˆš(PÂ²+QÂ²) = âˆš(7698Â²+756Â²) = <span style="color:#3af4c8">7735 VA</span><br>
                I = S/V = 7735/230 = <span style="color:#3af4c8">33.6 A</span><br>
                cosÏ† = P/S = 7698/7735 = <span style="color:#e8f428">0.995</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Exercice 2 -->
        <div class="example-box" style="margin-bottom:1.5rem">
          <div class="example-label">Exercice 2 â€” ReprÃ©sentation vectorielle (p.55)</div>
          <p><strong>Circuit :</strong> V = 100 V, f = 50 Hz. En sÃ©rie : j10 Î© (inductif), âˆ’j5 Î© (capacitif), 20 Î© (rÃ©sistif).</p>
          <div class="expandable">
            <div class="expand-header" onclick="toggleExpand(this)"><span>Voir la solution</span><span class="expand-icon">+</span></div>
            <div class="expand-content">
              <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.2;font-size:.82rem">
                Z = 20 + j10 âˆ’ j5 = <span style="color:#3af4c8">20 + j5 Î©</span><br>
                |Z| = âˆš(20Â²+5Â²) = âˆš425 â‰ˆ <span style="color:#3af4c8">20.6 Î©</span><br>
                Ï† = arctan(5/20) â‰ˆ <span style="color:#3af4c8">14.04Â°</span> (circuit inductif AR)<br>
                I = V/|Z| = 100/20.6 â‰ˆ <span style="color:#3af4c8">4.85 A</span><br>
                v(t) = 100âˆš2 sin(Ï‰t) ; i(t) = 4.85âˆš2 sin(Ï‰t âˆ’ 14.04Â°)<br>
                Loi de maille : <span style="color:#ff5e3a">V = (20+j5)Â·I</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Exercice 3 -->
        <div class="example-box" style="margin-bottom:1.5rem">
          <div class="example-label">Exercice 3 â€” Diviseur de courant (p.56)</div>
          <p>I = 2,5 A. Branche 1 : âˆ’j0,002 + 4 Î©. Branche 2 : j40 + 10 Î©.</p>
          <div class="expandable">
            <div class="expand-header" onclick="toggleExpand(this)"><span>Voir la solution</span><span class="expand-icon">+</span></div>
            <div class="expand-content">
              <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.2;font-size:.82rem">
                Zâ‚ â‰ˆ 4 Î© (partie capacitive nÃ©gligeable)<br>
                Zâ‚‚ = 10+j40, |Zâ‚‚| â‰ˆ 41.2 Î©<br>
                Z_eq parallÃ¨le : |Z_eq| â‰ˆ <span style="color:#3af4c8">3.89 Î©</span><br>
                V = I Ã— |Z_eq| = 2.5 Ã— 3.89 â‰ˆ <span style="color:#3af4c8">9.72 V</span><br>
                Iâ‚ = V/|Zâ‚| â‰ˆ <span style="color:#3af4c8">2.43 A</span> ; Iâ‚‚ = V/|Zâ‚‚| â‰ˆ <span style="color:#3af4c8">0.236 A</span><br>
                P = Râ‚Iâ‚Â² + Râ‚‚Iâ‚‚Â² â‰ˆ <span style="color:#3af4c8">24.2 W</span><br>
                Q = X_LÂ·Iâ‚‚Â² â‰ˆ <span style="color:#ff5e3a">+2.23 VAr</span> (inductif dominant)
              </div>
            </div>
          </div>
        </div>

        <!-- Exercice 4 -->
        <div class="example-box" style="margin-bottom:1.5rem">
          <div class="example-label">Exercice 4 â€” Ligne monophasÃ©e vs triphasÃ©e (p.75â€“76)</div>
          <p>Comparaison de deux lignes distribuant la mÃªme puissance active P = VÂ²/R sur une distance L.</p>
          <div class="expandable">
            <div class="expand-header" onclick="toggleExpand(this)"><span>Voir les rÃ©sultats clÃ©s</span><span class="expand-icon">+</span></div>
            <div class="expand-content">
              <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.2;font-size:.82rem">
                <span style="color:#3af4c8">Puissance identique :</span> P_mono = P_tri = VÂ²/R âœ“<br>
                <span style="color:#3af4c8">Volume de cuivre :</span><br>
                  Vol_mono = 2 fils Ã— L Ã— S = 2LV/(RÎ´)<br>
                  Vol_tri = 3 fils Ã— L Ã— S/3 = LV/(RÎ´)<br>
                  â†’ <span style="color:#3af4c8">TriphasÃ© utilise 2Ã— moins de cuivre !</span><br>
                <span style="color:#3af4c8">Puissance instantanÃ©e :</span><br>
                  MonophasÃ© : p(t) pulsatoire Ã  2Ï‰ â†’ vibrations<br>
                  TriphasÃ© : pâ‚ƒÏ† = 3VIÂ·cosÏ† = <span style="color:#3af4c8">CONSTANTE</span> â†’ moteurs sans vibrations<br>
                <span style="color:#e8f428">âœ“ Le triphasÃ© : mÃªme puissance, 2Ã— moins de cuivre, puissance instantanÃ©e constante.</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Exercice 5 -->
        <div class="example-box" style="margin-bottom:1.5rem">
          <div class="example-label">Exercice 5 â€” Atelier triphasÃ© (p.77)</div>
          <p><strong>RÃ©seau :</strong> 230V/400V, 50Hz. L'atelier comprend :</p>
          <ul style="margin:.5rem 0 .8rem 1.2rem;line-height:1.8">
            <li>Luminaires/bureautique : Pâ‚ = 6 kW, cosÏ†â‚ = 1 (fp unitaire)</li>
            <li>3 machines triphasÃ©es : Pâ‚‚ = 3Ã—5 = 15 kW, cosÏ†â‚‚ = 0,8 AR</li>
            <li>3 impÃ©dances en triangle : Z = 10 + j15 Î©</li>
          </ul>
          <div class="expandable">
            <div class="expand-header" onclick="toggleExpand(this)"><span>Voir la solution complÃ¨te</span><span class="expand-icon">+</span></div>
            <div class="expand-content">
              <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.2;font-size:.82rem">
                <span style="color:#3af4c8">â€” ImpÃ©dances en triangle (Z = 10+j15 Î©) â€”</span><br>
                |Z| = âˆš(10Â²+15Â²) = âˆš325 = 18.03 Î©<br>
                J = U/|Z| = 400/18.03 = 22.18 A<br>
                P_Z = 3Ã—10Ã—22.18Â² â‰ˆ <span style="color:#3af4c8">14.77 kW</span><br>
                Q_Z = 3Ã—15Ã—22.18Â² â‰ˆ <span style="color:#ff5e3a">22.16 kVAr</span><br><br>
                <span style="color:#3af4c8">â€” Machines (cosÏ†=0.8 AR â†’ tgÏ†=0.75) â€”</span><br>
                Qâ‚‚ = 15000Ã—0.75 = <span style="color:#ff5e3a">11.25 kVAr</span><br><br>
                <span style="color:#3af4c8">â€” Boucherot total â€”</span><br>
                P_tot = 6 + 15 + 14.77 = <span style="color:#3af4c8">35.77 kW</span><br>
                Q_tot = 0 + 11.25 + 22.16 = <span style="color:#ff5e3a">33.41 kVAr</span><br>
                S_tot = âˆš(35.77Â²+33.41Â²) = <span style="color:#e8f428">48.88 kVA</span><br>
                I = S/(âˆš3Â·U) = 48880/692.8 = <span style="color:#3af4c8">70.6 A</span><br>
                cosÏ†_tot = 35.77/48.88 = <span style="color:#e8f428">0.732</span> â†’ non tolÃ©rable (min 0.92)<br><br>
                <span style="color:#3af4c8">â€” Condensateurs Ã©toile pour cosÏ†'=1 â€”</span><br>
                C = Q_tot/(3Ï‰VÂ²) = 33410/(3Ã—314.2Ã—230Â²) = <span style="color:#3af4c8">671 ÂµF</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Exercice 6 -->
        <div class="example-box" style="margin-bottom:1.5rem">
          <div class="example-label">Exercice 6 â€” Compensation de puissance rÃ©active (p.78)</div>
          <p><strong>Charge :</strong> 230V/400V, 50Hz. P = 25 kW, cosÏ† = 0,7 AR â†’ relÃ¨vement Ã  cosÏ†' = 0,92 AR.</p>
          <div class="expandable">
            <div class="expand-header" onclick="toggleExpand(this)"><span>Voir la solution complÃ¨te</span><span class="expand-icon">+</span></div>
            <div class="expand-content">
              <div style="font-family:'Space Mono',monospace;background:#111;padding:1.2rem;border-radius:6px;color:#e8f428;line-height:2.2;font-size:.82rem">
                Ï† = arccos(0.7) â‰ˆ 45.57Â° â†’ tgÏ† â‰ˆ 1.020<br>
                Ï†' = arccos(0.92) â‰ˆ 23.07Â° â†’ tgÏ†' â‰ˆ 0.426<br>
                Q_c = PÃ—(tgÏ†âˆ’tgÏ†') = 25000Ã—(1.020âˆ’0.426) â‰ˆ <span style="color:#3af4c8">14.85 kVAr</span><br><br>
                <span style="color:#3af4c8">1) Ã‰toile (V = 230 V) :</span><br>
                C = Q_c/(3Ï‰VÂ²) = 14850/(3Ã—314.2Ã—230Â²) â‰ˆ <span style="color:#3af4c8">298 ÂµF</span><br><br>
                <span style="color:#3af4c8">2) Triangle pour cosÏ†'=0,92 AR (U = 400 V) :</span><br>
                C' = Q_c/(3Ï‰UÂ²) = 14850/(3Ã—314.2Ã—400Â²) â‰ˆ <span style="color:#3af4c8">98.5 ÂµF</span><br>
                <span style="color:#ff5e3a">â†’ 3Ã— moins que l'Ã©toile : C' = C/3</span><br><br>
                <span style="color:#3af4c8">3) Triangle pour cosÏ†''=0,92 AV (sur-compensation) :</span><br>
                Q_c = PÃ—(tgÏ†+tgÏ†') = 25000Ã—1.446 = 36.15 kVAr<br>
                C'' = 36150/(3Ã—314.2Ã—400Â²) â‰ˆ <span style="color:#3af4c8">240 ÂµF</span><br><br>
                <span style="color:#e8f428">âœ“ Solution prÃ©fÃ©rÃ©e : condensateurs en TRIANGLE â€” mÃªme effet avec des condensateurs 3Ã— plus petits (voient la tension U au lieu de V).</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- SystÃ¨me dÃ©sÃ©quilibrÃ© -->
      <div class="block" id="tri-desequilibre">
        <h2 class="block-title">10. SystÃ¨me triphasÃ© dÃ©sÃ©quilibrÃ©</h2>
        <div class="tip-box" style="margin-bottom:1.2rem">
          âš–ï¸ Un systÃ¨me est <strong>Ã©quilibrÃ©</strong> si Zâ‚=Zâ‚‚=Zâ‚ƒ (Ã©toile) ou Zâ‚â‚‚=Zâ‚‚â‚ƒ=Zâ‚ƒâ‚ (triangle). Alors Iâ‚=Iâ‚‚=Iâ‚ƒ et toutes les formules simplifiÃ©es s'appliquent.
        </div>
        <p>Un systÃ¨me est <strong>dÃ©sÃ©quilibrÃ©</strong> si les impÃ©dances diffÃ¨rent d'une phase Ã  l'autre. On revient aux relations gÃ©nÃ©rales :</p>
        <div class="formula-box" style="margin:1rem 0;line-height:2.2;font-size:.9rem">
          <span style="color:#ff5e3a">Charge Ã©toile dÃ©sÃ©quilibrÃ©e :</span><br>
          P = V<sub>Z1</sub>Â·Iâ‚Â·cosÏ†â‚ + V<sub>Z2</sub>Â·Iâ‚‚Â·cosÏ†â‚‚ + V<sub>Z3</sub>Â·Iâ‚ƒÂ·cosÏ†â‚ƒ<br>
          Q = V<sub>Z1</sub>Â·Iâ‚Â·sinÏ†â‚ + V<sub>Z2</sub>Â·Iâ‚‚Â·sinÏ†â‚‚ + V<sub>Z3</sub>Â·Iâ‚ƒÂ·sinÏ†â‚ƒ<br><br>
          <span style="color:#ff5e3a">Charge triangle dÃ©sÃ©quilibrÃ©e :</span><br>
          P = UÂ·(Jâ‚â‚‚Â·cosÏ†â‚â‚‚ + Jâ‚‚â‚ƒÂ·cosÏ†â‚‚â‚ƒ + Jâ‚ƒâ‚Â·cosÏ†â‚ƒâ‚)<br>
          Q = UÂ·(Jâ‚â‚‚Â·sinÏ†â‚â‚‚ + Jâ‚‚â‚ƒÂ·sinÏ†â‚‚â‚ƒ + Jâ‚ƒâ‚Â·sinÏ†â‚ƒâ‚)
        </div>
        <p>Le thÃ©orÃ¨me de Boucherot (additivitÃ© de P et Q) reste toujours applicable, mÃªme en systÃ¨me dÃ©sÃ©quilibrÃ©.</p>
      </div>

      <!-- SynthÃ¨se -->
      <div class="block" id="tri-synthese">
        <h2 class="block-title">11. SynthÃ¨se â€” Ã‰quivalences Ã©toile / triangle</h2>
        <p>Une charge Ã©toile (Z par phase) est Ã©quivalente Ã  une charge triangle (3Z par phase) vue du rÃ©seau. Les formules de puissance sont <strong>identiques</strong> dans les deux cas :</p>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin:1.2rem 0">
          <div style="background:#1a1a2e;border:1px solid #3af4c840;border-radius:8px;padding:1rem">
            <div style="color:#3af4c8;font-weight:700;margin-bottom:.7rem">â­ Ã‰toile Ã©quilibrÃ©e</div>
            <div style="font-family:'Space Mono',monospace;font-size:.8rem;line-height:2">
              V_ph = V = U/âˆš3<br>
              I = J<br>
              P = 3Â·VÂ·IÂ·cosÏ†<br>
              Q = 3Â·VÂ·IÂ·sinÏ†<br>
              S = 3Â·VÂ·I = âˆš3Â·UÂ·I
            </div>
          </div>
          <div style="background:#1a1a2e;border:1px solid #ff5e3a40;border-radius:8px;padding:1rem">
            <div style="color:#ff5e3a;font-weight:700;margin-bottom:.7rem">â–³ Triangle Ã©quilibrÃ©e</div>
            <div style="font-family:'Space Mono',monospace;font-size:.8rem;line-height:2">
              V_ph = U<br>
              I = Jâˆš3<br>
              P = 3Â·UÂ·JÂ·cosÏ† = âˆš3Â·UÂ·IÂ·cosÏ†<br>
              Q = 3Â·UÂ·JÂ·sinÏ† = âˆš3Â·UÂ·IÂ·sinÏ†<br>
              S = 3Â·UÂ·J = âˆš3Â·UÂ·I
            </div>
          </div>
        </div>
        <div style="background:#1a1a2e;border-left:4px solid #e8f428;padding:1rem;border-radius:6px;margin-top:1rem">
          <strong style="color:#e8f428">ğŸ“ RÃ¨gle d'or :</strong> Z<sub>Î”</sub> = 3Â·Z<sub>Y</sub> pour l'Ã©quivalence. Pour les condensateurs de compensation : C<sub>Î”</sub> = C<sub>Y</sub>/3. Le condensateur triangle est 3Ã— plus petit pour le mÃªme effet.
        </div>
      </div>

      <!-- QCM -->
      <div class="block" id="tri-qcm">
        <h2 class="block-title">QCM â€” SystÃ¨mes TriphasÃ©s</h2>
        <div id="qcm-triphasÃ©"></div>
      </div>
    </main>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const state = {
  currentSection: 'home',
  progress: {complexes:0, signaux:0, impedances:0, puissances:0, methodologie:0, 'triphasÃ©':0, aop_bases:0, aop_lineaire:0, aop_oscillateurs:0},
  scores: {}
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showHome() {
  hideAll();
  document.getElementById('home').style.display = 'flex';
  state.currentSection = 'home';
  updateProgress(0);
}

function showSection(id) {
  hideAll();
  const el = document.getElementById(id);
  if(el) {
    el.style.display = 'block';
    el.classList.add('active');
  }
  state.currentSection = id;
  window.scrollTo(0,0);
  updateProgress((id === 'modules-elec' || id === 'modules-aop') ? 10 : 20);
  if (id === 'progression') renderProgression();
}

function showLesson(id) {
  hideAll();
  const el = document.getElementById('lesson-' + id);
  el.style.display = 'block';
  el.classList.add('active');
  state.currentSection = 'lesson-' + id;
  window.scrollTo(0,0);
  updateProgress(40);
}

function hideAll() {
  document.querySelectorAll('.hero, .section').forEach(el => {
    el.style.display = 'none';
    el.classList.remove('active');
  });
}

function scrollToId(id) {
  const el = document.getElementById(id);
  if (el) el.scrollIntoView({behavior:'smooth', block:'start'});
}

// Progress bar
function updateProgress(pct) {
  document.getElementById('progressBar').style.width = pct + '%';
}

window.addEventListener('scroll', () => {
  const scrolled = window.scrollY;
  const total = document.documentElement.scrollHeight - window.innerHeight;
  if (total > 0) {
    const pct = Math.max(10, (scrolled/total)*100);
    document.getElementById('progressBar').style.width = pct + '%';
  }
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EXPAND CARDS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleExpand(header) {
  const content = header.nextElementSibling;
  const icon = header.querySelector('.expand-icon');
  const isOpen = content.classList.contains('open');
  content.classList.toggle('open');
  icon.textContent = isOpen ? '+' : 'âˆ’';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FORM SWITCHER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showForm(idx) {
  [0,1,2].forEach(i => {
    document.getElementById('form-'+i).style.display = i === idx ? 'block' : 'none';
  });
  document.querySelectorAll('.step').forEach((s,i) => {
    s.classList.toggle('active', i === idx);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CANVAS PLAN COMPLEXE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function drawComplex() {
  const a = parseFloat(document.getElementById('cRe').value) || 0;
  const b = parseFloat(document.getElementById('cIm').value) || 0;
  const canvas = document.getElementById('complexCanvas');
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;
  const cx = W/2, cy = H/2;
  const scale = Math.min(W,H) / (2 * Math.max(Math.abs(a), Math.abs(b), 3) * 1.4);

  ctx.clearRect(0,0,W,H);

  // Background
  ctx.fillStyle = '#12121a';
  ctx.fillRect(0,0,W,H);

  // Grid
  ctx.strokeStyle = '#2a2a3a';
  ctx.lineWidth = 1;
  for(let i=-10;i<=10;i++) {
    ctx.beginPath(); ctx.moveTo(cx+i*scale*2,0); ctx.lineTo(cx+i*scale*2,H); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(0,cy+i*scale*2); ctx.lineTo(W,cy+i*scale*2); ctx.stroke();
  }

  // Axes
  ctx.strokeStyle = '#3a3a5a';
  ctx.lineWidth = 2;
  ctx.beginPath(); ctx.moveTo(0,cy); ctx.lineTo(W,cy); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(cx,0); ctx.lineTo(cx,H); ctx.stroke();

  // Labels axes
  ctx.fillStyle = '#8888aa';
  ctx.font = '12px Space Mono';
  ctx.fillText('Re', W-25, cy-8);
  ctx.fillText('Im', cx+8, 15);
  ctx.fillText('0', cx+5, cy+15);

  // Point Z
  const px = cx + a*scale;
  const py = cy - b*scale;

  // Dashed projections
  ctx.strokeStyle = '#2a2a3a';
  ctx.lineWidth = 1;
  ctx.setLineDash([5,5]);
  ctx.beginPath(); ctx.moveTo(px,py); ctx.lineTo(px,cy); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(px,py); ctx.lineTo(cx,py); ctx.stroke();
  ctx.setLineDash([]);

  // Vector
  ctx.strokeStyle = '#e8f428';
  ctx.lineWidth = 2.5;
  ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(px,py); ctx.stroke();

  // Arrow head
  const angle = Math.atan2(-(py-cy), px-cx);
  ctx.fillStyle = '#e8f428';
  ctx.beginPath();
  ctx.moveTo(px,py);
  ctx.lineTo(px-12*Math.cos(angle-0.4), py+12*Math.sin(angle-0.4));
  ctx.lineTo(px-12*Math.cos(angle+0.4), py+12*Math.sin(angle+0.4));
  ctx.fill();

  // Point
  ctx.fillStyle = '#e8f428';
  ctx.beginPath(); ctx.arc(px,py,5,0,Math.PI*2); ctx.fill();

  // Angle arc
  const mod = Math.sqrt(a*a+b*b);
  if(mod > 0) {
    const phi = Math.atan2(b,a);
    ctx.strokeStyle = '#ff5e3a';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.arc(cx, cy, 30, 0, -phi, phi < 0);
    ctx.stroke();
    ctx.fillStyle = '#ff5e3a';
    ctx.font = '13px Space Mono';
    ctx.fillText('Ï†', cx+32, cy-5);
  }

  // Label Z
  ctx.fillStyle = '#e8f428';
  ctx.font = 'bold 14px Space Mono';
  ctx.fillText(`Z(${a},${b>0?'+'+b:b}j)`, px+8, py-8);

  // Label a on x
  ctx.fillStyle = '#3af4c8';
  ctx.font = '11px Space Mono';
  ctx.fillText('a='+a, px-15, cy+18);
  // Label b on y
  ctx.fillStyle = '#ff5e3a';
  ctx.fillText('b='+b, cx+5, py+4);

  // Update info
  const modZ = Math.sqrt(a*a+b*b);
  const argDeg = Math.atan2(b,a) * 180 / Math.PI;
  document.getElementById('cMod').textContent = modZ.toFixed(3);
  document.getElementById('cArg').textContent = argDeg.toFixed(1) + 'Â°';
  document.getElementById('cExp').textContent = modZ.toFixed(2) + 'Â·e^(j' + argDeg.toFixed(0) + 'Â°)';
}

// Draw on input change
document.getElementById('cRe').addEventListener('input', drawComplex);
document.getElementById('cIm').addEventListener('input', drawComplex);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CALCULATORS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function calcComplex() {
  const a = parseFloat(document.getElementById('calcA').value);
  const b = parseFloat(document.getElementById('calcB').value);
  const mod = Math.sqrt(a*a+b*b);
  const argRad = Math.atan2(b,a);
  const argDeg = argRad * 180 / Math.PI;
  document.getElementById('rMod').textContent = mod.toFixed(4);
  document.getElementById('rArg').textContent = argDeg.toFixed(2) + 'Â°';
  document.getElementById('rArgR').textContent = argRad.toFixed(4) + ' rad';
  document.getElementById('rConj').textContent = a + (b>=0 ? ' âˆ’ j' + Math.abs(b) : ' + j' + Math.abs(b));
  document.getElementById('rExp').textContent = mod.toFixed(3) + ' Â· e^(j' + argDeg.toFixed(1) + 'Â°)';
  document.getElementById('calcResult').classList.add('show');
}

function calcProd() {
  const a1=parseFloat(document.getElementById('z1a').value), b1=parseFloat(document.getElementById('z1b').value);
  const a2=parseFloat(document.getElementById('z2a').value), b2=parseFloat(document.getElementById('z2b').value);
  const ra = a1*a2 - b1*b2, rb = a1*b2 + b1*a2;
  const mod = Math.sqrt(ra*ra+rb*rb);
  const arg = Math.atan2(rb,ra)*180/Math.PI;
  document.getElementById('rProd').textContent = ra.toFixed(3) + (rb>=0?' + j':' âˆ’ j') + Math.abs(rb).toFixed(3);
  document.getElementById('rProdMod').textContent = mod.toFixed(4);
  document.getElementById('rProdArg').textContent = arg.toFixed(2) + 'Â°';
  document.getElementById('prodResult').classList.add('show');
}

function calcDiv() {
  const a1=parseFloat(document.getElementById('z1a').value), b1=parseFloat(document.getElementById('z1b').value);
  const a2=parseFloat(document.getElementById('z2a').value), b2=parseFloat(document.getElementById('z2b').value);
  const denom = a2*a2 + b2*b2;
  if(denom===0){alert('Zâ‚‚ ne peut pas Ãªtre nul !');return;}
  const ra = (a1*a2 + b1*b2)/denom, rb = (b1*a2 - a1*b2)/denom;
  const mod = Math.sqrt(ra*ra+rb*rb);
  const arg = Math.atan2(rb,ra)*180/Math.PI;
  document.getElementById('rProd').textContent = ra.toFixed(3) + (rb>=0?' + j':' âˆ’ j') + Math.abs(rb).toFixed(3);
  document.getElementById('rProdMod').textContent = mod.toFixed(4);
  document.getElementById('rProdArg').textContent = arg.toFixed(2) + 'Â°';
  document.getElementById('prodResult').classList.add('show');
}

function calcSignal() {
  const smax=parseFloat(document.getElementById('sMax').value);
  const freq=parseFloat(document.getElementById('sFreq').value);
  const seff = smax/Math.sqrt(2);
  const T = 1/freq;
  const omega = 2*Math.PI*freq;
  document.getElementById('sEff').textContent = seff.toFixed(2) + ' V (ou A)';
  document.getElementById('sPeriod').textContent = (T*1000).toFixed(2) + ' ms';
  document.getElementById('sOmega').textContent = omega.toFixed(2) + ' rad/s';
  document.getElementById('sExpr').textContent = smax.toFixed(1) + 'Â·sin(' + omega.toFixed(0) + 't)';
  document.getElementById('signalResult').classList.add('show');
}

function calcImpedance() {
  const R=parseFloat(document.getElementById('iR').value);
  const L=parseFloat(document.getElementById('iL').value)*1e-3;
  const C=parseFloat(document.getElementById('iC').value)*1e-6;
  const f=parseFloat(document.getElementById('iF').value);
  const omega=2*Math.PI*f;
  const XL=L*omega, XC=1/(C*omega), X=XL-XC;
  const modZ=Math.sqrt(R*R+X*X);
  const phi=Math.atan2(X,R)*180/Math.PI;
  document.getElementById('iXL').textContent = XL.toFixed(3) + ' Î©';
  document.getElementById('iXC').textContent = XC.toFixed(3) + ' Î©';
  document.getElementById('iX').textContent = X.toFixed(3) + ' Î©';
  document.getElementById('iZ').textContent = R.toFixed(2) + (X>=0?' + j':' âˆ’ j') + Math.abs(X).toFixed(2) + ' Î©';
  document.getElementById('iMod').textContent = modZ.toFixed(3) + ' Î©';
  document.getElementById('iPhi').textContent = phi.toFixed(2) + 'Â°';
  document.getElementById('iChar').textContent = X>0 ? 'âš¡ Inductif (Q>0)' : X<0 ? 'âš¡ Capacitif (Q<0)' : 'âš¡ RÃ©sistif pur';
  document.getElementById('impedanceResult').classList.add('show');
}

function calcPower() {
  const V=parseFloat(document.getElementById('pV').value);
  const I=parseFloat(document.getElementById('pI').value);
  const phi=parseFloat(document.getElementById('pPhi').value)*Math.PI/180;
  const P=V*I*Math.cos(phi), Q=V*I*Math.sin(phi), S=V*I;
  const cosP=Math.cos(phi);
  document.getElementById('pP').textContent = P.toFixed(1) + ' W';
  document.getElementById('pQ').textContent = Q.toFixed(1) + ' VAr';
  document.getElementById('pS').textContent = S.toFixed(1) + ' VA';
  document.getElementById('pCos').textContent = cosP.toFixed(4);
  document.getElementById('pVerif').textContent = 'âˆš('+ P.toFixed(0)+'Â²+'+Q.toFixed(0)+'Â²) = ' + Math.sqrt(P*P+Q*Q).toFixed(1) + ' â‰ˆ ' + S.toFixed(1) + ' âœ“';
  document.getElementById('powerResult').classList.add('show');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// QCM DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const QCMs = {
  complexes: [
    {
      q: "Quelle est la valeur de jÂ² ?",
      opts: ["1", "âˆ’1", "j", "0"],
      correct: 1,
      expl: "<strong>jÂ² = âˆ’1</strong> par dÃ©finition. C'est le fondement de toute l'arithmÃ©tique complexe. De lÃ  dÃ©coulent : jÂ³ = âˆ’j, jâ´ = 1, et 1/j = âˆ’j."
    },
    {
      q: "Quel est le module de Z = 3 + j4 ?",
      opts: ["7", "1", "5", "âˆš7"],
      correct: 2,
      expl: "|Z| = âˆš(3Â² + 4Â²) = âˆš(9+16) = âˆš25 = <strong>5</strong>. C'est le thÃ©orÃ¨me de Pythagore appliquÃ© au plan complexe : le module est la distance Ã  l'origine."
    },
    {
      q: "Quel est l'argument de Z = 1 + j1 ?",
      opts: ["0Â°", "30Â°", "45Â°", "90Â°"],
      correct: 2,
      expl: "Ï† = arctan(b/a) = arctan(1/1) = arctan(1) = <strong>45Â°</strong>. Z est Ã  Ã©gale distance des axes rÃ©el et imaginaire, donc Ã  45Â°."
    },
    {
      q: "Quelle forme est la plus pratique pour multiplier deux complexes ?",
      opts: ["AlgÃ©brique (a+jb)", "TrigonomÃ©trique", "Exponentielle |Z|Â·e^jÏ†", "Toutes Ã©quivalentes"],
      correct: 2,
      expl: "<strong>Forme exponentielle</strong> : Zâ‚Â·Zâ‚‚ = |Zâ‚||Zâ‚‚|Â·e^{j(Ï†â‚+Ï†â‚‚)}. On multiplie les modules et on additionne les arguments. Beaucoup plus simple que dÃ©velopper (a+jb)(c+jd)."
    },
    {
      q: "En Ã©lectricitÃ© sinusoÃ¯dale, que reprÃ©sente la multiplication par jÏ‰ en notation complexe ?",
      opts: ["Une intÃ©gration temporelle", "Une dÃ©rivation temporelle", "Un changement d'amplitude uniquement", "Une rotation de âˆ’90Â°"],
      correct: 1,
      expl: "<strong>DÃ©rivation temporelle</strong> : d/dt â†” Ã—jÏ‰. En effet, dÃ©river sin(Ï‰t+Ï†) donne Ï‰Â·cos(Ï‰t+Ï†) = Ï‰Â·sin(Ï‰t+Ï†+Ï€/2), ce qui correspond Ã  Ã—Ï‰ et +90Â° = Ã—jÏ‰."
    },
    {
      q: "Si Z = 5âˆ 30Â°, que vaut Z* (le conjuguÃ©) ?",
      opts: ["5âˆ âˆ’30Â°", "âˆ’5âˆ 30Â°", "5âˆ 150Â°", "1/5âˆ âˆ’30Â°"],
      correct: 0,
      expl: "<strong>Z* = 5âˆ âˆ’30Â°</strong>. Le conjuguÃ© conserve le module mais change le signe de l'argument (et de la partie imaginaire). PropriÃ©tÃ© : ZÂ·Z* = |Z|Â² = 25 (rÃ©el !)."
    },
    {
      q: "Pourquoi utilise-t-on j et non i en Ã©lectricitÃ© pour l'unitÃ© imaginaire ?",
      opts: ["Car j vient de 'jeu'", "Pour Ã©viter la confusion avec le courant i(t)", "Car i est rÃ©servÃ© aux intÃ©grales", "Pur hasard historique"],
      correct: 1,
      expl: "<strong>Convention de notation</strong> : en Ã©lectrotechnique, i(t) dÃ©signe le courant instantanÃ©. Pour Ã©viter toute ambiguÃ¯tÃ©, les ingÃ©nieurs utilisent j pour l'unitÃ© imaginaire. Le concept mathÃ©matique est identique Ã  i."
    },
    {
      q: "Pour calculer Zâ‚/Zâ‚‚ en forme algÃ©brique, quelle technique utilise-t-on ?",
      opts: ["Diviser les parties rÃ©elles entre elles, idem imaginaires", "Multiplier par le conjuguÃ© de Zâ‚‚ au numÃ©rateur et dÃ©nominateur", "Soustraire les modules", "Impossible en forme algÃ©brique"],
      correct: 1,
      expl: "<strong>Multiplication par le conjuguÃ©</strong> : Zâ‚/Zâ‚‚ = (Zâ‚Â·Zâ‚‚*)/(Zâ‚‚Â·Zâ‚‚*) = (Zâ‚Â·Zâ‚‚*)/|Zâ‚‚|Â². Le dÃ©nominateur devient rÃ©el, ce qui permet l'identification des parties rÃ©elle et imaginaire."
    }
  ],
  signaux: [
    {
      q: "Le rÃ©seau Ã©lectrique franÃ§ais est Ã  230 V efficaces. Quelle est la valeur crÃªte de la tension ?",
      opts: ["230 V", "163 V", "325 V", "460 V"],
      correct: 2,
      expl: "U_max = U_eff Ã— âˆš2 = 230 Ã— 1,414 â‰ˆ <strong>325 V</strong>. C'est la valeur qu'atteint rÃ©ellement la tension Ã  chaque demi-pÃ©riode. Important pour le dimensionnement de l'isolation des cÃ¢bles."
    },
    {
      q: "Quelle est la pulsation Ï‰ du rÃ©seau 50 Hz ?",
      opts: ["50 rad/s", "100 rad/s", "157 rad/s", "314 rad/s"],
      correct: 3,
      expl: "Ï‰ = 2Ï€f = 2Ï€ Ã— 50 â‰ˆ <strong>314,16 rad/s</strong>. La pulsation est l'argument temporel du sinus. Elle intervient dans Z_L = jÏ‰L et Z_C = 1/(jÏ‰C)."
    },
    {
      q: "Une charge inductive a son courant qui :",
      opts: ["Est en phase avec la tension", "Est en avance sur la tension", "Est en retard sur la tension", "A la mÃªme amplitude que la tension"],
      correct: 2,
      expl: "<strong>Retard</strong> de Ï† > 0Â°. Z_L = jÏ‰L â†’ Ï†_Z = +90Â° â†’ Ï†_I = Ï†_V âˆ’ 90Â°. Moyen mnÃ©motechnique CIVIL : pour l'inductance (L), V avant I. Le courant 'suit' la tension avec retard."
    },
    {
      q: "Qu'est-ce que la valeur efficace d'un signal ?",
      opts: [
        "La valeur maximale divisÃ©e par 2",
        "La valeur qui produit le mÃªme effet thermique qu'une tension continue de mÃªme valeur",
        "La valeur moyenne sur une demi-pÃ©riode",
        "La valeur instantanÃ©e Ã  t = T/4"
      ],
      correct: 1,
      expl: "<strong>Effet thermique Ã©quivalent</strong> : P = VÂ²_eff/R = VÂ²_continu/R. Formule : V_eff = V_max/âˆš2 â‰ˆ 0,707Â·V_max. Le 230V du rÃ©seau est bien la valeur efficace â€” pas la valeur crÃªte (325V)."
    },
    {
      q: "En convention rÃ©cepteur, si p = uÂ·i > 0, le dipÃ´le :",
      opts: ["Fournit de l'Ã©nergie au circuit", "ReÃ§oit de l'Ã©nergie du circuit", "Est neutre (ni source ni rÃ©cepteur)", "Dissipe obligatoirement par effet Joule"],
      correct: 1,
      expl: "<strong>ReÃ§oit de l'Ã©nergie</strong> (convention rÃ©cepteur). En convention rÃ©cepteur : p > 0 = rÃ©ception, p < 0 = fourniture. C'est l'inverse de la convention gÃ©nÃ©rateur oÃ¹ p > 0 signifie que le dipÃ´le fournit."
    },
    {
      q: "Quelle est la valeur moyenne d'un signal sinusoÃ¯dal sur une pÃ©riode complÃ¨te ?",
      opts: ["V_max/2", "V_max/âˆš2", "0", "V_max/Ï€"],
      correct: 2,
      expl: "<strong>0</strong>. Sur une pÃ©riode, le signal est autant positif que nÃ©gatif â†’ valeur moyenne nulle. C'est pourquoi on ne peut pas mesurer un courant alternatif avec un galvanomÃ¨tre (qui mesure la moyenne) : il faut un ampÃ¨remÃ¨tre vrai-efficace (True RMS)."
    },
    {
      q: "La dÃ©rivÃ©e temporelle d/dt d'une grandeur sinusoÃ¯dale Ã©quivaut, en notation complexe, Ã  :",
      opts: ["Diviser par jÏ‰", "Multiplier par jÏ‰", "Multiplier par Ï‰ uniquement", "Aucune correspondance simple"],
      correct: 1,
      expl: "<strong>Multiplier par jÏ‰</strong>. En temporel : d[V_maxÂ·sin(Ï‰t+Ï†)]/dt = Ï‰V_maxÂ·cos(Ï‰t+Ï†) = Ï‰V_maxÂ·sin(Ï‰t+Ï†+Ï€/2). En complexe : jÏ‰Â·VÂ·e^{jÏ†} = Ï‰Â·e^{jÏ€/2}Â·VÂ·e^{jÏ†}. C'est la mÃªme chose !"
    },
    {
      q: "Pour reprÃ©senter une grandeur sinusoÃ¯dale par son phaseur, quelles informations faut-il connaÃ®tre ?",
      opts: [
        "Uniquement l'amplitude maximale",
        "L'amplitude maximale et la frÃ©quence",
        "La valeur efficace et la phase initiale (Ã  frÃ©quence connue)",
        "La forme d'onde complÃ¨te"
      ],
      correct: 2,
      expl: "<strong>Valeur efficace + phase initiale</strong> (Ã  frÃ©quence fixe). Le phaseur est un vecteur fixe dans le plan complexe : son module est la valeur efficace, son argument est la phase initiale. La frÃ©quence est connue et commune Ã  tout le circuit."
    }
  ],
  impedances: [
    {
      q: "Un condensateur de 100 ÂµF est alimentÃ© Ã  50 Hz. Quelle est sa rÃ©actance capacitive X_C ?",
      opts: ["31,8 Î©", "3,14 Î©", "314 Î©", "0,0314 Î©"],
      correct: 0,
      expl: "X_C = 1/(Ï‰C) = 1/(2Ï€Ã—50Ã—100Ã—10â»â¶) = 1/(0,03141) â‰ˆ <strong>31,8 Î©</strong>. La rÃ©actance capacitive diminue quand f augmente (le condensateur 'laisse passer' les hautes frÃ©quences)."
    },
    {
      q: "Un circuit RLC sÃ©rie a R=10Î©, X_L=20Î©, X_C=10Î©. Quelle est l'impÃ©dance totale ?",
      opts: ["40 Î©", "10+j10 Î©", "10âˆ’j10 Î©", "10 Î©"],
      correct: 1,
      expl: "Z = R + j(X_L âˆ’ X_C) = 10 + j(20âˆ’10) = <strong>10 + j10 Î©</strong>. |Z| = 10âˆš2 â‰ˆ 14,1 Î©, Ï† = 45Â°. Le circuit est inductif car X_L > X_C."
    },
    {
      q: "La loi des mailles en rÃ©gime sinusoÃ¯dal s'applique :",
      opts: ["En valeurs efficaces scalaires uniquement", "En valeurs complexes ou instantanÃ©es", "Uniquement en DC", "Uniquement Ã  la rÃ©sonance"],
      correct: 1,
      expl: "<strong>En complexes ou instantanÃ©s</strong>. Jamais en valeurs efficaces scalaires (sauf si tous les Ã©lÃ©ments sont en phase). Î£U_k = 0 est valide avec des phaseurs complexes ou des fonctions du temps."
    },
    {
      q: "Deux impÃ©dances Zâ‚=10âˆ 30Â° Î© et Zâ‚‚=5âˆ âˆ’60Â° Î© sont en parallÃ¨le. Quel est |Z_Ã©q| ?",
      opts: ["15 Î©", "3,33 Î©", "2,5 Î©", "Environ 3,7 Î©"],
      correct: 3,
      expl: "Z_Ã©q = Zâ‚Zâ‚‚/(Zâ‚+Zâ‚‚). Zâ‚Zâ‚‚ = 50âˆ âˆ’30Â°. Zâ‚+Zâ‚‚ = 10cos30Â°+5cos(âˆ’60Â°) + j(10sin30Â°+5sin(âˆ’60Â°)) = (8,66+2,5)+j(5âˆ’4,33) = 11,16+j0,67 â†’ |Zâ‚+Zâ‚‚|â‰ˆ11,18âˆ 3,4Â°. Z_Ã©q = 50âˆ âˆ’30Â°/11,18âˆ 3,4Â° â‰ˆ <strong>4,47âˆ âˆ’33,4Â° â‰ˆ 3,7 Î© rÃ©el+imag</strong>."
    },
    {
      q: "Ã€ la rÃ©sonance d'un circuit RLC sÃ©rie, que se passe-t-il ?",
      opts: [
        "L'impÃ©dance est maximale",
        "L'impÃ©dance est minimale (Z = R) et le courant est maximal",
        "Le condensateur et la bobine se court-circuitent",
        "La frÃ©quence double"
      ],
      correct: 1,
      expl: "Ã€ fâ‚€ = 1/(2Ï€âˆšLC) : X_L = X_C â†’ Im(Z) = 0 â†’ <strong>Z = R (minimum)</strong> et I = V/R (maximum). Les tensions U_L et U_C peuvent Ãªtre bien supÃ©rieures Ã  V (facteur Q). Danger de surtension !"
    },
    {
      q: "Quel est le dÃ©phasage de l'impÃ©dance d'un condensateur parfait ?",
      opts: ["+90Â°", "0Â°", "âˆ’90Â°", "âˆ’45Â°"],
      correct: 2,
      expl: "Z_C = 1/(jÏ‰C) = âˆ’j/(Ï‰C). Ï†_Z = arg(âˆ’j) = <strong>âˆ’90Â°</strong>. La tension est en retard sur le courant de 90Â° (ou le courant est en avance sur la tension de 90Â°). CIVIL : Câ†’I avant V."
    },
    {
      q: "Dans le circuit suivant, R=30Î©, L=0,1H, f=50Hz. Le circuit est-il inductif ou capacitif ?",
      opts: ["Inductif (X_L>0)", "Capacitif (X_C>0)", "RÃ©sistif pur (rÃ©sonance)", "Ni l'un ni l'autre"],
      correct: 0,
      expl: "X_L = Ï‰L = 2Ï€Ã—50Ã—0,1 = 31,4 Î© > 0 â†’ Im(Z) > 0 â†’ <strong>inductif</strong>. Ï† = arctan(31,4/30) â‰ˆ 46,4Â°. Le courant est en retard sur la tension. (Pas de condensateur â†’ forcÃ©ment inductif ou rÃ©sistif.)"
    },
    {
      q: "Dans un diviseur de tension AC, comment calculer U_k aux bornes de Z_k en sÃ©rie avec les autres ?",
      opts: [
        "U_k = V Ã— R_k/R_total (en rÃ©els)",
        "U_k = V Ã— Z_k/Z_total (en complexes)",
        "U_k = V Ã— |Z_k|/|Z_total| (en modules seulement)",
        "U_k = I Ã— (Z_total âˆ’ Z_k)"
      ],
      correct: 1,
      expl: "<strong>U_k = V Ã— Z_k/Z_total</strong> (division complexe). C'est la mÃªme formule qu'en DC mais avec des impÃ©dances complexes. Le rÃ©sultat U_k est un phaseur avec son propre module et argument."
    }
  ],
  puissances: [
    {
      q: "Une charge consomme P=3kW avec cosÏ†=0,6. Quelle est la puissance rÃ©active Q ?",
      opts: ["1800 VAr", "4000 VAr", "5000 VA", "2400 VAr"],
      correct: 1,
      expl: "sinÏ† = âˆš(1âˆ’0,6Â²) = âˆš(1âˆ’0,36) = âˆš0,64 = 0,8. Q = PÃ—(sinÏ†/cosÏ†) = PÃ—tanÏ† = 3000Ã—(0,8/0,6) = <strong>4000 VAr</strong>. Ou : S = P/cosÏ† = 5000 VA, Q = âˆš(SÂ²âˆ’PÂ²) = âˆš(25Mâˆ’9M) = 4000 VAr."
    },
    {
      q: "Quel est le rÃ´le de la puissance rÃ©active Q ?",
      opts: [
        "Elle produit du travail mÃ©canique utile",
        "Elle chauffe les rÃ©sistances",
        "Elle reprÃ©sente les Ã©changes d'Ã©nergie entre source et champs magnÃ©tiques/Ã©lectriques, sans travail utile",
        "Elle est toujours nÃ©gative"
      ],
      correct: 2,
      expl: "<strong>Ã‰changes sans travail utile</strong>. Q correspond Ã  l'Ã©nergie stockÃ©e et restituÃ©e alternativement par L et C. Elle ne produit aucun travail mais impose un courant supplÃ©mentaire dans les cÃ¢bles, d'oÃ¹ des pertes Joule et le besoin de compensation."
    },
    {
      q: "Le thÃ©orÃ¨me de Boucherot affirme que pour plusieurs charges :",
      opts: [
        "S_tot = Î£S_i et P_tot = Î£P_i",
        "P_tot = Î£P_i et Q_tot = Î£Q_i (mais S_tot â‰  Î£S_i)",
        "Toutes les puissances sont additives",
        "Seule S est additive"
      ],
      correct: 1,
      expl: "<strong>P et Q sont additives, pas S</strong>. S_tot = âˆš(P_totÂ²+Q_totÂ²). Exemple : deux charges identiques Ã  cosÏ† diffÃ©rents â†’ S_tot â‰  2S. MÃ©thode : 1) Î£P, 2) Î£Q, 3) S_tot=âˆš(PÂ²+QÂ²)."
    },
    {
      q: "Comment calcule-t-on la puissance complexe Åœ ?",
      opts: ["Åœ = VÂ·I (sans conjuguÃ©)", "Åœ = VÂ·I* (avec le conjuguÃ© de I)", "Åœ = |V|Â·|I|", "Åœ = V*/I"],
      correct: 1,
      expl: "<strong>Åœ = VÂ·I*</strong>. Le conjuguÃ© de I est essentiel : il garantit que Re(Åœ) = P > 0 pour un rÃ©cepteur passif. Sans conjuguÃ©, le rÃ©sultat n'aurait pas la bonne signification physique. Åœ = P + jQ."
    },
    {
      q: "Un condensateur installÃ© en parallÃ¨le sur une charge inductive permet de :",
      opts: [
        "Augmenter la puissance active",
        "RÃ©duire la puissance rÃ©active totale et donc le courant absorbÃ©",
        "Augmenter le facteur de puissance au-delÃ  de 1",
        "Eliminer la puissance active"
      ],
      correct: 1,
      expl: "<strong>RÃ©duire Q et le courant</strong>. Le condensateur produit Q_C < 0 qui compense le Q > 0 de la charge inductive. Q_tot = Q_charge + Q_C â†’ diminue. S_tot = âˆš(PÂ²+Q_totÂ²) â†’ diminue. Le courant I = S/V â†’ diminue. Ã‰conomies sur les cÃ¢bles et l'Ã©nergie."
    },
    {
      q: "Une charge a V=230V, I=10A, cosÏ†=0,8. Que valent P, Q et S ?",
      opts: [
        "P=1840W, Q=2300VAr, S=2300VA",
        "P=2300W, Q=1380VAr, S=2875VA",
        "P=1840W, Q=1380VAr, S=2300VA",
        "P=2300W, Q=0VAr, S=2300VA"
      ],
      correct: 2,
      expl: "S = VÃ—I = 230Ã—10 = 2300 VA. P = SÃ—cosÏ† = 2300Ã—0,8 = <strong>1840 W</strong>. sinÏ† = âˆš(1âˆ’0,64) = 0,6. Q = SÃ—sinÏ† = 2300Ã—0,6 = <strong>1380 VAr</strong>. VÃ©rif: âˆš(1840Â²+1380Â²) = âˆš(3386M+1904M) â‰ˆ 2300 âœ“"
    },
    {
      q: "En triphasÃ© Ã©quilibrÃ©, la puissance instantanÃ©e totale est :",
      opts: [
        "Nulle",
        "Pulsatoire Ã  2Ï‰ comme en monophasÃ©",
        "Constante = 3Â·VÂ·IÂ·cosÏ†",
        "Pulsatoire Ã  6Ï‰"
      ],
      correct: 2,
      expl: "<strong>Constante = 3VIÂ·cosÏ†</strong>. En triphasÃ©, les 3 composantes fluctuantes (Ã  2Ï‰) se compensent exactement entre phases. C'est l'avantage majeur du triphasÃ© pour les moteurs : pas de couple pulsatoire, fonctionnement plus rÃ©gulier."
    },
    {
      q: "Pour relever cosÏ† de 0,7 Ã  0,95 avec P=25kW, quelle puissance rÃ©active faut-il compenser ?",
      opts: ["5,5 kVAr", "12,5 kVAr", "8,2 kVAr", "17,8 kVAr"],
      correct: 2,
      expl: "tanÏ†â‚ = sin(arccos0,7)/0,7 = âˆš(1âˆ’0,49)/0,7 = 0,714/0,7 â‰ˆ 1,020. tanÏ†â‚‚ = sin(arccos0,95)/0,95 â‰ˆ 0,329. Q_C = PÃ—(tanÏ†â‚âˆ’tanÏ†â‚‚) = 25000Ã—(1,020âˆ’0,329) = 25000Ã—0,691 â‰ˆ <strong>17 275 VAr â‰ˆ 17,3 kVAr</strong>. (RÃ©ponse la plus proche : 17,8 kVAr)"
    }
  ],
  'triphasÃ©': [
    {
      q: "Dans un rÃ©seau 230V/400V Ã©quilibrÃ© direct, quelle est la relation entre la tension composÃ©e U et la tension simple V ?",
      opts: ["U = V", "U = V/âˆš3", "U = âˆš3Â·V", "U = 3Â·V"],
      correct: 2,
      expl: "U = âˆš3Â·V est la relation fondamentale. 400 = âˆš3 Ã— 230 â‰ˆ 1,732 Ã— 230 = 398 V â‰ˆ 400 V. Les tensions composÃ©es (entre phases) sont âˆš3 fois plus grandes que les tensions simples (phase-neutre)."
    },
    {
      q: "Pour un rÃ©cepteur Ã©toile Ã©quilibrÃ©, quelle relation unit le courant de ligne I et le courant de phase J ?",
      opts: ["I = Jâˆš3", "I = J/âˆš3", "I = J", "I = 3J"],
      correct: 2,
      expl: "En couplage Ã©toile : I = J. Le courant traversant chaque impÃ©dance de phase est identique au courant de ligne. C'est la diffÃ©rence avec le triangle oÃ¹ I = Jâˆš3."
    },
    {
      q: "La puissance instantanÃ©e totale en triphasÃ© Ã©quilibrÃ© est :",
      opts: ["Pulsatoire Ã  2Ï‰ comme en monophasÃ©", "Constante et Ã©gale Ã  3VIÂ·cosÏ†", "Nulle en rÃ©gime permanent", "Proportionnelle Ã  sin(Ï‰t)"],
      correct: 1,
      expl: "C'est l'avantage majeur du triphasÃ© ! La puissance instantanÃ©e totale pâ‚ƒÏ† = 3VIÂ·cosÏ† est CONSTANTE (pas de fluctuation Ã  2Ï‰). Cela explique l'absence de vibrations dans les moteurs triphasÃ©s et leur couple rÃ©gulier."
    },
    {
      q: "Pour un rÃ©cepteur triangle, quelle est la tension aux bornes de chaque impÃ©dance ?",
      opts: ["La tension simple V", "La tension composÃ©e U", "U/âˆš3", "âˆš3Â·V/2"],
      correct: 1,
      expl: "En couplage triangle, chaque impÃ©dance est branchÃ©e directement entre deux phases : elle voit donc la tension composÃ©e U = âˆš3Â·V. C'est pourquoi on utilise le triangle quand les appareils sont conÃ§us pour la tension composÃ©e."
    },
    {
      q: "Pour relever le facteur de puissance d'une charge inductive, on place des condensateurs en parallÃ¨le. La puissance rÃ©active Qc fournie par un banc de 3 condensateurs en Ã©toile vaut :",
      opts: ["Qc = +3Ï‰CVÂ²", "Qc = âˆ’3Ï‰CUÂ²", "Qc = âˆ’3Ï‰CVÂ²", "Qc = âˆ’Ï‰CUÂ²/3"],
      correct: 2,
      expl: "Qc = âˆ’3Ï‰CVÂ² pour un couplage Ã©toile (V = tension simple). Le signe nÃ©gatif indique que les condensateurs fournissent de la puissance rÃ©active capacitive, compensant la puissance rÃ©active inductive (positive) de la charge."
    },
    {
      q: "Le thÃ©orÃ¨me de Boucherot affirme que pour un systÃ¨me triphasÃ© avec plusieurs charges, S_tot (puissance apparente scalaire) est-elle additive ?",
      opts: ["Oui, S_tot = Î£Sáµ¢", "Non, seules P_tot et Q_tot sont additives", "Oui si les charges sont identiques", "Non, aucune puissance n'est additive"],
      correct: 1,
      expl: "Boucherot : P_tot = Î£Páµ¢ âœ“ et Q_tot = Î£Qáµ¢ âœ“ et Åœ_tot = Î£Åœáµ¢ âœ“ MAIS S_tot â‰  Î£Sáµ¢ âœ—. La puissance apparente scalaire ne s'additionne PAS. On calcule S_tot = âˆš(P_totÂ² + Q_totÂ²) aprÃ¨s avoir additionnÃ© P et Q sÃ©parÃ©ment."
    }
  ],
  methodologie: [
    {
      q: "Quelle est la PREMIÃˆRE Ã©tape pour rÃ©soudre un circuit AC ?",
      opts: [
        "Calculer P et Q",
        "Calculer Ï‰ et les impÃ©dances complexes Z_R, Z_L, Z_C",
        "Appliquer la loi des nÅ“uds",
        "Convertir en temporel"
      ],
      correct: 1,
      expl: "<strong>Ï‰ et les impÃ©dances</strong> en premier. Ï‰ = 2Ï€f â†’ Z_L = jÏ‰L, Z_C = 1/(jÏ‰C). Sans les impÃ©dances complexes, impossible d'appliquer les lois de Kirchhoff. C'est le fondement de la mÃ©thode."
    },
    {
      q: "Pour un circuit RL sÃ©rie (R=30Î©, X_L=40Î©, V=100V), quel est le courant I ?",
      opts: ["3,33 A", "2,86 A", "2 A", "1,43 A"],
      correct: 2,
      expl: "|Z| = âˆš(RÂ²+X_LÂ²) = âˆš(900+1600) = âˆš2500 = 50 Î©. I = V/|Z| = 100/50 = <strong>2 A</strong>. C'est la mÃ©thode universelle : calculer |Z|, puis I = V/|Z|."
    },
    {
      q: "Un dipÃ´le a cosÏ† = 0,866. Quel est l'angle de dÃ©phasage Ï† ?",
      opts: ["15Â°", "30Â°", "45Â°", "60Â°"],
      correct: 1,
      expl: "Ï† = arccos(0,866) = <strong>30Â°</strong>. Rappel : cos30Â° = âˆš3/2 â‰ˆ 0,866. ConnaÃ®tre les valeurs trigonomÃ©triques remarquables (0Â°, 30Â°, 45Â°, 60Â°, 90Â°) est indispensable pour les calculs rapides."
    },
    {
      q: "Laquelle de ces affirmations sur la loi des mailles est CORRECTE en AC ?",
      opts: [
        "Î£U_eff = 0 (valeurs efficaces scalaires)",
        "Î£U_complexes = 0 (phaseurs)",
        "Î£P = 0 (puissances)",
        "Î£I = 0 (valeurs efficaces scalaires)"
      ],
      correct: 1,
      expl: "<strong>Î£U_complexes = 0</strong>. La loi des mailles s'applique aux phaseurs (complexes) ou aux valeurs instantanÃ©es. Jamais aux valeurs efficaces scalaires (car les tensions ont des phases diffÃ©rentes et ne s'additionnent pas algÃ©briquement)."
    },
    {
      q: "Pour passer d'un phaseur complexe I = 10âˆ âˆ’45Â° A Ã  l'expression temporelle i(t) :",
      opts: [
        "i(t) = 10Â·sin(Ï‰t âˆ’ 45Â°) A",
        "i(t) = 10âˆš2Â·sin(Ï‰t âˆ’ 45Â°) A",
        "i(t) = 10âˆš2Â·cos(Ï‰t âˆ’ 45Â°) A",
        "i(t) = 10Â·cos(Ï‰t + 45Â°) A"
      ],
      correct: 1,
      expl: "<strong>i(t) = 10âˆš2Â·sin(Ï‰t âˆ’ 45Â°)</strong>. Le phaseur a pour module la valeur efficace I = 10 A. La valeur crÃªte est I_max = IÃ—âˆš2 = 10âˆš2 A. L'argument âˆ’45Â° devient le dÃ©phasage initial. Formule : i(t) = I_maxÂ·sin(Ï‰t + Ï†)."
    },
    {
      q: "Quelle erreur classique faut-il absolument Ã©viter ?",
      opts: [
        "Travailler en complexes",
        "Additionner des S_i pour obtenir S_tot",
        "Utiliser Z = R + jX",
        "Calculer |Z| = âˆš(RÂ²+XÂ²)"
      ],
      correct: 1,
      expl: "<strong>S_tot â‰  Î£S_i</strong>. La puissance apparente n'est PAS additive. Seules P et Q le sont. MÃ©thode correcte : P_tot = Î£P_i, Q_tot = Î£Q_i, puis S_tot = âˆš(P_totÂ²+Q_totÂ²). C'est le thÃ©orÃ¨me de Boucherot."
    },
    {
      q: "Dans un circuit RC sÃ©rie (R=6Î©, X_C=8Î©, V=100V), que vaut le courant I et la puissance active P ?",
      opts: [
        "I=10A, P=600W",
        "I=7,14A, P=306W",
        "I=14,3A, P=1224W",
        "I=10A, P=1000W"
      ],
      correct: 0,
      expl: "|Z| = âˆš(6Â²+8Â²) = âˆš(36+64) = âˆš100 = 10 Î©. I = 100/10 = <strong>10 A</strong>. P = RÃ—IÂ² = 6Ã—100 = <strong>600 W</strong>. Q = X_CÃ—IÂ² = 8Ã—100 = 800 VAr. S = 100Ã—10 = 1000 VA. cosÏ† = 600/1000 = 0,6."
    },
    {
      q: "Pourquoi prÃ©fÃ¨re-t-on le triphasÃ© au monophasÃ© pour transporter de l'Ã©nergie ?",
      opts: [
        "Le triphasÃ© est plus simple Ã  installer",
        "Le triphasÃ© utilise moins de conducteurs pour la mÃªme puissance transmise et a une puissance instantanÃ©e constante",
        "Le triphasÃ© est moins dangereux",
        "Le triphasÃ© ne nÃ©cessite pas de neutre"
      ],
      correct: 1,
      expl: "<strong>Moins de conducteurs + puissance constante</strong>. En triphasÃ© : 3 fils pour 3Ã— la puissance monophasÃ©e (rapport 3/3 fils vs 2 fils). La puissance instantanÃ©e est constante (pas de pulsations Ã  2Ï‰). Les moteurs triphasÃ©s ont un couple plus rÃ©gulier."
    }
  ],
  aop_lineaire: [
    {
      q: "Dans un montage inverseur avec Râ‚ = 5 kÎ© et Râ‚‚ = 50 kÎ©, quel est le gain en tension ?",
      opts: ["âˆ’10", "+10", "âˆ’0,1", "+1"],
      correct: 0,
      expl: "<strong>Av = âˆ’Râ‚‚/Râ‚ = âˆ’50k/5k = âˆ’10.</strong> Le signe nÃ©gatif indique l'inversion de phase (opposition de signe). L'amplitude est amplifiÃ©e 10 fois."
    },
    {
      q: "Pourquoi dit-on que le point eâ» d'un montage inverseur est une Â« masse virtuelle Â» ?",
      opts: [
        "Parce qu'il est reliÃ© physiquement Ã  la masse",
        "Parce que eâ» = eâº = 0V en rÃ©gime linÃ©aire (Aâ†’âˆ, Îµâ†’0)",
        "Parce que l'impÃ©dance en ce point est nulle",
        "Parce que le courant d'entrÃ©e AOP est infini"
      ],
      correct: 1,
      expl: "En rÃ©gime linÃ©aire, Îµ = S/A â†’ 0 car Aâ†’âˆ. Donc eâ» = eâº. Si eâº est Ã  la masse (0V), alors eâ» = 0V aussi. Ce point est 'virtuellement' Ã  la masse bien que non reliÃ© physiquement."
    },
    {
      q: "Un montage non-inverseur a Râ‚ = 10 kÎ© et Râ‚‚ = 30 kÎ©. Quel est le gain ?",
      opts: ["+3", "+4", "âˆ’3", "+0,25"],
      correct: 1,
      expl: "<strong>Av = 1 + Râ‚‚/Râ‚ = 1 + 30/10 = 1 + 3 = +4.</strong> Le gain est toujours â‰¥ 1 et toujours positif pour un non-inverseur. L'entrÃ©e est sur eâº."
    },
    {
      q: "Quel montage AOP rÃ©alise la fonction S = âˆ’Rf Ã— (Veâ‚/Râ‚ + Veâ‚‚/Râ‚‚) ?",
      opts: ["Soustracteur", "IntÃ©grateur", "Sommateur inverseur", "DÃ©rivateur"],
      correct: 2,
      expl: "<strong>Sommateur inverseur.</strong> Plusieurs rÃ©sistances d'entrÃ©e alimentent l'entrÃ©e inverseuse (masse virtuelle). Chaque source est pondÃ©rÃ©e par son rapport Rf/Ri. La somme pondÃ©rÃ©e est inversÃ©e en sortie."
    },
    {
      q: "La fonction de transfert H(jÏ‰) = âˆ’1/(jÏ‰RC) correspond Ã  quel montage ?",
      opts: ["DÃ©rivateur", "IntÃ©grateur idÃ©al", "Filtre passe-haut", "Inverseur"],
      correct: 1,
      expl: "<strong>IntÃ©grateur idÃ©al.</strong> H = âˆ’1/(jÏ‰RC) = âˆ’1/(jÏ‰Â·Ï„) avec Ï„=RC. Le terme 1/jÏ‰ correspond Ã  l'intÃ©gration en domaine temporel. Gain dÃ©croÃ®t Ã  âˆ’20 dB/dÃ©cade : c'est un filtre passe-bas."
    },
    {
      q: "Quel est le principal avantage du montage suiveur (gain = 1) par rapport Ã  une simple connexion fil ?",
      opts: [
        "Il amplifie le signal par 2",
        "Il inverse la phase",
        "Il adapte les impÃ©dances : Rinâ†’âˆ, Routâ‰ˆ0",
        "Il filtre les hautes frÃ©quences"
      ],
      correct: 2,
      expl: "<strong>Adaptation d'impÃ©dance.</strong> Le suiveur prÃ©sente une impÃ©dance d'entrÃ©e infinie (ne charge pas la source) et une impÃ©dance de sortie quasi nulle (peut piloter n'importe quelle charge). Un simple fil n'offre pas cette isolation."
    },
    {
      q: "Pour un filtre passe-bas actif inverseur de frÃ©quence de coupure fc = 1 kHz et gain Gâ‚€ = âˆ’20, avec Râ‚ = 10 kÎ©, quelles valeurs choisir pour Rf et C ?",
      opts: [
        "Rf = 200 kÎ©, C = 7,96 nF",
        "Rf = 20 kÎ©, C = 79,6 nF",
        "Rf = 200 kÎ©, C = 79,6 nF",
        "Rf = 20 kÎ©, C = 7,96 nF"
      ],
      correct: 0,
      expl: "Gâ‚€ = Rf/Râ‚ = 20 â†’ Rf = 200 kÎ©. fc = 1/(2Ï€RfC) â†’ C = 1/(2Ï€Ã—200kÃ—1k) = 1/(1,257Ã—10â¹) â‰ˆ <strong>7,96 nF</strong>. RÃ©ponse A."
    },
    {
      q: "Un dÃ©rivateur AOP reÃ§oit un signal triangulaire. Quelle est la forme de sa sortie ?",
      opts: ["Triangulaire aussi", "SinusoÃ¯dale", "Signal carrÃ©", "Signal nul"],
      correct: 2,
      expl: "<strong>Signal carrÃ©.</strong> La dÃ©rivÃ©e d'un signal triangulaire (pentes constantes) est un signal carrÃ© (valeur constante + et valeur constante âˆ’ selon la pente). S(t) = âˆ’RfC Ã— dVe/dt."
    }
  ],
  aop_oscillateurs: [
    {
      q: "Un AOP sans contre-rÃ©action avec Ve = 100 mV et Vref = 50 mV sur eâº. Que vaut S ?",
      opts: ["+50 mV", "âˆ’50 mV", "+Vsat", "âˆ’Vsat"],
      correct: 3,
      expl: "Îµ = eâº âˆ’ eâ» = 50 âˆ’ 100 = âˆ’50 mV < 0. S = A Ã— Îµ â†’ âˆ’âˆ â†’ <strong>S = âˆ’Vsat</strong>. Sans contre-rÃ©action, tout signal, mÃªme minime, fait saturer l'AOP immÃ©diatement."
    },
    {
      q: "Pourquoi un comparateur simple est-il sensible au bruit autour du seuil de basculement ?",
      opts: [
        "Parce que son gain est trop faible",
        "Parce que tout bruit sur Ve peut faire commuter la sortie de faÃ§on intempestive",
        "Parce que sa sortie est en courant",
        "Parce qu'il chauffe trop"
      ],
      correct: 1,
      expl: "Le comparateur simple a un seuil unique. Si Ve oscille autour de ce seuil Ã  cause du bruit, la sortie commute en permanence de faÃ§on anarchique (phÃ©nomÃ¨ne de 'chattering'). Solution : trigger de Schmitt avec deux seuils distincts (hystÃ©rÃ©sis)."
    },
    {
      q: "Pour un trigger de Schmitt non-inverseur avec Vsat = Â±12 V, Râ‚ = 10 kÎ©, Râ‚‚ = 90 kÎ©, quels sont les seuils Vâº et Vâ» ?",
      opts: ["Â±1,2 V", "Â±10,8 V", "Â±1,33 V", "Â±0,5 V"],
      correct: 0,
      expl: "Vâº = Vsat Ã— Râ‚/(Râ‚+Râ‚‚) = 12 Ã— 10/(10+90) = 12 Ã— 0,1 = <strong>+1,2 V</strong>. Vâ» = âˆ’1,2 V. Largeur d'hystÃ©rÃ©sis Î”VH = 2,4 V."
    },
    {
      q: "Dans une bascule astable avec Râ‚ = Râ‚‚ (Î² = 0,5), la pÃ©riode d'oscillation vaut :",
      opts: ["T = RC", "T = 2RC Ã— ln(2)", "T = 2RC Ã— ln(3) â‰ˆ 2,2 RC", "T = Ï€ Ã— RC"],
      correct: 2,
      expl: "<strong>T = 2RC Ã— ln(3) â‰ˆ 2,2 RC</strong> quand Râ‚ = Râ‚‚ (Î² = 0,5). Formule gÃ©nÃ©rale : T = 2RC Ã— ln((1+Î²)/(1âˆ’Î²)). Le facteur ln(3) provient du rapport entre le seuil de basculement et la tension de saturation."
    },
    {
      q: "Quelle est la condition de gain pour qu'un oscillateur de Wien oscille de faÃ§on stable ?",
      opts: ["Av = 1", "Av = 2", "Av = 3", "Av = 10"],
      correct: 2,
      expl: "<strong>Av = 3</strong> (soit Rf = 2Râ‚). Ã€ fâ‚€, le rÃ©seau de Wien introduit une attÃ©nuation de 1/3 et un dÃ©phasage nul. Pour que le gain de boucle |AÎ²| = 1 (critÃ¨re de Barkhausen), l'amplificateur doit compenser exactement cette attÃ©nuation : Av Ã— (1/3) = 1 â†’ Av = 3."
    },
    {
      q: "Quelle est la frÃ©quence d'un oscillateur de Wien avec R = 15,9 kÎ© et C = 10 nF ?",
      opts: ["100 Hz", "1 kHz", "10 kHz", "100 kHz"],
      correct: 1,
      expl: "fâ‚€ = 1/(2Ï€RC) = 1/(2Ï€ Ã— 15900 Ã— 10Ã—10â»â¹) = 1/(2Ï€ Ã— 159Ã—10â»â¶) = 1/(998Ã—10â»â¶) â‰ˆ <strong>1 kHz</strong>."
    },
    {
      q: "Le critÃ¨re de Barkhausen stipule que pour des oscillations stables, le gain de boucle A(jÏ‰â‚€)Î²(jÏ‰â‚€) doit valoir :",
      opts: ["0", "j (dÃ©phasage 90Â°)", "1 + j0 (module 1, phase 0Â°)", "âˆ"],
      correct: 2,
      expl: "<strong>AÎ² = 1 + j0</strong> : module = 1 ET phase = 0Â°. Si |AÎ²| > 1 â†’ oscillations croissantes (saturation). Si |AÎ²| < 1 â†’ oscillations amorties. La phase nulle garantit que le signal se renforce en phase Ã  chaque tour de boucle."
    },
    {
      q: "Quelle diffÃ©rence fondamentale existe entre un oscillateur de Wien et une bascule astable ?",
      opts: [
        "Le Wien utilise un AOP, l'astable non",
        "Le Wien gÃ©nÃ¨re un sinusoÃ¯de, l'astable un signal carrÃ©",
        "L'astable a une frÃ©quence rÃ©glable, le Wien non",
        "Le Wien ne nÃ©cessite pas de contre-rÃ©action"
      ],
      correct: 1,
      expl: "<strong>Nature du signal :</strong> Wien â†’ sinusoÃ¯de basse distorsion (linÃ©aire, Barkhausen). Astable â†’ signal carrÃ© (non-linÃ©aire, saturation Ã  Â±Vsat). Les deux gÃ©nÃ¨rent des oscillations autonomes, mais la forme d'onde est radicalement diffÃ©rente."
    }
  ],
  aop_bases: [
    {
      q: "Dans un AOP idÃ©al en rÃ©gime linÃ©aire, que vaut la diffÃ©rence de potentiel en entrÃ©e &epsilon; ?",
      opts: ["Infinie", "V_cc", "ZÃ©ro", "Ã‰gale Ã  la tension d'entrÃ©e"],
      correct: 2,
      expl: "En rÃ©gime linÃ©aire (avec contre-rÃ©action nÃ©gative), le gain A infini impose que &epsilon; = 0, donc eâº = eâ»."
    },
    {
      q: "Quel est l'effet d'une contre-rÃ©action sur l'entrÃ©e non-inverseuse (eâº) ?",
      opts: ["Elle stabilise le systÃ¨me (linÃ©aire)", "Elle provoque la saturation de la sortie", "Elle annule le courant d'entrÃ©e", "Elle transforme l'AOP en filtre"],
      correct: 1,
      expl: "C'est une contre-rÃ©action positive. L'effet est cumulatif (effet boule de neige), ce qui amÃ¨ne l'AOP Ã  saturer (+Vsat ou -Vsat). C'est utilisÃ© pour les comparateurs Ã  hystÃ©rÃ©sis."
    },
    {
      q: "Dans la modÃ©lisation d'un amplificateur de tension, comment doit Ãªtre l'impÃ©dance d'entrÃ©e R_in pour Ãªtre idÃ©ale ?",
      opts: ["Nulle (0 &Omega;)", "Ã‰gale Ã  R_out", "Infinie", "Ã‰gale Ã  50 &Omega;"],
      correct: 2,
      expl: "R_in doit tendre vers l'infini pour ne consommer aucun courant sur la source (I = 0), afin de ne pas perturber le signal mesurÃ©."
    }
  ]
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CALCULATEUR SIGNAL SINUSOÃDAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function calcSignal() {
  const Seff = parseFloat(document.getElementById('s-eff').value) || 0;
  const f    = parseFloat(document.getElementById('s-freq').value) || 50;
  const phi  = parseFloat(document.getElementById('s-phi').value) || 0;
  const result = document.getElementById('s-result');

  const Smax  = Seff * Math.sqrt(2);
  const T     = 1 / f;
  const omega = 2 * Math.PI * f;
  const phiRad = phi * Math.PI / 180;

  result.innerHTML = `
    <div class="result-line"><span class="result-key">Valeur crÃªte S_max</span><span class="result-val">${Smax.toFixed(3)} V (ou A)</span></div>
    <div class="result-line"><span class="result-key">Pulsation Ï‰</span><span class="result-val">${omega.toFixed(2)} rad/s</span></div>
    <div class="result-line"><span class="result-key">PÃ©riode T</span><span class="result-val">${(T*1000).toFixed(3)} ms</span></div>
    <div class="result-line"><span class="result-key">Expression temporelle</span><span class="result-val">s(t) = ${Smax.toFixed(2)}Â·sin(${omega.toFixed(0)}t ${phi>=0?'+':''}${phi}Â°)</span></div>
    <div class="result-line"><span class="result-key">Phaseur complexe</span><span class="result-val">${Seff.toFixed(2)}âˆ ${phi}Â° (module = valeur eff.)</span></div>
  `;
  result.className = 'calc-result show';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CALCULATEUR IMPÃ‰DANCE RLC
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function calcImpedance() {
  const R = parseFloat(document.getElementById('i-r').value) || 0;
  const L = parseFloat(document.getElementById('i-l').value) || 0;
  const C = parseFloat(document.getElementById('i-c').value) || 0;
  const f = parseFloat(document.getElementById('i-f').value) || 50;
  const V = parseFloat(document.getElementById('i-v').value) || 230;
  const result = document.getElementById('i-result');

  const omega = 2 * Math.PI * f;
  const XL = omega * L / 1000;        // L en mH
  const XC = C > 0 ? 1 / (omega * C / 1e6) : 0;  // C en ÂµF
  const X  = XL - XC;
  const Ztot = Math.sqrt(R*R + X*X);
  const phi  = Math.atan2(X, R) * 180 / Math.PI;
  const I    = Ztot > 0 ? V / Ztot : 0;
  const P    = R * I * I;
  const Q    = X * I * I;
  const S    = V * I;
  const cosP = S > 0 ? P / S : 0;

  const nature = X > 0.01 ? 'Inductif' : X < -0.01 ? 'Capacitif' : 'RÃ©sistif pur';

  result.innerHTML = `
    <div class="result-line"><span class="result-key">X_L = Ï‰L</span><span class="result-val">${XL.toFixed(2)} Î©</span></div>
    ${C>0 ? '<div class="result-line"><span class="result-key">X_C = 1/(Ï‰C)</span><span class="result-val">'+XC.toFixed(2)+' Î©</span></div>' : ''}
    <div class="result-line"><span class="result-key">X = X_L âˆ’ X_C</span><span class="result-val">${X.toFixed(2)} Î©</span></div>
    <div class="result-line"><span class="result-key">|Z| = âˆš(RÂ²+XÂ²)</span><span class="result-val">${Ztot.toFixed(3)} Î©</span></div>
    <div class="result-line"><span class="result-key">Ï† = arctan(X/R)</span><span class="result-val">${phi.toFixed(1)}Â° (${nature})</span></div>
    <div class="result-line"><span class="result-key">I = V/|Z|</span><span class="result-val">${I.toFixed(3)} A</span></div>
    <div class="result-line"><span class="result-key">P = RÂ·IÂ²</span><span class="result-val">${P.toFixed(1)} W</span></div>
    <div class="result-line"><span class="result-key">Q = XÂ·IÂ²</span><span class="result-val">${Q.toFixed(1)} VAr</span></div>
    <div class="result-line"><span class="result-key">S = VÂ·I</span><span class="result-val">${S.toFixed(1)} VA</span></div>
    <div class="result-line"><span class="result-key">cosÏ† = P/S</span><span class="result-val">${cosP.toFixed(3)}</span></div>
    ${C>0&&L>0 ? '<div class="result-line"><span class="result-key">fâ‚€ rÃ©sonance</span><span class="result-val">'+(1/(2*Math.PI*Math.sqrt(L/1000*C/1e6))).toFixed(1)+' Hz</span></div>' : ''}
  `;
  result.className = 'calc-result show';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CALCULATEUR PUISSANCES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function calcPuissance() {
  const mode = document.getElementById('p-mode').value;
  const in1  = parseFloat(document.getElementById('p-in1').value) || 0;
  const in2  = parseFloat(document.getElementById('p-in2').value) || 0;
  const in3  = parseFloat(document.getElementById('p-in3').value) || 230;
  const in4  = parseFloat(document.getElementById('p-in4').value) || 0.95;
  const result = document.getElementById('p-result');

  // Update labels
  const labels = {
    'pqs':  ['P (W)', 'Q (VAr)', 'V (V)', 'cosÏ†\' cible'],
    'scosphi': ['S (VA)', 'cosÏ†', 'V (V)', 'f (Hz)'],
    'comp': ['P (W)', 'cosÏ† actuel', 'V (V)', 'cosÏ†\' cible']
  };
  ['p-l1','p-l2','p-l3','p-l4'].forEach((id,i) => {
    const el = document.getElementById(id);
    if(el) el.textContent = labels[mode][i];
  });

  let html = '';
  if (mode === 'pqs') {
    const P=in1, Q=in2, V=in3;
    const S = Math.sqrt(P*P+Q*Q);
    const cosP = S>0 ? P/S : 0;
    const phi  = Math.atan2(Q,P)*180/Math.PI;
    const I    = V>0 ? S/V : 0;
    html = `
      <div class="result-line"><span class="result-key">S = âˆš(PÂ²+QÂ²)</span><span class="result-val">${S.toFixed(1)} VA</span></div>
      <div class="result-line"><span class="result-key">cosÏ† = P/S</span><span class="result-val">${cosP.toFixed(4)}</span></div>
      <div class="result-line"><span class="result-key">Ï†</span><span class="result-val">${phi.toFixed(1)}Â°</span></div>
      <div class="result-line"><span class="result-key">I = S/V</span><span class="result-val">${I.toFixed(2)} A</span></div>
      <div class="result-line"><span class="result-key">Nature</span><span class="result-val">${Q>0?'Inductif (Q>0)':Q<0?'Capacitif (Q<0)':'RÃ©sistif pur'}</span></div>
    `;
  } else if (mode === 'scosphi') {
    const S=in1, cosP=in2, V=in3;
    const P = S * cosP;
    const sinP = Math.sqrt(1-cosP*cosP);
    const Q = S * sinP;
    const phi = Math.acos(cosP)*180/Math.PI;
    const I = V>0 ? S/V : 0;
    html = `
      <div class="result-line"><span class="result-key">P = SÂ·cosÏ†</span><span class="result-val">${P.toFixed(1)} W</span></div>
      <div class="result-line"><span class="result-key">Q = SÂ·sinÏ†</span><span class="result-val">${Q.toFixed(1)} VAr</span></div>
      <div class="result-line"><span class="result-key">Ï† = arccos(cosÏ†)</span><span class="result-val">${phi.toFixed(1)}Â°</span></div>
      <div class="result-line"><span class="result-key">I = S/V</span><span class="result-val">${I.toFixed(2)} A</span></div>
    `;
  } else { // comp
    const P=in1, cosPhi=in2, V=in3, cosPhiTarget=in4;
    const phi  = Math.acos(cosPhi);
    const phiT = Math.acos(cosPhiTarget);
    const Qc   = P*(Math.tan(phi)-Math.tan(phiT));
    const C    = Qc/(2*Math.PI*50*V*V);
    const C_tri= Qc/(3*2*Math.PI*50*V*V);
    const Sbefore = P/cosPhi;
    const Safter  = Math.sqrt(P*P + (P*Math.tan(phi)-Qc)**2);
    const Ibefore = Sbefore/V;
    const Iafter  = Safter/V;
    html = `
      <div class="result-line"><span class="result-key">Q_C Ã  compenser</span><span class="result-val">${Qc.toFixed(0)} VAr</span></div>
      <div class="result-line"><span class="result-key">C (monophasÃ©)</span><span class="result-val">${(C*1e6).toFixed(1)} ÂµF</span></div>
      <div class="result-line"><span class="result-key">C (triphasÃ© Ã©toile)</span><span class="result-val">${(C_tri*1e6*3).toFixed(1)} ÂµF / phase</span></div>
      <div class="result-line"><span class="result-key">C (triphasÃ© triangle)</span><span class="result-val">${(C_tri*1e6).toFixed(1)} ÂµF / phase</span></div>
      <div class="result-line"><span class="result-key">Courant avant</span><span class="result-val">${Ibefore.toFixed(2)} A</span></div>
      <div class="result-line"><span class="result-key">Courant aprÃ¨s</span><span class="result-val">${Iafter.toFixed(2)} A (âˆ’${(100*(Ibefore-Iafter)/Ibefore).toFixed(0)}%)</span></div>
    `;
  }
  result.innerHTML = html;
  result.className = 'calc-result show';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function calcAOP2() {
  const type = document.getElementById('aop2-type').value;
  const R1 = parseFloat(document.getElementById('aop2-r1').value) || 0;
  const R2 = parseFloat(document.getElementById('aop2-r2').value) || 0;
  const Ve = parseFloat(document.getElementById('aop2-ve').value) || 0;
  const C  = parseFloat(document.getElementById('aop2-c').value) || 0;
  const result = document.getElementById('aop2-result');
  let html = '';

  if (type === 'inv') {
    if (R1 === 0) { result.innerHTML = '<div class="result-line"><span class="result-key">Erreur</span><span class="result-val" style="color:var(--accent2)">Râ‚ ne peut pas Ãªtre 0</span></div>'; result.className='calc-result show'; return; }
    const Av = -(R2 / R1);
    const S  = Av * Ve;
    const dB = 20 * Math.log10(Math.abs(Av));
    html = `
      <div class="result-line"><span class="result-key">Gain Av</span><span class="result-val">${Av.toFixed(3)}</span></div>
      <div class="result-line"><span class="result-key">|Av| en dB</span><span class="result-val">${dB.toFixed(1)} dB</span></div>
      <div class="result-line"><span class="result-key">Tension de sortie S</span><span class="result-val">${S.toFixed(3)} V</span></div>
      <div class="result-line"><span class="result-key">Phase</span><span class="result-val">180Â° (inversÃ©)</span></div>
    `;
  } else if (type === 'noninv') {
    if (R1 === 0) { result.innerHTML = '<div class="result-line"><span class="result-key">Erreur</span><span class="result-val" style="color:var(--accent2)">Râ‚ ne peut pas Ãªtre 0</span></div>'; result.className='calc-result show'; return; }
    const Av = 1 + R2 / R1;
    const S  = Av * Ve;
    const dB = 20 * Math.log10(Math.abs(Av));
    html = `
      <div class="result-line"><span class="result-key">Gain Av</span><span class="result-val">+${Av.toFixed(3)}</span></div>
      <div class="result-line"><span class="result-key">|Av| en dB</span><span class="result-val">${dB.toFixed(1)} dB</span></div>
      <div class="result-line"><span class="result-key">Tension de sortie S</span><span class="result-val">${S.toFixed(3)} V</span></div>
      <div class="result-line"><span class="result-key">Phase</span><span class="result-val">0Â° (en phase)</span></div>
    `;
  } else if (type === 'suiveur') {
    html = `
      <div class="result-line"><span class="result-key">Gain Av</span><span class="result-val">+1 (exactement)</span></div>
      <div class="result-line"><span class="result-key">Tension de sortie S</span><span class="result-val">${Ve.toFixed(3)} V</span></div>
      <div class="result-line"><span class="result-key">ImpÃ©dance entrÃ©e</span><span class="result-val">â†’ âˆ (idÃ©al)</span></div>
      <div class="result-line"><span class="result-key">ImpÃ©dance sortie</span><span class="result-val">â‰ˆ 0 Î© (idÃ©al)</span></div>
    `;
  } else if (type === 'integ') {
    if (R1 === 0 || C === 0) { result.innerHTML = '<div class="result-line"><span class="result-key">Erreur</span><span class="result-val" style="color:var(--accent2)">Râ‚ et C doivent Ãªtre non nuls</span></div>'; result.className='calc-result show'; return; }
    const tau = R1 * 1e3 * C * 1e-9;
    const fc  = 1 / (2 * Math.PI * tau);
    html = `
      <div class="result-line"><span class="result-key">Constante Ï„ = Râ‚C</span><span class="result-val">${(tau*1e6).toFixed(2)} Âµs</span></div>
      <div class="result-line"><span class="result-key">FrÃ©quence de coupure fc</span><span class="result-val">${fc >= 1000 ? (fc/1000).toFixed(2)+' kHz' : fc.toFixed(1)+' Hz'}</span></div>
      <div class="result-line"><span class="result-key">Pente attÃ©nuation</span><span class="result-val">âˆ’20 dB/dÃ©cade</span></div>
      <div class="result-line"><span class="result-key">Gain Ã  fc</span><span class="result-val">âˆ’3 dB (= Gâ‚€/âˆš2)</span></div>
    `;
  } else if (type === 'filtre') {
    if (R1 === 0 || R2 === 0 || C === 0) { result.innerHTML = '<div class="result-line"><span class="result-key">Erreur</span><span class="result-val" style="color:var(--accent2)">Tous les paramÃ¨tres requis</span></div>'; result.className='calc-result show'; return; }
    const G0  = R2 / R1;
    const tau = R2 * 1e3 * C * 1e-9;
    const fc  = 1 / (2 * Math.PI * tau);
    const dB  = 20 * Math.log10(G0);
    html = `
      <div class="result-line"><span class="result-key">Gain DC Gâ‚€ = Rf/Râ‚</span><span class="result-val">${G0.toFixed(2)} (${dB.toFixed(1)} dB)</span></div>
      <div class="result-line"><span class="result-key">FrÃ©quence de coupure fc</span><span class="result-val">${fc >= 1000 ? (fc/1000).toFixed(2)+' kHz' : fc.toFixed(1)+' Hz'}</span></div>
      <div class="result-line"><span class="result-key">Gain Ã  fc</span><span class="result-val">${(G0/Math.sqrt(2)).toFixed(2)} (âˆ’3 dB)</span></div>
      <div class="result-line"><span class="result-key">Pente pour f &gt; fc</span><span class="result-val">âˆ’20 dB/dÃ©cade</span></div>
    `;
  }
  result.innerHTML = html;
  result.className = 'calc-result show';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CALCULATEUR AOP-03 â€” OSCILLATEURS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function calcAOP3() {
  const type = document.getElementById('aop3-type').value;
  const R1   = parseFloat(document.getElementById('aop3-r1').value) || 0;
  const R2   = parseFloat(document.getElementById('aop3-r2').value) || 0;
  const R    = parseFloat(document.getElementById('aop3-r').value) || 0;
  const C    = parseFloat(document.getElementById('aop3-c').value) || 0;
  const Vsat = parseFloat(document.getElementById('aop3-vsat').value) || 12;
  const result = document.getElementById('aop3-result');
  let html = '';

  if (type === 'schmitt') {
    if (R1 + R2 === 0) { result.innerHTML = '<div class="result-line"><span class="result-key">Erreur</span><span class="result-val" style="color:var(--accent2)">Râ‚ et Râ‚‚ requis</span></div>'; result.className='calc-result show'; return; }
    const Vp = Vsat * R1 / (R1 + R2);
    const Vm = -Vp;
    const dV = 2 * Vp;
    html = `
      <div class="result-line"><span class="result-key">Seuil haut Vâº</span><span class="result-val">+${Vp.toFixed(3)} V</span></div>
      <div class="result-line"><span class="result-key">Seuil bas Vâ»</span><span class="result-val">${Vm.toFixed(3)} V</span></div>
      <div class="result-line"><span class="result-key">Largeur hystÃ©rÃ©sis Î”VH</span><span class="result-val">${dV.toFixed(3)} V</span></div>
      <div class="result-line"><span class="result-key">Î² = Râ‚/(Râ‚+Râ‚‚)</span><span class="result-val">${(R1/(R1+R2)).toFixed(4)}</span></div>
    `;
  } else if (type === 'astable') {
    if (R === 0 || C === 0 || R1 + R2 === 0) { result.innerHTML = '<div class="result-line"><span class="result-key">Erreur</span><span class="result-key" style="color:var(--accent2)">Tous paramÃ¨tres requis</span></div>'; result.className='calc-result show'; return; }
    const beta = R2 / (R1 + R2);
    const tau  = R * 1e3 * C * 1e-9;
    const T    = 2 * tau * Math.log((1 + beta) / (1 - beta));
    const f    = 1 / T;
    html = `
      <div class="result-line"><span class="result-key">Î² = Râ‚‚/(Râ‚+Râ‚‚)</span><span class="result-val">${beta.toFixed(4)}</span></div>
      <div class="result-line"><span class="result-key">Constante Ï„ = RC</span><span class="result-val">${(tau*1e6).toFixed(2)} Âµs</span></div>
      <div class="result-line"><span class="result-key">PÃ©riode T</span><span class="result-val">${T >= 1e-3 ? (T*1e3).toFixed(3)+' ms' : (T*1e6).toFixed(1)+' Âµs'}</span></div>
      <div class="result-line"><span class="result-key">FrÃ©quence f</span><span class="result-val">${f >= 1000 ? (f/1000).toFixed(2)+' kHz' : f.toFixed(1)+' Hz'}</span></div>
      <div class="result-line"><span class="result-key">Rapport cyclique</span><span class="result-val">50% (symÃ©trique)</span></div>
    `;
  } else if (type === 'wien') {
    if (R === 0 || C === 0) { result.innerHTML = '<div class="result-line"><span class="result-key">Erreur</span><span class="result-val" style="color:var(--accent2)">R et C requis</span></div>'; result.className='calc-result show'; return; }
    const tau = R * 1e3 * C * 1e-9;
    const f0  = 1 / (2 * Math.PI * tau);
    html = `
      <div class="result-line"><span class="result-key">FrÃ©quence fâ‚€</span><span class="result-val">${f0 >= 1000 ? (f0/1000).toFixed(3)+' kHz' : f0.toFixed(1)+' Hz'}</span></div>
      <div class="result-line"><span class="result-key">Gain requis Av</span><span class="result-val">3 (exactement)</span></div>
      <div class="result-line"><span class="result-key">Rf = 2Râ‚ (ex: Râ‚)</span><span class="result-val">${R1.toFixed(1)} kÎ© â†’ Rf = ${(2*R1).toFixed(1)} kÎ©</span></div>
      <div class="result-line"><span class="result-key">AttÃ©nuation rÃ©seau Wien Ã  fâ‚€</span><span class="result-val">1/3 âˆ 0Â°</span></div>
    `;
  }
  result.innerHTML = html;
  result.className = 'calc-result show';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderQCM(moduleId, questions) {
  const container = document.getElementById('qcm-' + moduleId);
  if (!container) return;
  container.innerHTML = '';
  let answered = 0, correct = 0;

  questions.forEach((q, qi) => {
    const card = document.createElement('div');
    card.className = 'qcm-card';
    card.id = 'qcard-' + moduleId + '-' + qi;

    const letters = ['A','B','C','D'];
    const optsHTML = q.opts.map((o,oi) => `
      <div class="qcm-opt" id="opt-${moduleId}-${qi}-${oi}" onclick="selectOpt('${moduleId}',${qi},${oi},${q.correct})">
        <div class="opt-letter">${letters[oi]}</div>${o}
      </div>`).join('');

    card.innerHTML = `
      <div class="qcm-q"><strong>Q${qi+1}.</strong> ${q.q}</div>
      <div class="qcm-options">${optsHTML}</div>
      <div class="qcm-explanation" id="expl-${moduleId}-${qi}">ğŸ’¡ ${q.expl}</div>`;
    container.appendChild(card);
  });

  // Score total
  const scoreDiv = document.createElement('div');
  scoreDiv.className = 'qcm-total';
  scoreDiv.id = 'score-' + moduleId;
  scoreDiv.innerHTML = `
    <div class="score-big" id="score-num-${moduleId}">0/${questions.length}</div>
    <div class="score-msg" id="score-msg-${moduleId}">RÃ©pondez Ã  toutes les questions</div>
    <button class="retry-btn" onclick="retryQCM('${moduleId}')">Recommencer</button>`;
  container.appendChild(scoreDiv);
}

const qcmState = {};

function selectOpt(mid, qi, oi, correct) {
  const key = mid + '-' + qi;
  if (qcmState[key]) return; // already answered
  qcmState[key] = {chosen: oi, correct: correct, isCorrect: oi === correct};

  // Visual feedback
  const opts = document.querySelectorAll(`[id^="opt-${mid}-${qi}-"]`);
  opts.forEach((opt, i) => {
    opt.classList.add('disabled');
    if (i === correct) opt.classList.add('correct-answer');
  });
  const chosen = document.getElementById(`opt-${mid}-${qi}-${oi}`);
  if (oi === correct) {
    chosen.classList.add('selected', 'correct');
    document.getElementById(`qcard-${mid}-${qi}`).classList.add('correct');
  } else {
    chosen.classList.add('selected', 'wrong');
    document.getElementById(`qcard-${mid}-${qi}`).classList.add('wrong');
  }

  // Show explanation
  document.getElementById(`expl-${mid}-${qi}`).classList.add('show');

  // Check if all answered
  checkAllAnswered(mid);
}

function checkAllAnswered(mid) {
  const qs = QCMs[mid];
  let total = qs.length, answered = 0, correct = 0;
  qs.forEach((q,i) => {
    const k = mid + '-' + i;
    if (qcmState[k]) { answered++; if(qcmState[k].isCorrect) correct++; }
  });
  if (answered === total) {
    const scoreDiv = document.getElementById('score-' + mid);
    scoreDiv.classList.add('show');
    document.getElementById('score-num-' + mid).textContent = correct + '/' + total;
    const pct = Math.round(correct/total*100);
    let msg = pct >= 80 ? 'ğŸ‰ Excellent ! Vous maÃ®trisez ce module.' :
              pct >= 60 ? 'ğŸ‘ Bien ! Revoyez les points incorrects.' :
              'ğŸ“š Continuez Ã  rÃ©viser â€” relisez les explications.';
    document.getElementById('score-msg-' + mid).textContent = msg;
    state.progress[mid] = pct;
    state.scores[mid] = {correct, total};
  }
}

function retryQCM(mid) {
  // Reset state
  const qs = QCMs[mid];
  qs.forEach((q,i) => { delete qcmState[mid+'-'+i]; });
  document.getElementById('score-' + mid).classList.remove('show');
  renderQCM(mid, qs);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PROGRESSION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const modules = ['complexes','signaux','impedances','puissances','methodologie','triphasÃ©','aop_bases','aop_lineaire','aop_oscillateurs'];
const moduleNames = ['Nombres Complexes','Signaux SinusoÃ¯daux','Lois & ImpÃ©dances','Puissances','MÃ©thodologie','SystÃ¨mes TriphasÃ©s','AOP â€” Bases','AOP â€” Montages LinÃ©aires','AOP â€” Oscillateurs'];

function renderProgression() {
  const container = document.getElementById('progressItems');
  container.innerHTML = modules.map((m,i) => {
    const pct = state.progress[m] || 0;
    const score = state.scores[m] ? `${state.scores[m].correct}/${state.scores[m].total}` : 'â€”';
    return `
      <div class="prog-item">
        <span class="prog-label">${moduleNames[i]}</span>
        <div class="prog-bar-wrap"><div class="prog-bar-fill" style="width:${pct}%"></div></div>
        <span class="prog-pct">${pct}%</span>
      </div>`;
  }).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
window.addEventListener('DOMContentLoaded', () => {
  // Render all QCMs
  Object.keys(QCMs).forEach(mid => renderQCM(mid, QCMs[mid]));
  // Draw initial complex plane
  setTimeout(drawComplex, 100);
  // Show home
  showHome();
});
</script>
</body>
</html>
